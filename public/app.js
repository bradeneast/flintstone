(()=>{let $=(a,b=document)=>b.querySelector(a),Sa=(a,b)=>b==void 0?JSON.parse(localStorage.getItem(a)):localStorage.setItem(a,JSON.stringify(b));function bc(a){if(Array.isArray(a)){for(var b=0,d=Array(a.length);b<a.length;b++)d[b]=a[b];return d}else return Array.from(a)}var cc=Object.hasOwnProperty,qb=Object.setPrototypeOf,dc=Object.isFrozen,E=Object.freeze,P=Object.seal,ec=Object.create,rb=typeof Reflect!=="undefined"&&Reflect,wa=rb.apply,Da=rb.construct;wa||(wa=function a(b,d,e){return b.apply(d,e)});E||(E=function a(b){return b});P||(P=function a(b){return b});Da||(Da=function a(b,d){return new(Function.prototype.bind.apply(b,[null].concat(bc(d))))()});var fc=Q(Array.prototype.forEach),sb=Q(Array.prototype.pop),fa=Q(Array.prototype.push),ga=Q(String.prototype.toLowerCase),tb=Q(String.prototype.match),T=Q(String.prototype.replace),gc=Q(String.prototype.indexOf),hc=Q(String.prototype.trim),U=Q(RegExp.prototype.test),ub=ic(TypeError);function Q(a){return function(b){for(var d=arguments.length,e=Array(d>1?d-1:0),h=1;h<d;h++)e[h-1]=arguments[h];return wa(a,b,e)}}function ic(a){return function(){for(var b=arguments.length,d=Array(b),e=0;e<b;e++)d[e]=arguments[e];return Da(a,d)}}function p(a,b){qb&&qb(a,null);for(var d=b.length;d--;){var e=b[d];if(typeof e==="string"){var h=ga(e);h!==e&&(dc(b)||(b[d]=h),e=h)}a[e]=!0}return a}function Z(a){var b=ec(null),d=void 0;for(d in a)wa(cc,a,[d])&&(b[d]=a[d]);return b}var vb=E(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),wb=E(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","audio","canvas","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","video","view","vkern"]),xb=E(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),yb=E(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),zb=E(["#text"]),Ab=E(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns"]),Ea=E(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Bb=E(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),xa=E(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),jc=P(/\{\{[\s\S]*|[\s\S]*\}\}/gm),kc=P(/<%[\s\S]*|[\s\S]*%>/gm),lc=P(/^data-[\-\w.\u00B7-\uFFFF]/),mc=P(/^aria-[\-\w]+$/),nc=P(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),oc=P(/^(?:\w+script|data):/i),pc=P(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),ha=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol==="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};function K(a){if(Array.isArray(a)){for(var b=0,d=Array(a.length);b<a.length;b++)d[b]=a[b];return d}else return Array.from(a)}var qc=function a(){return typeof window==="undefined"?null:window},rc=function a(b,d){if((typeof b==="undefined"?"undefined":ha(b))!=="object"||typeof b.createPolicy!=="function")return null;var e=null,h="data-tt-policy-suffix";d.currentScript&&d.currentScript.hasAttribute(h)&&(e=d.currentScript.getAttribute(h));var m="dompurify"+(e?"#"+e:"");try{return b.createPolicy(m,{createHTML:function k(q){return q}})}catch(k){return console.warn("TrustedTypes policy "+m+" could not be created."),null}};function Cb(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:qc(),b=function l(c){return Cb(c)};b.version="2.2.2",b.removed=[];if(!a||!a.document||a.document.nodeType!==9)return b.isSupported=!1,b;var d=a.document,e=a.document,h=a.DocumentFragment,m=a.HTMLTemplateElement,k=a.Node,q=a.NodeFilter,t=a.NamedNodeMap,ma=t===void 0?a.NamedNodeMap||a.MozNamedAttrMap:t,o=a.Text,A=a.Comment,V=a.DOMParser,I=a.trustedTypes;if(typeof m==="function"){var w=e.createElement("template");w.content&&w.content.ownerDocument&&(e=w.content.ownerDocument)}var u=rc(I,d),G=u&&Ca?u.createHTML(""):"",B=e,y=B.implementation,Ta=B.createNodeIterator,Ua=B.getElementsByTagName,Va=B.createDocumentFragment,Wa=d.importNode,g={};try{g=Z(e).documentMode?e.documentMode:{}}catch(l){}var n={};b.isSupported=y&&typeof y.createHTMLDocument!=="undefined"&&g!==9;var v=jc,N=kc,na=lc,yc=mc,zc=oc,Lb=pc,Xa=nc,x=null,Mb=p({},[].concat(K(vb),K(wb),K(xb),K(yb),K(zb))),z=null,Nb=p({},[].concat(K(Ab),K(Ea),K(Bb),K(xa))),Ya=null,Ob=null,Pb=!0,Za=!0,Qb=!1,ca=!1,oa=!1,_a=!1,$a=!1,pa=!1,ab=!1,Rb=!0,Ca=!1,Sb=!0,bb=!0,qa=!1,da={},Ac=p({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","plaintext","script","style","svg","template","thead","title","video","xmp"]),Tb=null,Ub=p({},["audio","video","img","source","image","track"]),cb=null,Vb=p({},["alt","class","for","id","label","name","pattern","placeholder","summary","title","value","style","xmlns"]),ea=null,Bc=e.createElement("form"),db=function l(c){if(ea&&ea===c)return;(!c||(typeof c==="undefined"?"undefined":ha(c))!=="object")&&(c={}),c=Z(c),x="ALLOWED_TAGS"in c?p({},c.ALLOWED_TAGS):Mb,z="ALLOWED_ATTR"in c?p({},c.ALLOWED_ATTR):Nb,cb="ADD_URI_SAFE_ATTR"in c?p(Z(Vb),c.ADD_URI_SAFE_ATTR):Vb,Tb="ADD_DATA_URI_TAGS"in c?p(Z(Ub),c.ADD_DATA_URI_TAGS):Ub,Ya="FORBID_TAGS"in c?p({},c.FORBID_TAGS):{},Ob="FORBID_ATTR"in c?p({},c.FORBID_ATTR):{},da="USE_PROFILES"in c?c.USE_PROFILES:!1,Pb=c.ALLOW_ARIA_ATTR!==!1,Za=c.ALLOW_DATA_ATTR!==!1,Qb=c.ALLOW_UNKNOWN_PROTOCOLS||!1,ca=c.SAFE_FOR_TEMPLATES||!1,oa=c.WHOLE_DOCUMENT||!1,pa=c.RETURN_DOM||!1,ab=c.RETURN_DOM_FRAGMENT||!1,Rb=c.RETURN_DOM_IMPORT!==!1,Ca=c.RETURN_TRUSTED_TYPE||!1,$a=c.FORCE_BODY||!1,Sb=c.SANITIZE_DOM!==!1,bb=c.KEEP_CONTENT!==!1,qa=c.IN_PLACE||!1,Xa=c.ALLOWED_URI_REGEXP||Xa,ca&&(Za=!1),ab&&(pa=!0),da&&(x=p({},[].concat(K(zb))),z=[],da.html===!0&&(p(x,vb),p(z,Ab)),da.svg===!0&&(p(x,wb),p(z,Ea),p(z,xa)),da.svgFilters===!0&&(p(x,xb),p(z,Ea),p(z,xa)),da.mathMl===!0&&(p(x,yb),p(z,Bb),p(z,xa))),c.ADD_TAGS&&(x===Mb&&(x=Z(x)),p(x,c.ADD_TAGS)),c.ADD_ATTR&&(z===Nb&&(z=Z(z)),p(z,c.ADD_ATTR)),c.ADD_URI_SAFE_ATTR&&p(cb,c.ADD_URI_SAFE_ATTR),bb&&(x["#text"]=!0),oa&&p(x,["html","head","body"]),x.table&&(p(x,["tbody"]),delete Ya.tbody),E&&E(c),ea=c},X=function l(c){fa(b.removed,{element:c});try{c.parentNode.removeChild(c)}catch(f){c.outerHTML=G}},Wb=function l(c,f){try{fa(b.removed,{attribute:f.getAttributeNode(c),from:f})}catch(j){fa(b.removed,{attribute:null,from:f})}f.removeAttribute(c)},Xb=function l(c){var f=void 0,j=void 0;if($a)c="<remove></remove>"+c;else{var s=tb(c,/^[\r\n\t ]+/);j=s&&s[0]}var J=u?u.createHTML(c):c;try{f=new V().parseFromString(J,"text/html")}catch(O){}if(!f||!f.documentElement){f=y.createHTMLDocument("");var H=f,C=H.body;C.parentNode.removeChild(C.parentNode.firstElementChild),C.outerHTML=J}return c&&j&&f.body.insertBefore(e.createTextNode(j),f.body.childNodes[0]||null),Ua.call(f,oa?"html":"body")[0]},Yb=function l(c){return Ta.call(c.ownerDocument||c,c,q.SHOW_ELEMENT|q.SHOW_COMMENT|q.SHOW_TEXT,function(){return q.FILTER_ACCEPT},!1)},Cc=function l(c){return c instanceof o||c instanceof A?!1:typeof c.nodeName!=="string"||typeof c.textContent!=="string"||typeof c.removeChild!=="function"||!(c.attributes instanceof ma)||typeof c.removeAttribute!=="function"||typeof c.setAttribute!=="function"||typeof c.namespaceURI!=="string"?!0:!1},ra=function l(c){return(typeof k==="undefined"?"undefined":ha(k))==="object"?c instanceof k:c&&(typeof c==="undefined"?"undefined":ha(c))==="object"&&typeof c.nodeType==="number"&&typeof c.nodeName==="string"},R=function l(c,f,j){if(!n[c])return;fc(n[c],function(s){s.call(b,f,j,ea)})},Zb=function l(c){var f=void 0;R("beforeSanitizeElements",c,null);if(Cc(c))return X(c),!0;if(tb(c.nodeName,/[\u0080-\uFFFF]/))return X(c),!0;var j=ga(c.nodeName);R("uponSanitizeElement",c,{tagName:j,allowedTags:x});if((j==="svg"||j==="math")&&c.querySelectorAll("p, br, form, table").length!==0)return X(c),!0;if(!ra(c.firstElementChild)&&(!ra(c.content)||!ra(c.content.firstElementChild))&&U(/<[/\w]/g,c.innerHTML)&&U(/<[/\w]/g,c.textContent))return X(c),!0;if(!x[j]||Ya[j]){if(bb&&!Ac[j]&&typeof c.insertAdjacentHTML==="function")try{var s=c.innerHTML;c.insertAdjacentHTML("AfterEnd",u?u.createHTML(s):s)}catch(J){}return X(c),!0}return(j==="noscript"||j==="noembed")&&U(/<\/no(script|embed)/i,c.innerHTML)?(X(c),!0):(ca&&c.nodeType===3&&(f=c.textContent,f=T(f,v," "),f=T(f,N," "),c.textContent!==f&&(fa(b.removed,{element:c.cloneNode()}),c.textContent=f)),R("afterSanitizeElements",c,null),!1)},_b=function l(c,f,j){if(Sb&&(f==="id"||f==="name")&&(j in e||j in Bc))return!1;if(!(Za&&U(na,f))){if(!(Pb&&U(yc,f))){if(!z[f]||Ob[f])return!1;if(!cb[f]){if(!U(Xa,T(j,Lb,""))){if(!((f==="src"||f==="xlink:href"||f==="href")&&c!=="script"&&gc(j,"data:")===0&&Tb[c])){if(!(Qb&&!U(zc,T(j,Lb,"")))){if(j)return!1}}}}}}return!0},$b=function l(c){var f=void 0,j=void 0,s=void 0,J=void 0;R("beforeSanitizeAttributes",c,null);var H=c.attributes;if(!H)return;var C={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:z};for(J=H.length;J--;){f=H[J];var O=f,sa=O.name,ac=O.namespaceURI;j=hc(f.value),s=ga(sa),C.attrName=s,C.attrValue=j,C.keepAttr=!0,C.forceKeepAttr=void 0,R("uponSanitizeAttribute",c,C),j=C.attrValue;if(C.forceKeepAttr)continue;Wb(sa,c);if(!C.keepAttr)continue;if(U(/\/>/i,j)){Wb(sa,c);continue}ca&&(j=T(j,v," "),j=T(j,N," "));var Ec=c.nodeName.toLowerCase();if(!_b(Ec,s,j))continue;try{ac?c.setAttributeNS(ac,sa,j):c.setAttribute(sa,j),sb(b.removed)}catch(ye){}}R("afterSanitizeAttributes",c,null)},Dc=function l(c){var f=void 0,j=Yb(c);for(R("beforeSanitizeShadowDOM",c,null);f=j.nextNode();){R("uponSanitizeShadowNode",f,null);if(Zb(f))continue;f.content instanceof h&&l(f.content),$b(f)}R("afterSanitizeShadowDOM",c,null)};return b.sanitize=function(l,c){var f=void 0,j=void 0,s=void 0,J=void 0,H=void 0;l||(l="<!-->");if(typeof l!=="string"&&!ra(l)){if(typeof l.toString!=="function")throw ub("toString is not a function");{l=l.toString();if(typeof l!=="string")throw ub("dirty is not a string, aborting")}}if(!b.isSupported){if(ha(a.toStaticHTML)==="object"||typeof a.toStaticHTML==="function"){if(typeof l==="string")return a.toStaticHTML(l);if(ra(l))return a.toStaticHTML(l.outerHTML)}return l}_a||db(c),b.removed=[],typeof l==="string"&&(qa=!1);if(!qa)if(l instanceof k)f=Xb("<!---->"),j=f.ownerDocument.importNode(l,!0),j.nodeType===1&&j.nodeName==="BODY"?f=j:j.nodeName==="HTML"?f=j:f.appendChild(j);else{if(!pa&&!ca&&!oa&&l.indexOf("<")===-1)return u&&Ca?u.createHTML(l):l;f=Xb(l);if(!f)return pa?null:G}f&&$a&&X(f.firstChild);for(var C=Yb(qa?l:f);s=C.nextNode();){if(s.nodeType===3&&s===J)continue;if(Zb(s))continue;s.content instanceof h&&Dc(s.content),$b(s),J=s}J=null;if(qa)return l;if(pa){if(ab)for(H=Va.call(f.ownerDocument);f.firstChild;)H.appendChild(f.firstChild);else H=f;return Rb&&(H=Wa.call(d,H,!0)),H}var O=oa?f.outerHTML:f.innerHTML;return ca&&(O=T(O,v," "),O=T(O,N," ")),u&&Ca?u.createHTML(O):O},b.setConfig=function(l){db(l),_a=!0},b.clearConfig=function(){ea=null,_a=!1},b.isValidAttribute=function(l,c,f){ea||db({});var j=ga(l),s=ga(c);return _b(j,s,f)},b.addHook=function(l,c){if(typeof c!=="function")return;n[l]=n[l]||[],fa(n[l],c)},b.removeHook=function(l){n[l]&&sb(n[l])},b.removeHooks=function(l){n[l]&&(n[l]=[])},b.removeAllHooks=function(){n={}},b}var sc=Cb(),Db=sc;var Eb=a=>{let b={"!":"33","#":"35","&":"38;","(":"40",")":"41","*":"42","+":"43","-":"45",".":"46","<":"60;",">":"62;","[":"91","\\":"92","]":"93",_:"95","`":"96","{":"123","}":"125","~":"126"},d=/(^|\s)(> )+(.|\n)+?(?=$|\n(?!>))/g,e="[0-9]+\\. ",h="[-+*] ",m=g=>"&#"+(b[g]||g),k=g=>g.replace(/[&<>]/g,m),q=g=>g.trim().slice(1,-1),t=(g,n)=>`<${g}>${n}</${g}>`,ma=g=>{let n=new RegExp(`(^|\\n)${e}`).test(g),v=new RegExp(`(^|\\n)${n?e:h}`),N=g.split(v).filter(na=>na.trim().length);return t(n?"ol":"ul",N.map(na=>t("li",na)).join(""))},o=g=>{g=g.trim();let n=g.indexOf(" "),v=g.slice(n).replace(/#+$/,"").trim();return t(`h${n} id=${v.replace(/\W+/g,"-").toLowerCase()}`,v)},A=g=>{let n=g.trim().split(/\n/);return t(`h${n[1].indexOf("-")>-1?2:1}`,n[0])},V=g=>{let n=g.slice(1,-1).split("]("),v=n[1].split(/ ["`']/)[1];return`<a href="${n[1]}" ${v?`title="${v}"`:""}>${n[0]}</a>`},I=g=>{let n=g.split(/["`']/),v=n[0].trim().replace(/^<|>$/g,""),N=n[1];return` <a href="${v}" ${N?`title="${N}"`:""}>${v}</a>`},w=g=>{let n=g.slice(2,-1).split("]("),v=n[1].split(/ ["`']/)[1];return`<img src="${n[1]}" ${v?`title="${v}"`:""} alt="${n[0]}">`},u=g=>{let[n,...v]=g.trim().split(/\n+/),N=k(v.slice(0,-1).join("\r")).trim();return t("pre",`<code class="language-${n.slice(3)}">${N}</code>`)},G=g=>(g=t("blockquote",g.replace(/^ *?> /gm,"")),g.replace(d,G)),B=g=>` <a href="${g}">${g.trim()}</a>`,y=g=>t("p",g.trim()),Ta=g=>t("strong",g.slice(2,-2)),Ua=g=>t("em",q(g)),Va=g=>t("del",q(g)),Wa=g=>t("code",k(q(g)));return a.replace(/\r+/g,`
`).replace(/\\[-*_\\`#~+.!(){}[\]]/g,g=>m(g.slice(1))).replace(/(^|\n).+?\n[-=]+(?=$|\n)/g,A).replace(/(^|\n)#+? (.|\n)+?(?=$|\n)/g,o).replace(/(^|\n)([-*_] ?){3,}(?=$|\n)/g,"<hr>").replace(/(^|\n)([0-9]+\.|[-+*]) (.|\n)+?(?=$|[\s\n]{3,})/g,ma).replace(d,G).replace(/(^|\n)```(.|\n)+?```(?=$|\n)/g,u).replace(/  (\n|$)/g,"<br>").replace(/!\[.+?\]\(.+?\)/g,w).replace(/\[.+?\]\(.+?\)/g,V).replace(/<(https?:\/\/|www).+?>( (".+?")|('.+?'))?(?=$|\n| )/g,I).replace(/(^|\n| )(https?:\/\/|www)(.+?)+?(?=$|\n| )/g,B).replace(/\s[*_](?=\s)/g,g=>g.slice(0,1)+m(g.slice(1))).replace(/[*_]{2}.+?[*_]{2}/gm,Ta).replace(/[*_].+?[*_]/gm,Ua).replace(/~.+?~/gm,Va).replace(/`.+?`/gm,Wa).replace(/(^|\n\n+)(?!<[huol]).+?(?=$|\n\n+)/gi,y)};var S=()=>{r("showPreview",!0);let a=i.currentDataset.fields;function b(k){for(let[q,t]of a)if(q==k)return t}function d(k){return b(k.slice(1,-1),a)}let e=$(".preview"),h=i.currentContract.body.replace(/\{.+?\}/g,d),m=Eb(h);e.innerHTML=Db.sanitize(m)};var eb=a=>{r("currentContract",i.currentUser.contracts[a]),i.showPreview&&S()};const tc=new WeakMap(),W=a=>typeof a==="function"&&tc.has(a);const Ja=typeof window!=="undefined"&&window.customElements!=null&&window.customElements.polyfillWrapFlushCallback!==void 0,ia=(a,b,d=null)=>{for(;b!==d;){const e=b.nextSibling;a.removeChild(b),b=e}};const F={},Y={};const M=`{{lit-${String(Math.random()).slice(2)}}}`,Ra=`<!--${M}-->`,Ib=new RegExp(`${M}|${Ra}`),ba="$lit$";class Oa{constructor(a,b){this.parts=[],this.element=b;const d=[],e=[],h=document.createTreeWalker(b.content,133,null,!1);let m=0,k=-1,q=0;const{strings:t,values:{length:ma}}=a;for(;q<ma;){const o=h.nextNode();if(o===null){h.currentNode=e.pop();continue}k++;if(o.nodeType===1){if(o.hasAttributes()){const A=o.attributes,{length:V}=A;let I=0;for(let w=0;w<V;w++)Jb(A[w].name,ba)&&I++;for(;I-- >0;){const w=t[q],u=Ba.exec(w)[2],G=u.toLowerCase()+ba,B=o.getAttribute(G);o.removeAttribute(G);const y=B.split(Ib);this.parts.push({type:"attribute",index:k,name:u,strings:y}),q+=y.length-1}}o.tagName==="TEMPLATE"&&(e.push(o),h.currentNode=o.content)}else if(o.nodeType===3){const A=o.data;if(A.indexOf(M)>=0){const V=o.parentNode,I=A.split(Ib),w=I.length-1;for(let u=0;u<w;u++){let G,B=I[u];if(B==="")G=L();else{const y=Ba.exec(B);y!==null&&Jb(y[2],ba)&&(B=B.slice(0,y.index)+y[1]+y[2].slice(0,-ba.length)+y[3]),G=document.createTextNode(B)}V.insertBefore(G,o),this.parts.push({type:"node",index:++k})}I[w]===""?(V.insertBefore(L(),o),d.push(o)):o.data=I[w],q+=w}}else if(o.nodeType===8)if(o.data===M){const A=o.parentNode;(o.previousSibling===null||k===m)&&(k++,A.insertBefore(L(),o)),m=k,this.parts.push({type:"node",index:k}),o.nextSibling===null?o.data="":(d.push(o),k--),q++}else{let A=-1;for(;(A=o.data.indexOf(M,A+1))!==-1;)this.parts.push({type:"node",index:-1}),q++}}for(const o of d)o.parentNode.removeChild(o)}}const Jb=(a,b)=>{const d=a.length-b.length;return d>=0&&a.slice(d)===b},Qa=a=>a.index!==-1,L=()=>document.createComment(""),Ba=/([ \x09\x0a\x0c\x0d])([^\0-\x1F\x7F-\x9F "'>=/]+)([ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*))$/;class za{constructor(a,b,d){this.__parts=[],this.template=a,this.processor=b,this.options=d}update(a){let b=0;for(const d of this.__parts)d!==void 0&&d.setValue(a[b]),b++;for(const d of this.__parts)d!==void 0&&d.commit()}_clone(){const a=Ja?this.template.element.content.cloneNode(!0):document.importNode(this.template.element.content,!0),b=[],d=this.template.parts,e=document.createTreeWalker(a,133,null,!1);let h=0,m=0,k,q=e.nextNode();for(;h<d.length;){k=d[h];if(!Qa(k)){this.__parts.push(void 0),h++;continue}for(;m<k.index;)m++,q.nodeName==="TEMPLATE"&&(b.push(q),e.currentNode=q.content),(q=e.nextNode())===null&&(e.currentNode=b.pop(),q=e.nextNode());if(k.type==="node"){const t=this.processor.handleTextExpression(this.options);t.insertAfterNode(q.previousSibling),this.__parts.push(t)}else this.__parts.push(...this.processor.handleAttributeExpressions(q,k.name,k.strings,this.options));h++}return Ja&&(document.adoptNode(a),customElements.upgrade(a)),a}}const wc=` ${M} `;class ja{constructor(a,b,d,e){this.strings=a,this.values=b,this.type=d,this.processor=e}getHTML(){const a=this.strings.length-1;let b="",d=!1;for(let e=0;e<a;e++){const h=this.strings[e],m=h.lastIndexOf("<!--");d=(m>-1||d)&&h.indexOf("-->",m+1)===-1;const k=Ba.exec(h);k===null?b+=h+(d?wc:Ra):b+=h.substr(0,k.index)+k[1]+k[2]+ba+k[3]+M}return b+=this.strings[a],b}getTemplateElement(){const a=document.createElement("template");return a.innerHTML=this.getHTML(),a}}const Aa=a=>a===null||!(typeof a==="object"||typeof a==="function"),Ka=a=>Array.isArray(a)||!!(a&&a[Symbol.iterator]);class ya{constructor(a,b,d){this.dirty=!0,this.element=a,this.name=b,this.strings=d,this.parts=[];for(let e=0;e<d.length-1;e++)this.parts[e]=this._createPart()}_createPart(){return new La(this)}_getValue(){const a=this.strings,b=a.length-1;let d="";for(let e=0;e<b;e++){d+=a[e];const h=this.parts[e];if(h!==void 0){const m=h.value;if(Aa(m)||!Ka(m))d+=typeof m==="string"?m:String(m);else for(const k of m)d+=typeof k==="string"?k:String(k)}}return d+=a[b],d}commit(){this.dirty&&(this.dirty=!1,this.element.setAttribute(this.name,this._getValue()))}}class La{constructor(a){this.value=void 0,this.committer=a}setValue(a){a!==F&&(!Aa(a)||a!==this.value)&&(this.value=a,W(a)||(this.committer.dirty=!0))}commit(){for(;W(this.value);){const a=this.value;this.value=F,a(this)}if(this.value===F)return;this.committer.commit()}}class aa{constructor(a){this.value=void 0,this.__pendingValue=void 0,this.options=a}appendInto(a){this.startNode=a.appendChild(L()),this.endNode=a.appendChild(L())}insertAfterNode(a){this.startNode=a,this.endNode=a.nextSibling}appendIntoPart(a){a.__insert(this.startNode=L()),a.__insert(this.endNode=L())}insertAfterPart(a){a.__insert(this.startNode=L()),this.endNode=a.endNode,a.endNode=this.startNode}setValue(a){this.__pendingValue=a}commit(){if(this.startNode.parentNode===null)return;for(;W(this.__pendingValue);){const b=this.__pendingValue;this.__pendingValue=F,b(this)}const a=this.__pendingValue;if(a===F)return;Aa(a)?a!==this.value&&this.__commitText(a):a instanceof ja?this.__commitTemplateResult(a):a instanceof Node?this.__commitNode(a):Ka(a)?this.__commitIterable(a):a===Y?(this.value=Y,this.clear()):this.__commitText(a)}__insert(a){this.endNode.parentNode.insertBefore(a,this.endNode)}__commitNode(a){if(this.value===a)return;this.clear(),this.__insert(a),this.value=a}__commitText(a){const b=this.startNode.nextSibling;a=a==null?"":a;const d=typeof a==="string"?a:String(a);b===this.endNode.previousSibling&&b.nodeType===3?b.data=d:this.__commitNode(document.createTextNode(d)),this.value=a}__commitTemplateResult(a){const b=this.options.templateFactory(a);if(this.value instanceof za&&this.value.template===b)this.value.update(a.values);else{const d=new za(b,a.processor,this.options),e=d._clone();d.update(a.values),this.__commitNode(e),this.value=d}}__commitIterable(a){Array.isArray(this.value)||(this.value=[],this.clear());const b=this.value;let d=0,e;for(const h of a)e=b[d],e===void 0&&(e=new aa(this.options),b.push(e),d===0?e.appendIntoPart(this):e.insertAfterPart(b[d-1])),e.setValue(h),e.commit(),d++;d<b.length&&(b.length=d,this.clear(e&&e.endNode))}clear(a=this.startNode){ia(this.startNode.parentNode,a.nextSibling,this.endNode)}}class Fa{constructor(a,b,d){this.value=void 0,this.__pendingValue=void 0;if(d.length!==2||d[0]!==""||d[1]!=="")throw new Error("Boolean attributes can only contain a single expression");this.element=a,this.name=b,this.strings=d}setValue(a){this.__pendingValue=a}commit(){for(;W(this.__pendingValue);){const b=this.__pendingValue;this.__pendingValue=F,b(this)}if(this.__pendingValue===F)return;const a=!!this.__pendingValue;this.value!==a&&(a?this.element.setAttribute(this.name,""):this.element.removeAttribute(this.name),this.value=a),this.__pendingValue=F}}class Ha extends ya{constructor(a,b,d){super(a,b,d);this.single=d.length===2&&d[0]===""&&d[1]===""}_createPart(){return new Gb(this)}_getValue(){return this.single?this.parts[0].value:super._getValue()}commit(){this.dirty&&(this.dirty=!1,this.element[this.name]=this._getValue())}}class Gb extends La{}let Hb=!1;(()=>{try{const a={get capture(){return Hb=!0,!1}};window.addEventListener("test",a,a),window.removeEventListener("test",a,a)}catch(a){}})();class Ga{constructor(a,b,d){this.value=void 0,this.__pendingValue=void 0,this.element=a,this.eventName=b,this.eventContext=d,this.__boundHandleEvent=e=>this.handleEvent(e)}setValue(a){this.__pendingValue=a}commit(){for(;W(this.__pendingValue);){const h=this.__pendingValue;this.__pendingValue=F,h(this)}if(this.__pendingValue===F)return;const a=this.__pendingValue,b=this.value,d=a==null||b!=null&&(a.capture!==b.capture||a.once!==b.once||a.passive!==b.passive),e=a!=null&&(b==null||d);d&&this.element.removeEventListener(this.eventName,this.__boundHandleEvent,this.__options),e&&(this.__options=vc(a),this.element.addEventListener(this.eventName,this.__boundHandleEvent,this.__options)),this.value=a,this.__pendingValue=F}handleEvent(a){typeof this.value==="function"?this.value.call(this.eventContext||this.element,a):this.value.handleEvent(a)}}const vc=a=>a&&(Hb?{capture:a.capture,passive:a.passive,once:a.once}:a.capture);class Fb{handleAttributeExpressions(a,b,d,e){const h=b[0];if(h==="."){const k=new Ha(a,b.slice(1),d);return k.parts}if(h==="@")return[new Ga(a,b.slice(1),e.eventContext)];if(h==="?")return[new Fa(a,b.slice(1),d)];const m=new ya(a,b,d);return m.parts}handleTextExpression(a){return new aa(a)}}const Ia=new Fb();function Ma(a){let b=Pa.get(a.type);b===void 0&&(b={stringsArray:new WeakMap(),keyString:new Map()},Pa.set(a.type,b));let d=b.stringsArray.get(a.strings);if(d!==void 0)return d;const e=a.strings.join(M);return d=b.keyString.get(e),d===void 0&&(d=new Oa(a,a.getTemplateElement()),b.keyString.set(e,d)),b.stringsArray.set(a.strings,d),d}const Pa=new Map();const Na=new WeakMap(),ka=(a,b,d)=>{let e=Na.get(b);e===void 0&&(ia(b,b.firstChild),Na.set(b,e=new aa(Object.assign({templateFactory:Ma},d))),e.appendInto(b)),e.setValue(a),e.commit()};typeof window!=="undefined"&&(window.litHtmlVersions||(window.litHtmlVersions=[])).push("1.2.1");const D=(a,...b)=>new ja(a,b,"html",Ia);var fb=()=>D`
<h2>Documents</h2>
<ul>
  ${i.currentUser.contracts.map((a,b)=>D`
  <li ?data-active=${a.id==i.currentContract.id} data-contract-id=${a.id}>
    <button class=link @click=${()=>eb(b)}>
      <h3>${a.id}</h3>
    </button>
  </li>`)}
</ul>
`;var va=a=>{r("currentDataset",i.currentUser.datasets[a]),i.showPreview&&S()};var gb=()=>{let a={id:"New Dataset",fields:[]},b=i.currentUser.datasets;b.push(a),r("currentUser",i.currentUser),va(b.length-1)};var hb=()=>{i.currentDataset.fields.push(["",""]),r("currentDataset",i.currentDataset)};var ib=a=>{let b=i.currentUser.datasets;b.splice(a,1),i.currentUser.datasets=b,r("currentUser",i.currentUser),r("currentDataset",i.currentUser.datasets[0]),i.showPreview&&S()};var jb=a=>{i.currentDataset.id=a,r("currentDataset",i.currentDataset)};var mb=(a,b)=>{let d=_(b);d.fields.splice(a,1),r("currentDataset",d)};var nb=(a,b,d)=>{let e=_(d),[h,m]=e.fields[a];e.fields[a]=[b,m],r("currentDataset",e)};var ob=(a,b,d)=>{let e=_(d),[h,m]=e.fields[a];e.fields[a]=[h,b],r("currentDataset",e)};var kb=([a,b],d,e)=>{let h=`${d}_${e}_key`,m=`${d}_${e}_value`;return D`
  <li>
    <key>
      <label for=${h}>Name</label>
      <input @input=${k=>nb(d,k.target.value,e)} .value=${a} type=text id=${h} />
    </key>
    <value>
      <label for=${m}>Value</label>
      <input @input=${k=>ob(d,k.target.value,e)} .value=${b} type=text
      id=${m} />
    </value>
    <button class=icon title="Delete Field" @click=${mb.bind(void 0,d,e)}>üóëÔ∏è</button>
  </li>
`};var lb=()=>D`
<h2>Data</h2>
${i.currentDataset?D`
    <div data-active=true>
      <h3>
        <input type=text .value=${i.currentDataset.id} @input=${a=>jb(a.target.value)} />
      </h3>
      <ul class=fields>
        ${i.currentDataset.fields.map((a,b)=>kb(a,b,i.currentDataset.id))}
        <button @click=${hb}>Add Field</button>
      </ul>
    </div>
    `:Y}
<hr />
<ul class=sets>
  ${i.currentUser.datasets.map((a,b)=>D`
  <li>
    <button class=link @click=${()=>va(b)}>
      <h4>${a.id}</h4>
    </button>
    <button class=icon @click=${()=>ib(b)}>üóëÔ∏è</button>
  </li>
  `)}
  <button @click=${gb}>Add Data</button>
</ul>
`;var pb=()=>D`

  <toolbar>
    <button ?data-active=${!i.showPreview} title="Show editor" class="tab" @click=${()=>r("showPreview",!1)}>
      ‚úçÔ∏è
    </button>
    <button ?data-active=${i.showPreview} title="Show preview" class="tab" @click=${S}>
      üëÄ
    </button>
  </toolbar>

  ${i.showPreview?D`<div class=preview></div>`:D`<textarea class=editor @input=${a=>i.currentContract.body=a.target.value}>${i.currentContract.body}</textarea>`}
`;let Kb=setTimeout(()=>null,1e3),la=Sa("contractly_user")||{savedLocally:!1,showPreview:!1,currentContract:{},currentDataset:{},currentUser:{contracts:[],datasets:[]}};function ua(){clearTimeout(Kb),Kb=setTimeout(()=>{la.savedLocally=!0,Sa("contractly_user",la)},1e3)}function ta(){ka(fb(),$("#left-pane")),ka(pb(),$("#center-pane")),ka(lb(),$("#right-pane"))}function r(a,b){la[a]=b,ta(),ua()}let _=a=>la.currentUser.datasets.find(b=>b.id==a);var i=la;i.savedLocally||(document.documentElement.classList.add("loading"),fetch("/db.json").then(a=>a.json()).then(a=>a.find(b=>b.name=="Nathan")).then(a=>{i.currentUser=a,i.currentContract=i.currentUser.contracts[0],i.currentDataset=i.currentUser.datasets[0]}).then(ta).then(ua).then(()=>document.documentElement.classList.remove("loading")));ta();ua();})();
/*! @license DOMPurify | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.2.2/LICENSE */
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
/**
 * @license
 * Copyright (c) 2018 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */

(()=>{let Oc=Object.defineProperty,xe=Object.prototype.hasOwnProperty,ab=a=>{let c;return()=>(c||(c={exports:{}},a(c.exports,c)),c.exports)},Pc=a=>{if(a&&a.__esModule)return a;let c={};Oc(c,"default",{value:a,enumerable:!0});for(let e in a)xe.call(a,e)&&e!=="default"&&Oc(c,e,{get:()=>a[e],enumerable:!0});return c};var Ee=ab(a=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});var h=function(){function z(t,r){var O=[],N=!0,H=!1,Y=void 0;try{for(var fa=t[Symbol.iterator](),_;!(N=(_=fa.next()).done);N=!0){O.push(_.value);if(r&&O.length===r)break}}catch(K){H=!0,Y=K}finally{try{!N&&fa.return&&fa.return()}finally{if(H)throw Y}}return O}return function(t,r){if(Array.isArray(t))return t;{if(Symbol.iterator in Object(t))return z(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();a.getPagination=n;function n(z){var t=z.headers.get("Link"),r={};if(t==null)return null;t=t.split(",");for(var O=z.headers.get("X-Total-Count"),N=0,H=t.length;N<H;N++){var Y=t[N].replace(/(^\s*|\s*$)/,""),fa=Y.split(";"),_=h(fa,2),K=_[0],o=_[1],B=K.match(/page=(\d+)/),p=B&&parseInt(B[1],10);o.match(/last/)?r.last=p:o.match(/next/)?r.next=p:o.match(/prev/)?r.prev=p:o.match(/first/)&&(r.first=p)}return r.last=Math.max(r.last||0,r.prev&&r.prev+1||0),r.current=r.next?r.next-1:r.last||1,r.total=O?parseInt(O,10):null,r}});var gd=ab(a=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.JSONHTTPError=a.TextHTTPError=a.HTTPError=a.getPagination=void 0;var h=Object.assign||function(K){for(var o=1;o<arguments.length;o++){var B=arguments[o];for(var p in B)Object.prototype.hasOwnProperty.call(B,p)&&(K[p]=B[p])}return K},n=function(){function K(o,B){for(var p=0;p<B.length;p++){var v=B[p];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(o,v.key,v)}}return function(o,B,p){return B&&K(o.prototype,B),p&&K(o,p),o}}(),z=Ee();Object.defineProperty(a,"getPagination",{enumerable:!0,get:function K(){return z.getPagination}});function t(K,o){if(!(K instanceof o))throw new TypeError("Cannot call a class as a function")}function r(K,o){if(!K)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o&&(typeof o==="object"||typeof o==="function")?o:K}function O(K,o){if(typeof o!=="function"&&o!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof o);K.prototype=Object.create(o&&o.prototype,{constructor:{value:K,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(K,o):K.__proto__=o)}function N(K){function o(){var B=Reflect.construct(K,Array.from(arguments));return Object.setPrototypeOf(B,Object.getPrototypeOf(this)),B}return o.prototype=Object.create(K.prototype,{constructor:{value:K,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(o,K):o.__proto__=K,o}var H=a.HTTPError=function(K){O(o,K);function o(B){t(this,o);var p=r(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,B.statusText));return p.name=p.constructor.name,typeof Error.captureStackTrace==="function"?Error.captureStackTrace(p,p.constructor):p.stack=new Error(B.statusText).stack,p.status=B.status,p}return o}(N(Error)),Y=a.TextHTTPError=function(K){O(o,K);function o(B,p){t(this,o);var v=r(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,B));return v.data=p,v}return o}(H),fa=a.JSONHTTPError=function(K){O(o,K);function o(B,p){t(this,o);var v=r(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,B));return v.json=p,v}return o}(H),_=function(){function K(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",B=arguments[1];t(this,K),this.apiURL=o,this.apiURL.match(/\/[^\/]?/)&&(this._sameOrigin=!0),this.defaultHeaders=B&&B.defaultHeaders||{}}return n(K,[{key:"headers",value:function o(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return h({},this.defaultHeaders,{"Content-Type":"application/json"},B)}},{key:"parseJsonResponse",value:function o(B){return B.json().then(function(p){if(!B.ok)return Promise.reject(new fa(B,p));var v=(0,z.getPagination)(B);return v?{pagination:v,items:p}:p})}},{key:"request",value:function o(B){var p=this,v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},$=this.headers(v.headers||{});return this._sameOrigin&&(v.credentials=v.credentials||"same-origin"),fetch(this.apiURL+B,h({},v,{headers:$})).then(function(S){var da=S.headers.get("Content-Type");return da&&da.match(/json/)?p.parseJsonResponse(S):S.ok?S.text().then(function(Fa){Fa}):S.text().then(function(Fa){return Promise.reject(new Y(S,Fa))})})}}]),K}();a.default=_});var ye=ab(a=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.default=void 0;function h(r,O){if(!(r instanceof O))throw new TypeError("Cannot call a class as a function")}function n(r,O){for(var N=0;N<O.length;N++){var H=O[N];H.enumerable=H.enumerable||!1,H.configurable=!0,"value"in H&&(H.writable=!0),Object.defineProperty(r,H.key,H)}}function z(r,O,N){return O&&n(r.prototype,O),N&&n(r,N),r}var t=function(){function r(O){h(this,r),this.user=O}return z(r,[{key:"listUsers",value:function O(N){return this.user._request("/admin/users",{method:"GET",audience:N})}},{key:"getUser",value:function O(N){return this.user._request("/admin/users/".concat(N.id))}},{key:"updateUser",value:function O(N){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.user._request("/admin/users/".concat(N.id),{method:"PUT",body:JSON.stringify(H)})}},{key:"createUser",value:function O(N,H){var Y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Y.email=N,Y.password=H,this.user._request("/admin/users",{method:"POST",body:JSON.stringify(Y)})}},{key:"deleteUser",value:function O(N){return this.user._request("/admin/users/".concat(N.id),{method:"DELETE"})}}]),r}();a.default=t});var ze=ab(a=>{"use strict";function h(L){return typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?h=function J(C){return typeof C}:h=function J(C){return C&&typeof Symbol==="function"&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C},h(L)}Object.defineProperty(a,"__esModule",{value:!0});a.default=void 0;var n=O(gd()),z=t(ye());function t(L){return L&&L.__esModule?L:{default:L}}function r(){if(typeof WeakMap!=="function")return null;var L=new WeakMap();return r=function J(){return L},L}function O(L){if(L&&L.__esModule)return L;if(L===null||h(L)!=="object"&&typeof L!=="function")return{default:L};var J=r();if(J&&J.has(L))return J.get(L);var C={},M=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var V in L)if(Object.prototype.hasOwnProperty.call(L,V)){var ta=M?Object.getOwnPropertyDescriptor(L,V):null;ta&&(ta.get||ta.set)?Object.defineProperty(C,V,ta):C[V]=L[V]}return C.default=L,J&&J.set(L,C),C}function N(L,J){var C=Object.keys(L);if(Object.getOwnPropertySymbols){var M=Object.getOwnPropertySymbols(L);J&&(M=M.filter(function(V){return Object.getOwnPropertyDescriptor(L,V).enumerable})),C.push.apply(C,M)}return C}function H(L){for(var J=1;J<arguments.length;J++){var C=arguments[J]!=null?arguments[J]:{};J%2?N(Object(C),!0).forEach(function(M){Y(L,M,C[M])}):Object.getOwnPropertyDescriptors?Object.defineProperties(L,Object.getOwnPropertyDescriptors(C)):N(Object(C)).forEach(function(M){Object.defineProperty(L,M,Object.getOwnPropertyDescriptor(C,M))})}return L}function Y(L,J,C){return J in L?Object.defineProperty(L,J,{value:C,enumerable:!0,configurable:!0,writable:!0}):L[J]=C,L}function fa(L,J){if(!(L instanceof J))throw new TypeError("Cannot call a class as a function")}function _(L,J){for(var C=0;C<J.length;C++){var M=J[C];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(L,M.key,M)}}function K(L,J,C){return J&&_(L.prototype,J),C&&_(L,C),L}var o=60*1000,B="gotrue.user",p={},v=null,$={api:1,token:1,audience:1,url:1},S={api:1},da=function L(){return typeof window!=="undefined"},Fa=function(){function L(J,C,M){fa(this,L),this.api=J,this.url=J.apiURL,this.audience=M,this._processTokenResponse(C),v=this}return K(L,[{key:"update",value:function J(C){var M=this;return this._request("/user",{method:"PUT",body:JSON.stringify(C)}).then(function(V){return M._saveUserData(V)._refreshSavedSession()})}},{key:"jwt",value:function J(C){var M=this.tokenDetails();if(M===null||M===void 0)return Promise.reject(new Error("Gotrue-js: failed getting jwt access token"));var V=M.expires_at,ta=M.refresh_token,Na=M.access_token;return C||V-o<Date.now()?this._refreshToken(ta):Promise.resolve(Na)}},{key:"logout",value:function J(){return this._request("/logout",{method:"POST"}).then(this.clearSession.bind(this)).catch(this.clearSession.bind(this))}},{key:"_refreshToken",value:function J(C){var M=this;return p[C]?p[C]:p[C]=this.api.request("/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"grant_type=refresh_token&refresh_token=".concat(C)}).then(function(V){return delete p[C],M._processTokenResponse(V),M._refreshSavedSession(),M.token.access_token}).catch(function(V){return delete p[C],M.clearSession(),Promise.reject(V)})}},{key:"_request",value:function J(C){var M=this,V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};V.headers=V.headers||{};var ta=V.audience||this.audience;return ta&&(V.headers["X-JWT-AUD"]=ta),this.jwt().then(function(Na){return M.api.request(C,H({headers:Object.assign(V.headers,{Authorization:"Bearer ".concat(Na)})},V)).catch(function(qa){return qa instanceof n.JSONHTTPError&&qa.json&&(qa.json.msg?qa.message=qa.json.msg:qa.json.error&&(qa.message="".concat(qa.json.error,": ").concat(qa.json.error_description))),Promise.reject(qa)})})}},{key:"getUserData",value:function J(){return this._request("/user").then(this._saveUserData.bind(this)).then(this._refreshSavedSession.bind(this))}},{key:"_saveUserData",value:function J(C,M){for(var V in C){if(V in L.prototype||V in $)continue;this[V]=C[V]}return M&&(this._fromStorage=!0),this}},{key:"_processTokenResponse",value:function J(C){this.token=C;var M;try{M=JSON.parse(Ca(C.access_token.split(".")[1])),this.token.expires_at=M.exp*1000}catch(V){console.error(new Error("Gotrue-js: Failed to parse tokenResponse claims: ".concat(JSON.stringify(C))))}}},{key:"_refreshSavedSession",value:function J(){return da()&&localStorage.getItem(B)&&this._saveSession(),this}},{key:"_saveSession",value:function J(){return da()&&localStorage.setItem(B,JSON.stringify(this._details)),this}},{key:"tokenDetails",value:function J(){return this.token}},{key:"clearSession",value:function J(){L.removeSavedSession(),this.token=null,v=null}},{key:"admin",get:function J(){return new z.default(this)}},{key:"_details",get:function J(){var C={};for(var M in this){if(M in L.prototype||M in S)continue;C[M]=this[M]}return C}}],[{key:"removeSavedSession",value:function J(){da()&&localStorage.removeItem(B)}},{key:"recoverSession",value:function J(C){if(v)return v;var M=da()&&localStorage.getItem(B);if(M)try{var V=JSON.parse(M),ta=V.url,Na=V.token,qa=V.audience;if(!ta||!Na)return null;var wb=C||new n.default(ta,{});return new L(wb,Na,qa)._saveUserData(V,!0)}catch(db){return console.error(new Error("Gotrue-js: Error recovering session: ".concat(db))),null}return null}}]),L}();a.default=Fa;function Ca(L){var J=L.replace(/-/g,"+").replace(/_/g,"/");switch(J.length%4){case 0:break;case 2:J+="==";break;case 3:J+="=";break;default:throw"Illegal base64url string!"}var C=window.atob(J);try{return decodeURIComponent(escape(C))}catch(M){return C}}});var Te=ab(a=>{"use strict";function h(o){return typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?h=function B(p){return typeof p}:h=function B(p){return p&&typeof Symbol==="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p},h(o)}Object.defineProperty(a,"__esModule",{value:!0});a.default=void 0;var n=O(gd()),z=t(ze());function t(o){return o&&o.__esModule?o:{default:o}}function r(){if(typeof WeakMap!=="function")return null;var o=new WeakMap();return r=function B(){return o},o}function O(o){if(o&&o.__esModule)return o;if(o===null||h(o)!=="object"&&typeof o!=="function")return{default:o};var B=r();if(B&&B.has(o))return B.get(o);var p={},v=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var $ in o)if(Object.prototype.hasOwnProperty.call(o,$)){var S=v?Object.getOwnPropertyDescriptor(o,$):null;S&&(S.get||S.set)?Object.defineProperty(p,$,S):p[$]=o[$]}return p.default=o,B&&B.set(o,p),p}function N(o,B){if(!(o instanceof B))throw new TypeError("Cannot call a class as a function")}function H(o,B){for(var p=0;p<B.length;p++){var v=B[p];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(o,v.key,v)}}function Y(o,B,p){return B&&H(o.prototype,B),p&&H(o,p),o}var fa=/^http:\/\//,_="/.netlify/identity",K=function(){function o(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},p=B.APIUrl,v=p===void 0?_:p,$=B.audience,S=$===void 0?"":$,da=B.setCookie,Fa=da===void 0?!1:da;N(this,o),v.match(fa)&&console.warn(`Warning:

DO NOT USE HTTP IN PRODUCTION FOR GOTRUE EVER!
GoTrue REQUIRES HTTPS to work securely.`),S&&(this.audience=S),this.setCookie=Fa,this.api=new n.default(v)}return Y(o,[{key:"_request",value:function B(p){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};v.headers=v.headers||{};var $=v.audience||this.audience;return $&&(v.headers["X-JWT-AUD"]=$),this.api.request(p,v).catch(function(S){return S instanceof n.JSONHTTPError&&S.json&&(S.json.msg?S.message=S.json.msg:S.json.error&&(S.message="".concat(S.json.error,": ").concat(S.json.error_description))),Promise.reject(S)})}},{key:"settings",value:function B(){return this._request("/settings")}},{key:"signup",value:function B(p,v,$){return this._request("/signup",{method:"POST",body:JSON.stringify({email:p,password:v,data:$})})}},{key:"login",value:function B(p,v,$){var S=this;return this._setRememberHeaders($),this._request("/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"grant_type=password&username=".concat(encodeURIComponent(p),"&password=").concat(encodeURIComponent(v))}).then(function(da){return z.default.removeSavedSession(),S.createUser(da,$)})}},{key:"loginExternalUrl",value:function B(p){return"".concat(this.api.apiURL,"/authorize?provider=").concat(p)}},{key:"confirm",value:function B(p,v){return this._setRememberHeaders(v),this.verify("signup",p,v)}},{key:"requestPasswordRecovery",value:function B(p){return this._request("/recover",{method:"POST",body:JSON.stringify({email:p})})}},{key:"recover",value:function B(p,v){return this._setRememberHeaders(v),this.verify("recovery",p,v)}},{key:"acceptInvite",value:function B(p,v,$){var S=this;return this._setRememberHeaders($),this._request("/verify",{method:"POST",body:JSON.stringify({token:p,password:v,type:"signup"})}).then(function(da){return S.createUser(da,$)})}},{key:"acceptInviteExternalUrl",value:function B(p,v){return"".concat(this.api.apiURL,"/authorize?provider=").concat(p,"&invite_token=").concat(v)}},{key:"createUser",value:function B(p){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;this._setRememberHeaders(v);var $=new z.default(this.api,p,this.audience);return $.getUserData().then(function(S){return v&&S._saveSession(),S})}},{key:"currentUser",value:function B(){var p=z.default.recoverSession(this.api);return p&&this._setRememberHeaders(p._fromStorage),p}},{key:"verify",value:function B(p,v,$){var S=this;return this._setRememberHeaders($),this._request("/verify",{method:"POST",body:JSON.stringify({token:v,type:p})}).then(function(da){return S.createUser(da,$)})}},{key:"_setRememberHeaders",value:function B(p){this.setCookie&&(this.api.defaultHeaders=this.api.defaultHeaders||{},this.api.defaultHeaders["X-Use-Cookie"]=p?"1":"session")}}]),o}();a.default=K;typeof window!=="undefined"&&(window.GoTrue=K)});var Se=ab((a,e)=>{(function(h,n){typeof a==="object"&&typeof e!=="undefined"?e.exports=n():typeof define==="function"&&define.amd?define(n):(h=h||self,h.DOMPurify=n())})(a,function(){"use strict";function h(w){if(Array.isArray(w)){for(var F=0,x=Array(w.length);F<w.length;F++)x[F]=w[F];return x}else return Array.from(w)}var n=Object.hasOwnProperty,z=Object.setPrototypeOf,t=Object.isFrozen,r=Object.freeze,O=Object.seal,N=Object.create,H=typeof Reflect!=="undefined"&&Reflect,Y=H.apply,fa=H.construct;Y||(Y=function w(F,x,q){return F.apply(x,q)}),r||(r=function w(F){return F}),O||(O=function w(F){return F}),fa||(fa=function w(F,x){return new(Function.prototype.bind.apply(F,[null].concat(h(x))))()});var _=Ca(Array.prototype.forEach),K=Ca(Array.prototype.pop),o=Ca(Array.prototype.push),B=Ca(String.prototype.toLowerCase),p=Ca(String.prototype.match),v=Ca(String.prototype.replace),$=Ca(String.prototype.indexOf),S=Ca(String.prototype.trim),da=Ca(RegExp.prototype.test),Fa=L(TypeError);function Ca(w){return function(F){for(var x=arguments.length,q=Array(x>1?x-1:0),ua=1;ua<x;ua++)q[ua-1]=arguments[ua];return Y(w,F,q)}}function L(w){return function(){for(var F=arguments.length,x=Array(F),q=0;q<F;q++)x[q]=arguments[q];return fa(w,x)}}function J(w,F){z&&z(w,null);for(var x=F.length;x--;){var q=F[x];if(typeof q==="string"){var ua=B(q);ua!==q&&(t(F)||(F[x]=ua),q=ua)}w[q]=!0}return w}function C(w){var F=N(null),x=void 0;for(x in w)Y(n,w,[x])&&(F[x]=w[x]);return F}var M=r(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),V=r(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","audio","canvas","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","video","view","vkern"]),ta=r(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Na=r(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),qa=r(["#text"]),wb=r(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns"]),db=r(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),ec=r(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),eb=r(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Cc=O(/\{\{[\s\S]*|[\s\S]*\}\}/gm),Dc=O(/<%[\s\S]*|[\s\S]*%>/gm),Ec=O(/^data-[\-\w.\u00B7-\uFFFF]/),wa=O(/^aria-[\-\w]+$/),Fc=O(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Gc=O(/^(?:\w+script|data):/i),xb=O(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),ra=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol==="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w};function Ga(w){if(Array.isArray(w)){for(var F=0,x=Array(w.length);F<w.length;F++)x[F]=w[F];return x}else return Array.from(w)}var fc=function w(){return typeof window==="undefined"?null:window},Hc=function w(F,x){if((typeof F==="undefined"?"undefined":ra(F))!=="object"||typeof F.createPolicy!=="function")return null;var q=null,ua="data-tt-policy-suffix";x.currentScript&&x.currentScript.hasAttribute(ua)&&(q=x.currentScript.getAttribute(ua));var zb="dompurify"+(q?"#"+q:"");try{return F.createPolicy(zb,{createHTML:function Sa(Ha){return Ha}})}catch(Sa){return console.warn("TrustedTypes policy "+zb+" could not be created."),null}};function yb(){var w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:fc(),F=function W(m){return yb(m)};F.version="2.2.3",F.removed=[];if(!w||!w.document||w.document.nodeType!==9)return F.isSupported=!1,F;var x=w.document,q=w.document,ua=w.DocumentFragment,zb=w.HTMLTemplateElement,Sa=w.Node,Ha=w.NodeFilter,Lb=w.NamedNodeMap,Ic=Lb===void 0?w.NamedNodeMap||w.MozNamedAttrMap:Lb,gc=w.Text,gb=w.Comment,Jc=w.DOMParser,hc=w.trustedTypes;if(typeof zb==="function"){var _a=q.createElement("template");_a.content&&_a.content.ownerDocument&&(q=_a.content.ownerDocument)}var za=Hc(hc,x),Mb=za&&xa?za.createHTML(""):"",hb=q,Nb=hb.implementation,Kc=hb.createNodeIterator,ib=hb.getElementsByTagName,Ab=hb.createDocumentFragment,ic=x.importNode,Ob={};try{Ob=C(q).documentMode?q.documentMode:{}}catch(W){}var Ia={};F.isSupported=Nb&&typeof Nb.createHTMLDocument!=="undefined"&&Ob!==9;var Pb=Cc,Qb=Dc,Z=Ec,Lc=wa,l=Gc,j=xb,s=Fc,b=null,d=J({},[].concat(Ga(M),Ga(V),Ga(ta),Ga(Na),Ga(qa))),f=null,g=J({},[].concat(Ga(wb),Ga(db),Ga(ec),Ga(eb))),i=null,A=null,y=!0,T=!0,P=!1,aa=!1,sa=!1,ga=!1,X=!1,Aa=!1,Ta=!1,Ua=!0,xa=!1,ba=!0,jb=!0,$a=!1,Ja={},jc=J({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","plaintext","script","style","svg","template","thead","title","video","xmp"]),Rb=null,oe=J({},["audio","video","img","source","image","track"]),Mc=null,pe=J({},["alt","class","for","id","label","name","pattern","placeholder","summary","title","value","style","xmlns"]),Bb=null,Oe=q.createElement("form"),Nc=function W(m){if(Bb&&Bb===m)return;(!m||(typeof m==="undefined"?"undefined":ra(m))!=="object")&&(m={}),m=C(m),b="ALLOWED_TAGS"in m?J({},m.ALLOWED_TAGS):d,f="ALLOWED_ATTR"in m?J({},m.ALLOWED_ATTR):g,Mc="ADD_URI_SAFE_ATTR"in m?J(C(pe),m.ADD_URI_SAFE_ATTR):pe,Rb="ADD_DATA_URI_TAGS"in m?J(C(oe),m.ADD_DATA_URI_TAGS):oe,i="FORBID_TAGS"in m?J({},m.FORBID_TAGS):{},A="FORBID_ATTR"in m?J({},m.FORBID_ATTR):{},Ja="USE_PROFILES"in m?m.USE_PROFILES:!1,y=m.ALLOW_ARIA_ATTR!==!1,T=m.ALLOW_DATA_ATTR!==!1,P=m.ALLOW_UNKNOWN_PROTOCOLS||!1,aa=m.SAFE_FOR_TEMPLATES||!1,sa=m.WHOLE_DOCUMENT||!1,Aa=m.RETURN_DOM||!1,Ta=m.RETURN_DOM_FRAGMENT||!1,Ua=m.RETURN_DOM_IMPORT!==!1,xa=m.RETURN_TRUSTED_TYPE||!1,X=m.FORCE_BODY||!1,ba=m.SANITIZE_DOM!==!1,jb=m.KEEP_CONTENT!==!1,$a=m.IN_PLACE||!1,s=m.ALLOWED_URI_REGEXP||s,aa&&(T=!1),Ta&&(Aa=!0),Ja&&(b=J({},[].concat(Ga(qa))),f=[],Ja.html===!0&&(J(b,M),J(f,wb)),Ja.svg===!0&&(J(b,V),J(f,db),J(f,eb)),Ja.svgFilters===!0&&(J(b,ta),J(f,db),J(f,eb)),Ja.mathMl===!0&&(J(b,Na),J(f,ec),J(f,eb))),m.ADD_TAGS&&(b===d&&(b=C(b)),J(b,m.ADD_TAGS)),m.ADD_ATTR&&(f===g&&(f=C(f)),J(f,m.ADD_ATTR)),m.ADD_URI_SAFE_ATTR&&J(Mc,m.ADD_URI_SAFE_ATTR),jb&&(b["#text"]=!0),sa&&J(b,["html","head","body"]),b.table&&(J(b,["tbody"]),delete i.tbody),r&&r(m),Bb=m},kb=function W(m){o(F.removed,{element:m});try{m.parentNode.removeChild(m)}catch(I){m.outerHTML=Mb}},qe=function W(m,I){try{o(F.removed,{attribute:I.getAttributeNode(m),from:I})}catch(Q){o(F.removed,{attribute:null,from:I})}I.removeAttribute(m)},re=function W(m){var I=void 0,Q=void 0;if(X)m="<remove></remove>"+m;else{var ka=p(m,/^[\r\n\t ]+/);Q=ka&&ka[0]}var Oa=za?za.createHTML(m):m;try{I=new Jc().parseFromString(Oa,"text/html")}catch(Va){}if(!I||!I.documentElement){I=Nb.createHTMLDocument("");var Ka=I,Ba=Ka.body;Ba.parentNode.removeChild(Ba.parentNode.firstElementChild),Ba.outerHTML=Oa}return m&&Q&&I.body.insertBefore(q.createTextNode(Q),I.body.childNodes[0]||null),ib.call(I,sa?"html":"body")[0]},se=function W(m){return Kc.call(m.ownerDocument||m,m,Ha.SHOW_ELEMENT|Ha.SHOW_COMMENT|Ha.SHOW_TEXT,function(){return Ha.FILTER_ACCEPT},!1)},Pe=function W(m){return m instanceof gc||m instanceof gb?!1:typeof m.nodeName!=="string"||typeof m.textContent!=="string"||typeof m.removeChild!=="function"||!(m.attributes instanceof Ic)||typeof m.removeAttribute!=="function"||typeof m.setAttribute!=="function"||typeof m.namespaceURI!=="string"?!0:!1},Sb=function W(m){return(typeof Sa==="undefined"?"undefined":ra(Sa))==="object"?m instanceof Sa:m&&(typeof m==="undefined"?"undefined":ra(m))==="object"&&typeof m.nodeType==="number"&&typeof m.nodeName==="string"},Xa=function W(m,I,Q){if(!Ia[m])return;_(Ia[m],function(ka){ka.call(F,I,Q,Bb)})},te=function W(m){var I=void 0;Xa("beforeSanitizeElements",m,null);if(Pe(m))return kb(m),!0;if(p(m.nodeName,/[\u0080-\uFFFF]/))return kb(m),!0;var Q=B(m.nodeName);Xa("uponSanitizeElement",m,{tagName:Q,allowedTags:b});if((Q==="svg"||Q==="math")&&m.querySelectorAll("p, br, form, table, h1, h2, h3, h4, h5, h6").length!==0)return kb(m),!0;if(!Sb(m.firstElementChild)&&(!Sb(m.content)||!Sb(m.content.firstElementChild))&&da(/<[/\w]/g,m.innerHTML)&&da(/<[/\w]/g,m.textContent))return kb(m),!0;if(!b[Q]||i[Q]){if(jb&&!jc[Q]&&typeof m.insertAdjacentHTML==="function")try{var ka=m.innerHTML;m.insertAdjacentHTML("AfterEnd",za?za.createHTML(ka):ka)}catch(Oa){}return kb(m),!0}return(Q==="noscript"||Q==="noembed")&&da(/<\/no(script|embed)/i,m.innerHTML)?(kb(m),!0):(aa&&m.nodeType===3&&(I=m.textContent,I=v(I,Pb," "),I=v(I,Qb," "),m.textContent!==I&&(o(F.removed,{element:m.cloneNode()}),m.textContent=I)),Xa("afterSanitizeElements",m,null),!1)},ue=function W(m,I,Q){if(ba&&(I==="id"||I==="name")&&(Q in q||Q in Oe))return!1;if(!(T&&da(Z,I))){if(!(y&&da(Lc,I))){if(!f[I]||A[I])return!1;if(!Mc[I]){if(!da(s,v(Q,j,""))){if(!((I==="src"||I==="xlink:href"||I==="href")&&m!=="script"&&$(Q,"data:")===0&&Rb[m])){if(!(P&&!da(l,v(Q,j,"")))){if(Q)return!1}}}}}}return!0},ve=function W(m){var I=void 0,Q=void 0,ka=void 0,Oa=void 0;Xa("beforeSanitizeAttributes",m,null);var Ka=m.attributes;if(!Ka)return;var Ba={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:f};for(Oa=Ka.length;Oa--;){I=Ka[Oa];var Va=I,Tb=Va.name,we=Va.namespaceURI;Q=S(I.value),ka=B(Tb),Ba.attrName=ka,Ba.attrValue=Q,Ba.keepAttr=!0,Ba.forceKeepAttr=void 0,Xa("uponSanitizeAttribute",m,Ba),Q=Ba.attrValue;if(Ba.forceKeepAttr)continue;qe(Tb,m);if(!Ba.keepAttr)continue;if(da(/\/>/i,Q)){qe(Tb,m);continue}aa&&(Q=v(Q,Pb," "),Q=v(Q,Qb," "));var Re=m.nodeName.toLowerCase();if(!ue(Re,ka,Q))continue;try{we?m.setAttributeNS(we,Tb,Q):m.setAttribute(Tb,Q),K(F.removed)}catch(zg){}}Xa("afterSanitizeAttributes",m,null)},Qe=function W(m){var I=void 0,Q=se(m);for(Xa("beforeSanitizeShadowDOM",m,null);I=Q.nextNode();){Xa("uponSanitizeShadowNode",I,null);if(te(I))continue;I.content instanceof ua&&W(I.content),ve(I)}Xa("afterSanitizeShadowDOM",m,null)};return F.sanitize=function(W,m){var I=void 0,Q=void 0,ka=void 0,Oa=void 0,Ka=void 0;W||(W="<!-->");if(typeof W!=="string"&&!Sb(W)){if(typeof W.toString!=="function")throw Fa("toString is not a function");{W=W.toString();if(typeof W!=="string")throw Fa("dirty is not a string, aborting")}}if(!F.isSupported){if(ra(w.toStaticHTML)==="object"||typeof w.toStaticHTML==="function"){if(typeof W==="string")return w.toStaticHTML(W);if(Sb(W))return w.toStaticHTML(W.outerHTML)}return W}ga||Nc(m),F.removed=[],typeof W==="string"&&($a=!1);if(!$a)if(W instanceof Sa)I=re("<!---->"),Q=I.ownerDocument.importNode(W,!0),Q.nodeType===1&&Q.nodeName==="BODY"?I=Q:Q.nodeName==="HTML"?I=Q:I.appendChild(Q);else{if(!Aa&&!aa&&!sa&&W.indexOf("<")===-1)return za&&xa?za.createHTML(W):W;I=re(W);if(!I)return Aa?null:Mb}I&&X&&kb(I.firstChild);for(var Ba=se($a?W:I);ka=Ba.nextNode();){if(ka.nodeType===3&&ka===Oa)continue;if(te(ka))continue;ka.content instanceof ua&&Qe(ka.content),ve(ka),Oa=ka}Oa=null;if($a)return W;if(Aa){if(Ta)for(Ka=Ab.call(I.ownerDocument);I.firstChild;)Ka.appendChild(I.firstChild);else Ka=I;return Ua&&(Ka=ic.call(x,Ka,!0)),Ka}var Va=sa?I.outerHTML:I.innerHTML;return aa&&(Va=v(Va,Pb," "),Va=v(Va,Qb," ")),za&&xa?za.createHTML(Va):Va},F.setConfig=function(W){Nc(W),ga=!0},F.clearConfig=function(){Bb=null,ga=!1},F.isValidAttribute=function(W,m,I){Bb||Nc({});var Q=B(W),ka=B(m);return ue(Q,ka,I)},F.addHook=function(W,m){if(typeof m!=="function")return;Ia[W]=Ia[W]||[],o(Ia[W],m)},F.removeHook=function(W){Ia[W]&&K(Ia[W])},F.removeHooks=function(W){Ia[W]&&(Ia[W]=[])},F.removeAllHooks=function(){Ia={}},F}var fb=yb();return fb})});var ef=ab((a,e)=>{(function(h,n){typeof a==="object"&&typeof e!=="undefined"?e.exports=n():typeof define==="function"&&define.amd?define(n):(h=typeof globalThis!=="undefined"?globalThis:h||self,h.marked=n())})(a,function(){"use strict";function h(l,j){for(var s=0;s<j.length;s++){var b=j[s];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(l,b.key,b)}}function n(l,j,s){return j&&h(l.prototype,j),s&&h(l,s),l}function z(l,j){if(!l)return;if(typeof l==="string")return t(l,j);var s=Object.prototype.toString.call(l).slice(8,-1);s==="Object"&&l.constructor&&(s=l.constructor.name);if(s==="Map"||s==="Set")return Array.from(l);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return t(l,j)}function t(l,j){(j==null||j>l.length)&&(j=l.length);for(var s=0,b=new Array(j);s<j;s++)b[s]=l[s];return b}function r(l,j){var s;if(typeof Symbol==="undefined"||l[Symbol.iterator]==null){if(Array.isArray(l)||(s=z(l))||j&&l&&typeof l.length==="number"){s&&(l=s);var b=0;return function(){return b>=l.length?{done:!0}:{done:!1,value:l[b++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}return s=l[Symbol.iterator](),s.next.bind(s)}function O(l,j){return j={exports:{}},l(j,j.exports),j.exports}var N=O(function(l){function j(){return{baseUrl:null,breaks:!1,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}function s(b){l.exports.defaults=b}l.exports={defaults:j(),getDefaults:j,changeDefaults:s}}),H=N.defaults,Y=N.getDefaults,fa=N.changeDefaults,_=/[&<>"']/,K=/[&<>"']/g,o=/[<>"']|&(?!#?\w+;)/,B=/[<>"']|&(?!#?\w+;)/g,p={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},v=function l(j){return p[j]};function $(l,j){if(j){if(_.test(l))return l.replace(K,v)}else if(o.test(l))return l.replace(B,v);return l}var S=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function da(l){return l.replace(S,function(j,s){return s=s.toLowerCase(),s==="colon"?":":s.charAt(0)==="#"?s.charAt(1)==="x"?String.fromCharCode(parseInt(s.substring(2),16)):String.fromCharCode(+s.substring(1)):""})}var Fa=/(^|[^\[])\^/g;function Ca(l,j){l=l.source||l,j=j||"";var s={replace:function b(d,f){return f=f.source||f,f=f.replace(Fa,"$1"),l=l.replace(d,f),s},getRegex:function b(){return new RegExp(l,j)}};return s}var L=/[^\w:]/g,J=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function C(l,j,s){if(l){var b;try{b=decodeURIComponent(da(s)).replace(L,"").toLowerCase()}catch(d){return null}if(b.indexOf("javascript:")===0||b.indexOf("vbscript:")===0||b.indexOf("data:")===0)return null}j&&!J.test(s)&&(s=qa(j,s));try{s=encodeURI(s).replace(/%25/g,"%")}catch(d){return null}return s}var M={},V=/^[^:]+:\/*[^/]*$/,ta=/^([^:]+:)[\s\S]*$/,Na=/^([^:]+:\/*[^/]*)[\s\S]*$/;function qa(l,j){M[" "+l]||(V.test(l)?M[" "+l]=l+"/":M[" "+l]=eb(l,"/",!0)),l=M[" "+l];var s=l.indexOf(":")===-1;return j.substring(0,2)==="//"?s?j:l.replace(ta,"$1")+j:j.charAt(0)==="/"?s?j:l.replace(Na,"$1")+j:l+j}var wb={exec:function l(){}};function db(l){for(var j=1,s,b;j<arguments.length;j++){s=arguments[j];for(b in s)Object.prototype.hasOwnProperty.call(s,b)&&(l[b]=s[b])}return l}function ec(l,j){var s=l.replace(/\|/g,function(f,g,i){for(var A=!1,y=g;--y>=0&&i[y]==="\\";)A=!A;return A?"|":" |"}),b=s.split(/ \|/),d=0;if(b.length>j)b.splice(j);else for(;b.length<j;)b.push("");for(;d<b.length;d++)b[d]=b[d].trim().replace(/\\\|/g,"|");return b}function eb(l,j,s){var b=l.length;if(b===0)return"";for(var d=0;d<b;){var f=l.charAt(b-d-1);if(f===j&&!s)d++;else if(f!==j&&s)d++;else break}return l.substr(0,b-d)}function Cc(l,j){if(l.indexOf(j[1])===-1)return-1;for(var s=l.length,b=0,d=0;d<s;d++)if(l[d]==="\\")d++;else if(l[d]===j[0])b++;else if(l[d]===j[1]){b--;if(b<0)return d}return-1}function Dc(l){l&&l.sanitize&&!l.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function Ec(l,j){if(j<1)return"";for(var s="";j>1;)j&1&&(s+=l),j>>=1,l+=l;return s+l}var wa={escape:$,unescape:da,edit:Ca,cleanUrl:C,resolveUrl:qa,noopTest:wb,merge:db,splitCells:ec,rtrim:eb,findClosingBracket:Cc,checkSanitizeDeprecation:Dc,repeatString:Ec},Fc=N.defaults,Gc=wa.rtrim,xb=wa.splitCells,ra=wa.escape,Ga=wa.findClosingBracket;function fc(l,j,s){var b=j.href,d=j.title?ra(j.title):null,f=l[1].replace(/\\([\[\]])/g,"$1");return l[0].charAt(0)!=="!"?{type:"link",raw:s,href:b,title:d,text:f}:{type:"image",raw:s,href:b,title:d,text:ra(f)}}function Hc(l,j){var s=l.match(/^(\s+)(?:```)/);if(s===null)return j;var b=s[1];return j.split(`
`).map(function(d){var f=d.match(/^\s+/);if(f===null)return d;var g=f[0];return g.length>=b.length?d.slice(b.length):d}).join(`
`)}var yb=function(){function l(s){this.options=s||Fc}var j=l.prototype;return j.space=function s(b){var d=this.rules.block.newline.exec(b);if(d)return d[0].length>1?{type:"space",raw:d[0]}:{raw:`
`}},j.code=function s(b,d){var f=this.rules.block.code.exec(b);if(f){var g=d[d.length-1];if(g&&g.type==="paragraph")return{raw:f[0],text:f[0].trimRight()};var i=f[0].replace(/^ {4}/gm,"");return{type:"code",raw:f[0],codeBlockStyle:"indented",text:this.options.pedantic?i:Gc(i,`
`)}}},j.fences=function s(b){var d=this.rules.block.fences.exec(b);if(d){var f=d[0],g=Hc(f,d[3]||"");return{type:"code",raw:f,lang:d[2]?d[2].trim():d[2],text:g}}},j.heading=function s(b){var d=this.rules.block.heading.exec(b);if(d)return{type:"heading",raw:d[0],depth:d[1].length,text:d[2]}},j.nptable=function s(b){var d=this.rules.block.nptable.exec(b);if(d){var f={type:"table",header:xb(d[1].replace(/^ *| *\| *$/g,"")),align:d[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:d[3]?d[3].replace(/\n$/,"").split(`
`):[],raw:d[0]};if(f.header.length===f.align.length){var g=f.align.length,i;for(i=0;i<g;i++)/^ *-+: *$/.test(f.align[i])?f.align[i]="right":/^ *:-+: *$/.test(f.align[i])?f.align[i]="center":/^ *:-+ *$/.test(f.align[i])?f.align[i]="left":f.align[i]=null;for(g=f.cells.length,i=0;i<g;i++)f.cells[i]=xb(f.cells[i],f.header.length);return f}}},j.hr=function s(b){var d=this.rules.block.hr.exec(b);if(d)return{type:"hr",raw:d[0]}},j.blockquote=function s(b){var d=this.rules.block.blockquote.exec(b);if(d){var f=d[0].replace(/^ *> ?/gm,"");return{type:"blockquote",raw:d[0],text:f}}},j.list=function s(b){var d=this.rules.block.list.exec(b);if(d){var f=d[0],g=d[2],i=g.length>1,A={type:"list",raw:f,ordered:i,start:i?+g.slice(0,-1):"",loose:!1,items:[]},y=d[0].match(this.rules.block.item),T=!1,P,aa,sa,ga,X,Aa,Ta,Ua,xa=y.length;sa=this.rules.block.listItemStart.exec(y[0]);for(var ba=0;ba<xa;ba++){P=y[ba],f=P;if(ba!==xa-1){ga=this.rules.block.listItemStart.exec(y[ba+1]);if(ga[1].length>sa[0].length||ga[1].length>3){y.splice(ba,2,y[ba]+`
`+y[ba+1]),ba--,xa--;continue}else(!this.options.pedantic||this.options.smartLists?ga[2][ga[2].length-1]!==g[g.length-1]:i===(ga[2].length===1))&&(X=y.slice(ba+1).join(`
`),A.raw=A.raw.substring(0,A.raw.length-X.length),ba=xa-1);sa=ga}aa=P.length,P=P.replace(/^ *([*+-]|\d+[.)]) ?/,""),~P.indexOf(`
 `)&&(aa-=P.length,P=this.options.pedantic?P.replace(/^ {1,4}/gm,""):P.replace(new RegExp("^ {1,"+aa+"}","gm"),"")),Aa=T||/\n\n(?!\s*$)/.test(P),ba!==xa-1&&(T=P.charAt(P.length-1)===`
`,Aa||(Aa=T)),Aa&&(A.loose=!0),this.options.gfm&&(Ta=/^\[[ xX]\] /.test(P),Ua=void 0,Ta&&(Ua=P[1]!==" ",P=P.replace(/^\[[ xX]\] +/,""))),A.items.push({type:"list_item",raw:f,task:Ta,checked:Ua,loose:Aa,text:P})}return A}},j.html=function s(b){var d=this.rules.block.html.exec(b);if(d)return{type:this.options.sanitize?"paragraph":"html",raw:d[0],pre:!this.options.sanitizer&&(d[1]==="pre"||d[1]==="script"||d[1]==="style"),text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(d[0]):ra(d[0]):d[0]}},j.def=function s(b){var d=this.rules.block.def.exec(b);if(d){d[3]&&(d[3]=d[3].substring(1,d[3].length-1));var f=d[1].toLowerCase().replace(/\s+/g," ");return{tag:f,raw:d[0],href:d[2],title:d[3]}}},j.table=function s(b){var d=this.rules.block.table.exec(b);if(d){var f={type:"table",header:xb(d[1].replace(/^ *| *\| *$/g,"")),align:d[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:d[3]?d[3].replace(/\n$/,"").split(`
`):[]};if(f.header.length===f.align.length){f.raw=d[0];var g=f.align.length,i;for(i=0;i<g;i++)/^ *-+: *$/.test(f.align[i])?f.align[i]="right":/^ *:-+: *$/.test(f.align[i])?f.align[i]="center":/^ *:-+ *$/.test(f.align[i])?f.align[i]="left":f.align[i]=null;for(g=f.cells.length,i=0;i<g;i++)f.cells[i]=xb(f.cells[i].replace(/^ *\| *| *\| *$/g,""),f.header.length);return f}}},j.lheading=function s(b){var d=this.rules.block.lheading.exec(b);if(d)return{type:"heading",raw:d[0],depth:d[2].charAt(0)==="="?1:2,text:d[1]}},j.paragraph=function s(b){var d=this.rules.block.paragraph.exec(b);if(d)return{type:"paragraph",raw:d[0],text:d[1].charAt(d[1].length-1)===`
`?d[1].slice(0,-1):d[1]}},j.text=function s(b,d){var f=this.rules.block.text.exec(b);if(f){var g=d[d.length-1];return g&&g.type==="text"?{raw:f[0],text:f[0]}:{type:"text",raw:f[0],text:f[0]}}},j.escape=function s(b){var d=this.rules.inline.escape.exec(b);if(d)return{type:"escape",raw:d[0],text:ra(d[1])}},j.tag=function s(b,d,f){var g=this.rules.inline.tag.exec(b);if(g)return!d&&/^<a /i.test(g[0])?d=!0:d&&/^<\/a>/i.test(g[0])&&(d=!1),!f&&/^<(pre|code|kbd|script)(\s|>)/i.test(g[0])?f=!0:f&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(g[0])&&(f=!1),{type:this.options.sanitize?"text":"html",raw:g[0],inLink:d,inRawBlock:f,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(g[0]):ra(g[0]):g[0]}},j.link=function s(b){var d=this.rules.inline.link.exec(b);if(d){var f=Ga(d[2],"()");if(f>-1){var g=d[0].indexOf("!")===0?5:4,i=g+d[1].length+f;d[2]=d[2].substring(0,f),d[0]=d[0].substring(0,i).trim(),d[3]=""}var A=d[2],y="";if(this.options.pedantic){var T=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(A);T?(A=T[1],y=T[3]):y=""}else y=d[3]?d[3].slice(1,-1):"";A=A.trim().replace(/^<([\s\S]*)>$/,"$1");var P=fc(d,{href:A?A.replace(this.rules.inline._escapes,"$1"):A,title:y?y.replace(this.rules.inline._escapes,"$1"):y},d[0]);return P}},j.reflink=function s(b,d){var f;if((f=this.rules.inline.reflink.exec(b))||(f=this.rules.inline.nolink.exec(b))){var g=(f[2]||f[1]).replace(/\s+/g," ");g=d[g.toLowerCase()];if(!g||!g.href){var i=f[0].charAt(0);return{type:"text",raw:i,text:i}}var A=fc(f,g,f[0]);return A}},j.strong=function s(b,d,f){f===void 0&&(f="");var g=this.rules.inline.strong.start.exec(b);if(g&&(!g[1]||g[1]&&(f===""||this.rules.inline.punctuation.exec(f)))){d=d.slice(-1*b.length);var i=g[0]==="**"?this.rules.inline.strong.endAst:this.rules.inline.strong.endUnd;i.lastIndex=0;for(var A;(g=i.exec(d))!=null;){A=this.rules.inline.strong.middle.exec(d.slice(0,g.index+3));if(A)return{type:"strong",raw:b.slice(0,A[0].length),text:b.slice(2,A[0].length-2)}}}},j.em=function s(b,d,f){f===void 0&&(f="");var g=this.rules.inline.em.start.exec(b);if(g&&(!g[1]||g[1]&&(f===""||this.rules.inline.punctuation.exec(f)))){d=d.slice(-1*b.length);var i=g[0]==="*"?this.rules.inline.em.endAst:this.rules.inline.em.endUnd;i.lastIndex=0;for(var A;(g=i.exec(d))!=null;){A=this.rules.inline.em.middle.exec(d.slice(0,g.index+2));if(A)return{type:"em",raw:b.slice(0,A[0].length),text:b.slice(1,A[0].length-1)}}}},j.codespan=function s(b){var d=this.rules.inline.code.exec(b);if(d){var f=d[2].replace(/\n/g," "),g=/[^ ]/.test(f),i=f.startsWith(" ")&&f.endsWith(" ");return g&&i&&(f=f.substring(1,f.length-1)),f=ra(f,!0),{type:"codespan",raw:d[0],text:f}}},j.br=function s(b){var d=this.rules.inline.br.exec(b);if(d)return{type:"br",raw:d[0]}},j.del=function s(b){var d=this.rules.inline.del.exec(b);if(d)return{type:"del",raw:d[0],text:d[2]}},j.autolink=function s(b,d){var f=this.rules.inline.autolink.exec(b);if(f){var g,i;return f[2]==="@"?(g=ra(this.options.mangle?d(f[1]):f[1]),i="mailto:"+g):(g=ra(f[1]),i=g),{type:"link",raw:f[0],text:g,href:i,tokens:[{type:"text",raw:g,text:g}]}}},j.url=function s(b,d){var f;if(f=this.rules.inline.url.exec(b)){var g,i;if(f[2]==="@")g=ra(this.options.mangle?d(f[0]):f[0]),i="mailto:"+g;else{var A;do A=f[0],f[0]=this.rules.inline._backpedal.exec(f[0])[0];while(A!==f[0]);g=ra(f[0]),f[1]==="www."?i="http://"+g:i=g}return{type:"link",raw:f[0],text:g,href:i,tokens:[{type:"text",raw:g,text:g}]}}},j.inlineText=function s(b,d,f){var g=this.rules.inline.text.exec(b);if(g){var i;return d?i=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(g[0]):ra(g[0]):g[0]:i=ra(this.options.smartypants?f(g[0]):g[0]),{type:"text",raw:g[0],text:i}}},l}(),fb=wa.noopTest,w=wa.edit,F=wa.merge,x={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?:\n+|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6}) +([^\n]*?)(?: +#+)? *(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3})(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?! {0,3}bull )\n*|\s*$)/,html:"^ {0,3}(?:<(script|pre|style)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:\\n{2,}|$)|<(?!script|pre|style)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$)|</(?!script|pre|style)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$))",def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,nptable:fb,table:fb,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html)[^\n]+)*)/,text:/^[^\n]+/};x._label=/(?!\s*\])(?:\\[\[\]]|[^\[\]])+/,x._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/,x.def=w(x.def).replace("label",x._label).replace("title",x._title).getRegex(),x.bullet=/(?:[*+-]|\d{1,9}[.)])/,x.item=/^( *)(bull) ?[^\n]*(?:\n(?! *bull ?)[^\n]*)*/,x.item=w(x.item,"gm").replace(/bull/g,x.bullet).getRegex(),x.listItemStart=w(/^( *)(bull)/).replace("bull",x.bullet).getRegex(),x.list=w(x.list).replace(/bull/g,x.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+x.def.source+")").getRegex(),x._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",x._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,x.html=w(x.html,"i").replace("comment",x._comment).replace("tag",x._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),x.paragraph=w(x._paragraph).replace("hr",x.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",x._tag).getRegex(),x.blockquote=w(x.blockquote).replace("paragraph",x.paragraph).getRegex(),x.normal=F({},x),x.gfm=F({},x.normal,{nptable:"^ *([^|\\n ].*\\|.*)\\n {0,3}([-:]+ *\\|[-| :]*)(?:\\n((?:(?!\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)",table:"^ *\\|(.+)\\n {0,3}\\|?( *[-:]+[-| :]*)(?:\\n *((?:(?!\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),x.gfm.nptable=w(x.gfm.nptable).replace("hr",x.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",x._tag).getRegex(),x.gfm.table=w(x.gfm.table).replace("hr",x.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",x._tag).getRegex(),x.pedantic=F({},x.normal,{html:w(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",x._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *(?:#+ *)?(?:\n+|$)/,fences:fb,paragraph:w(x.normal._paragraph).replace("hr",x.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",x.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});var q={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:fb,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/,nolink:/^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",strong:{start:/^(?:(\*\*(?=[*punctuation]))|\*\*)(?![\s])|__/,middle:/^\*\*(?:(?:(?!overlapSkip)(?:[^*]|\\\*)|overlapSkip)|\*(?:(?!overlapSkip)(?:[^*]|\\\*)|overlapSkip)*?\*)+?\*\*$|^__(?![\s])((?:(?:(?!overlapSkip)(?:[^_]|\\_)|overlapSkip)|_(?:(?!overlapSkip)(?:[^_]|\\_)|overlapSkip)*?_)+?)__$/,endAst:/[^punctuation\s]\*\*(?!\*)|[punctuation]\*\*(?!\*)(?:(?=[punctuation_\s]|$))/,endUnd:/[^\s]__(?!_)(?:(?=[punctuation*\s])|$)/},em:{start:/^(?:(\*(?=[punctuation]))|\*)(?![*\s])|_/,middle:/^\*(?:(?:(?!overlapSkip)(?:[^*]|\\\*)|overlapSkip)|\*(?:(?!overlapSkip)(?:[^*]|\\\*)|overlapSkip)*?\*)+?\*$|^_(?![_\s])(?:(?:(?!overlapSkip)(?:[^_]|\\_)|overlapSkip)|_(?:(?!overlapSkip)(?:[^_]|\\_)|overlapSkip)*?_)+?_$/,endAst:/[^punctuation\s]\*(?!\*)|[punctuation]\*(?!\*)(?:(?=[punctuation_\s]|$))/,endUnd:/[^\s]_(?!_)(?:(?=[punctuation*\s])|$)/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:fb,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\s*punctuation])/};q._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~",q.punctuation=w(q.punctuation).replace(/punctuation/g,q._punctuation).getRegex(),q._blockSkip="\\[[^\\]]*?\\]\\([^\\)]*?\\)|`[^`]*?`|<[^>]*?>",q._overlapSkip="__[^_]*?__|\\*\\*\\[^\\*\\]*?\\*\\*",q._comment=w(x._comment).replace("(?:-->|$)","-->").getRegex(),q.em.start=w(q.em.start).replace(/punctuation/g,q._punctuation).getRegex(),q.em.middle=w(q.em.middle).replace(/punctuation/g,q._punctuation).replace(/overlapSkip/g,q._overlapSkip).getRegex(),q.em.endAst=w(q.em.endAst,"g").replace(/punctuation/g,q._punctuation).getRegex(),q.em.endUnd=w(q.em.endUnd,"g").replace(/punctuation/g,q._punctuation).getRegex(),q.strong.start=w(q.strong.start).replace(/punctuation/g,q._punctuation).getRegex(),q.strong.middle=w(q.strong.middle).replace(/punctuation/g,q._punctuation).replace(/overlapSkip/g,q._overlapSkip).getRegex(),q.strong.endAst=w(q.strong.endAst,"g").replace(/punctuation/g,q._punctuation).getRegex(),q.strong.endUnd=w(q.strong.endUnd,"g").replace(/punctuation/g,q._punctuation).getRegex(),q.blockSkip=w(q._blockSkip,"g").getRegex(),q.overlapSkip=w(q._overlapSkip,"g").getRegex(),q._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,q._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,q._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,q.autolink=w(q.autolink).replace("scheme",q._scheme).replace("email",q._email).getRegex(),q._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,q.tag=w(q.tag).replace("comment",q._comment).replace("attribute",q._attribute).getRegex(),q._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,q._href=/<(?:\\[<>]?|[^\s<>\\])*>|[^\s\x00-\x1f]*/,q._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,q.link=w(q.link).replace("label",q._label).replace("href",q._href).replace("title",q._title).getRegex(),q.reflink=w(q.reflink).replace("label",q._label).getRegex(),q.reflinkSearch=w(q.reflinkSearch,"g").replace("reflink",q.reflink).replace("nolink",q.nolink).getRegex(),q.normal=F({},q),q.pedantic=F({},q.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:w(/^!?\[(label)\]\((.*?)\)/).replace("label",q._label).getRegex(),reflink:w(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",q._label).getRegex()}),q.gfm=F({},q.normal,{escape:w(q.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*~]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))/}),q.gfm.url=w(q.gfm.url,"i").replace("email",q.gfm._extended_email).getRegex(),q.breaks=F({},q.gfm,{br:w(q.br).replace("{2,}","*").getRegex(),text:w(q.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});var ua={block:x,inline:q},zb=N.defaults,Sa=ua.block,Ha=ua.inline,Lb=wa.repeatString;function Ic(l){return l.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…")}function gc(l){var j="",s,b,d=l.length;for(s=0;s<d;s++)b=l.charCodeAt(s),Math.random()>.5&&(b="x"+b.toString(16)),j+="&#"+b+";";return j}var gb=function(){function l(s){this.tokens=[],this.tokens.links=Object.create(null),this.options=s||zb,this.options.tokenizer=this.options.tokenizer||new yb(),this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options;var b={block:Sa.normal,inline:Ha.normal};this.options.pedantic?(b.block=Sa.pedantic,b.inline=Ha.pedantic):this.options.gfm&&(b.block=Sa.gfm,this.options.breaks?b.inline=Ha.breaks:b.inline=Ha.gfm),this.tokenizer.rules=b}l.lex=function s(b,d){var f=new l(d);return f.lex(b)},l.lexInline=function s(b,d){var f=new l(d);return f.inlineTokens(b)};var j=l.prototype;return j.lex=function s(b){return b=b.replace(/\r\n|\r/g,`
`).replace(/\t/g,"    "),this.blockTokens(b,this.tokens,!0),this.inline(this.tokens),this.tokens},j.blockTokens=function s(b,d,f){d===void 0&&(d=[]),f===void 0&&(f=!0),b=b.replace(/^ +$/gm,"");for(var g,i,A,y;b;){if(g=this.tokenizer.space(b)){b=b.substring(g.raw.length),g.type&&d.push(g);continue}if(g=this.tokenizer.code(b,d)){b=b.substring(g.raw.length),g.type?d.push(g):(y=d[d.length-1],y.raw+=`
`+g.raw,y.text+=`
`+g.text);continue}if(g=this.tokenizer.fences(b)){b=b.substring(g.raw.length),d.push(g);continue}if(g=this.tokenizer.heading(b)){b=b.substring(g.raw.length),d.push(g);continue}if(g=this.tokenizer.nptable(b)){b=b.substring(g.raw.length),d.push(g);continue}if(g=this.tokenizer.hr(b)){b=b.substring(g.raw.length),d.push(g);continue}if(g=this.tokenizer.blockquote(b)){b=b.substring(g.raw.length),g.tokens=this.blockTokens(g.text,[],f),d.push(g);continue}if(g=this.tokenizer.list(b)){for(b=b.substring(g.raw.length),A=g.items.length,i=0;i<A;i++)g.items[i].tokens=this.blockTokens(g.items[i].text,[],!1);d.push(g);continue}if(g=this.tokenizer.html(b)){b=b.substring(g.raw.length),d.push(g);continue}if(f&&(g=this.tokenizer.def(b))){b=b.substring(g.raw.length),this.tokens.links[g.tag]||(this.tokens.links[g.tag]={href:g.href,title:g.title});continue}if(g=this.tokenizer.table(b)){b=b.substring(g.raw.length),d.push(g);continue}if(g=this.tokenizer.lheading(b)){b=b.substring(g.raw.length),d.push(g);continue}if(f&&(g=this.tokenizer.paragraph(b))){b=b.substring(g.raw.length),d.push(g);continue}if(g=this.tokenizer.text(b,d)){b=b.substring(g.raw.length),g.type?d.push(g):(y=d[d.length-1],y.raw+=`
`+g.raw,y.text+=`
`+g.text);continue}if(b){var T="Infinite loop on byte: "+b.charCodeAt(0);if(this.options.silent){console.error(T);break}else throw new Error(T)}}return d},j.inline=function s(b){var d,f,g,i,A,y,T=b.length;for(d=0;d<T;d++){y=b[d];switch(y.type){case"paragraph":case"text":case"heading":{y.tokens=[],this.inlineTokens(y.text,y.tokens);break}case"table":{for(y.tokens={header:[],cells:[]},i=y.header.length,f=0;f<i;f++)y.tokens.header[f]=[],this.inlineTokens(y.header[f],y.tokens.header[f]);for(i=y.cells.length,f=0;f<i;f++)for(A=y.cells[f],y.tokens.cells[f]=[],g=0;g<A.length;g++)y.tokens.cells[f][g]=[],this.inlineTokens(A[g],y.tokens.cells[f][g]);break}case"blockquote":{this.inline(y.tokens);break}case"list":{for(i=y.items.length,f=0;f<i;f++)this.inline(y.items[f].tokens);break}}}return b},j.inlineTokens=function s(b,d,f,g){d===void 0&&(d=[]),f===void 0&&(f=!1),g===void 0&&(g=!1);var i,A=b,y,T,P;if(this.tokens.links){var aa=Object.keys(this.tokens.links);if(aa.length>0)for(;(y=this.tokenizer.rules.inline.reflinkSearch.exec(A))!=null;)aa.includes(y[0].slice(y[0].lastIndexOf("[")+1,-1))&&(A=A.slice(0,y.index)+"["+Lb("a",y[0].length-2)+"]"+A.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(y=this.tokenizer.rules.inline.blockSkip.exec(A))!=null;)A=A.slice(0,y.index)+"["+Lb("a",y[0].length-2)+"]"+A.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;b;){T||(P=""),T=!1;if(i=this.tokenizer.escape(b)){b=b.substring(i.raw.length),d.push(i);continue}if(i=this.tokenizer.tag(b,f,g)){b=b.substring(i.raw.length),f=i.inLink,g=i.inRawBlock,d.push(i);continue}if(i=this.tokenizer.link(b)){b=b.substring(i.raw.length),i.type==="link"&&(i.tokens=this.inlineTokens(i.text,[],!0,g)),d.push(i);continue}if(i=this.tokenizer.reflink(b,this.tokens.links)){b=b.substring(i.raw.length),i.type==="link"&&(i.tokens=this.inlineTokens(i.text,[],!0,g)),d.push(i);continue}if(i=this.tokenizer.strong(b,A,P)){b=b.substring(i.raw.length),i.tokens=this.inlineTokens(i.text,[],f,g),d.push(i);continue}if(i=this.tokenizer.em(b,A,P)){b=b.substring(i.raw.length),i.tokens=this.inlineTokens(i.text,[],f,g),d.push(i);continue}if(i=this.tokenizer.codespan(b)){b=b.substring(i.raw.length),d.push(i);continue}if(i=this.tokenizer.br(b)){b=b.substring(i.raw.length),d.push(i);continue}if(i=this.tokenizer.del(b)){b=b.substring(i.raw.length),i.tokens=this.inlineTokens(i.text,[],f,g),d.push(i);continue}if(i=this.tokenizer.autolink(b,gc)){b=b.substring(i.raw.length),d.push(i);continue}if(!f&&(i=this.tokenizer.url(b,gc))){b=b.substring(i.raw.length),d.push(i);continue}if(i=this.tokenizer.inlineText(b,g,Ic)){b=b.substring(i.raw.length),P=i.raw.slice(-1),T=!0,d.push(i);continue}if(b){var sa="Infinite loop on byte: "+b.charCodeAt(0);if(this.options.silent){console.error(sa);break}else throw new Error(sa)}}return d},n(l,null,[{key:"rules",get:function s(){return{block:Sa,inline:Ha}}}]),l}(),Jc=N.defaults,hc=wa.cleanUrl,_a=wa.escape,za=function(){function l(s){this.options=s||Jc}var j=l.prototype;return j.code=function s(b,d,f){var g=(d||"").match(/\S*/)[0];if(this.options.highlight){var i=this.options.highlight(b,g);i!=null&&i!==b&&(f=!0,b=i)}return g?'<pre><code class="'+this.options.langPrefix+_a(g,!0)+'">'+(f?b:_a(b,!0))+`</code></pre>
`:"<pre><code>"+(f?b:_a(b,!0))+`</code></pre>
`},j.blockquote=function s(b){return`<blockquote>
`+b+`</blockquote>
`},j.html=function s(b){return b},j.heading=function s(b,d,f,g){return this.options.headerIds?"<h"+d+' id="'+this.options.headerPrefix+g.slug(f)+'">'+b+"</h"+d+`>
`:"<h"+d+">"+b+"</h"+d+`>
`},j.hr=function s(){return this.options.xhtml?`<hr/>
`:`<hr>
`},j.list=function s(b,d,f){var g=d?"ol":"ul",i=d&&f!==1?' start="'+f+'"':"";return"<"+g+i+`>
`+b+"</"+g+`>
`},j.listitem=function s(b){return"<li>"+b+`</li>
`},j.checkbox=function s(b){return"<input "+(b?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},j.paragraph=function s(b){return"<p>"+b+`</p>
`},j.table=function s(b,d){return d&&(d="<tbody>"+d+"</tbody>"),`<table>
<thead>
`+b+`</thead>
`+d+`</table>
`},j.tablerow=function s(b){return`<tr>
`+b+`</tr>
`},j.tablecell=function s(b,d){var f=d.header?"th":"td",g=d.align?"<"+f+' align="'+d.align+'">':"<"+f+">";return g+b+"</"+f+`>
`},j.strong=function s(b){return"<strong>"+b+"</strong>"},j.em=function s(b){return"<em>"+b+"</em>"},j.codespan=function s(b){return"<code>"+b+"</code>"},j.br=function s(){return this.options.xhtml?"<br/>":"<br>"},j.del=function s(b){return"<del>"+b+"</del>"},j.link=function s(b,d,f){b=hc(this.options.sanitize,this.options.baseUrl,b);if(b===null)return f;var g='<a href="'+_a(b)+'"';return d&&(g+=' title="'+d+'"'),g+=">"+f+"</a>",g},j.image=function s(b,d,f){b=hc(this.options.sanitize,this.options.baseUrl,b);if(b===null)return f;var g='<img src="'+b+'" alt="'+f+'"';return d&&(g+=' title="'+d+'"'),g+=this.options.xhtml?"/>":">",g},j.text=function s(b){return b},l}(),Mb=function(){function l(){}var j=l.prototype;return j.strong=function s(b){return b},j.em=function s(b){return b},j.codespan=function s(b){return b},j.del=function s(b){return b},j.html=function s(b){return b},j.text=function s(b){return b},j.link=function s(b,d,f){return""+f},j.image=function s(b,d,f){return""+f},j.br=function s(){return""},l}(),hb=function(){function l(){this.seen={}}var j=l.prototype;return j.serialize=function s(b){return b.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")},j.getNextSafeSlug=function s(b,d){var f=b,g=0;if(this.seen.hasOwnProperty(f)){g=this.seen[b];do g++,f=b+"-"+g;while(this.seen.hasOwnProperty(f))}return d||(this.seen[b]=g,this.seen[f]=0),f},j.slug=function s(b,d){d===void 0&&(d={});var f=this.serialize(b);return this.getNextSafeSlug(f,d.dryrun)},l}(),Nb=N.defaults,Kc=wa.unescape,ib=function(){function l(s){this.options=s||Nb,this.options.renderer=this.options.renderer||new za(),this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new Mb(),this.slugger=new hb()}l.parse=function s(b,d){var f=new l(d);return f.parse(b)},l.parseInline=function s(b,d){var f=new l(d);return f.parseInline(b)};var j=l.prototype;return j.parse=function s(b,d){d===void 0&&(d=!0);var f="",g,i,A,y,T,P,aa,sa,ga,X,Aa,Ta,Ua,xa,ba,jb,$a,Ja,jc=b.length;for(g=0;g<jc;g++){X=b[g];switch(X.type){case"space":continue;case"hr":{f+=this.renderer.hr();continue}case"heading":{f+=this.renderer.heading(this.parseInline(X.tokens),X.depth,Kc(this.parseInline(X.tokens,this.textRenderer)),this.slugger);continue}case"code":{f+=this.renderer.code(X.text,X.lang,X.escaped);continue}case"table":{for(sa="",aa="",y=X.header.length,i=0;i<y;i++)aa+=this.renderer.tablecell(this.parseInline(X.tokens.header[i]),{header:!0,align:X.align[i]});for(sa+=this.renderer.tablerow(aa),ga="",y=X.cells.length,i=0;i<y;i++){for(P=X.tokens.cells[i],aa="",T=P.length,A=0;A<T;A++)aa+=this.renderer.tablecell(this.parseInline(P[A]),{header:!1,align:X.align[A]});ga+=this.renderer.tablerow(aa)}f+=this.renderer.table(sa,ga);continue}case"blockquote":{ga=this.parse(X.tokens),f+=this.renderer.blockquote(ga);continue}case"list":{for(Aa=X.ordered,Ta=X.start,Ua=X.loose,y=X.items.length,ga="",i=0;i<y;i++)ba=X.items[i],jb=ba.checked,$a=ba.task,xa="",ba.task&&(Ja=this.renderer.checkbox(jb),Ua?ba.tokens.length>0&&ba.tokens[0].type==="text"?(ba.tokens[0].text=Ja+" "+ba.tokens[0].text,ba.tokens[0].tokens&&ba.tokens[0].tokens.length>0&&ba.tokens[0].tokens[0].type==="text"&&(ba.tokens[0].tokens[0].text=Ja+" "+ba.tokens[0].tokens[0].text)):ba.tokens.unshift({type:"text",text:Ja}):xa+=Ja),xa+=this.parse(ba.tokens,Ua),ga+=this.renderer.listitem(xa,$a,jb);f+=this.renderer.list(ga,Aa,Ta);continue}case"html":{f+=this.renderer.html(X.text);continue}case"paragraph":{f+=this.renderer.paragraph(this.parseInline(X.tokens));continue}case"text":{for(ga=X.tokens?this.parseInline(X.tokens):X.text;g+1<jc&&b[g+1].type==="text";)X=b[++g],ga+=`
`+(X.tokens?this.parseInline(X.tokens):X.text);f+=d?this.renderer.paragraph(ga):ga;continue}default:{var Rb='Token with "'+X.type+'" type was not found.';if(this.options.silent){console.error(Rb);return}else throw new Error(Rb)}}}return f},j.parseInline=function s(b,d){d=d||this.renderer;var f="",g,i,A=b.length;for(g=0;g<A;g++){i=b[g];switch(i.type){case"escape":{f+=d.text(i.text);break}case"html":{f+=d.html(i.text);break}case"link":{f+=d.link(i.href,i.title,this.parseInline(i.tokens,d));break}case"image":{f+=d.image(i.href,i.title,i.text);break}case"strong":{f+=d.strong(this.parseInline(i.tokens,d));break}case"em":{f+=d.em(this.parseInline(i.tokens,d));break}case"codespan":{f+=d.codespan(i.text);break}case"br":{f+=d.br();break}case"del":{f+=d.del(this.parseInline(i.tokens,d));break}case"text":{f+=d.text(i.text);break}default:{var y='Token with "'+i.type+'" type was not found.';if(this.options.silent){console.error(y);return}else throw new Error(y)}}}return f},l}(),Ab=wa.merge,ic=wa.checkSanitizeDeprecation,Ob=wa.escape,Ia=N.getDefaults,Pb=N.changeDefaults,Qb=N.defaults;function Z(l,j,s){if(typeof l==="undefined"||l===null)throw new Error("marked(): input parameter is undefined or null");if(typeof l!=="string")throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(l)+", string expected");typeof j==="function"&&(s=j,j=null),j=Ab({},Z.defaults,j||{}),ic(j);if(s){var b=j.highlight,d;try{d=gb.lex(l,j)}catch(A){return s(A)}var f=function A(y){var T;if(!y)try{T=ib.parse(d,j)}catch(P){y=P}return j.highlight=b,y?s(y):s(null,T)};if(!b||b.length<3)return f();delete j.highlight;if(!d.length)return f();var g=0;Z.walkTokens(d,function(A){A.type==="code"&&(g++,setTimeout(function(){b(A.text,A.lang,function(y,T){if(y)return f(y);T!=null&&T!==A.text&&(A.text=T,A.escaped=!0),g--,g===0&&f()})},0))}),g===0&&f();return}try{var i=gb.lex(l,j);return j.walkTokens&&Z.walkTokens(i,j.walkTokens),ib.parse(i,j)}catch(A){A.message+=`
Please report this to https://github.com/markedjs/marked.`;if(j.silent)return"<p>An error occurred:</p><pre>"+Ob(A.message+"",!0)+"</pre>";throw A}}Z.options=Z.setOptions=function(l){return Ab(Z.defaults,l),Pb(Z.defaults),Z},Z.getDefaults=Ia,Z.defaults=Qb,Z.use=function(l){var j=Ab({},l);l.renderer&&function(){var b=Z.defaults.renderer||new za(),d=function g(i){var A=b[i];b[i]=function(){for(var y=arguments.length,T=new Array(y),P=0;P<y;P++)T[P]=arguments[P];var aa=l.renderer[i].apply(b,T);return aa===!1&&(aa=A.apply(b,T)),aa}};for(var f in l.renderer)d(f);j.renderer=b}(),l.tokenizer&&function(){var b=Z.defaults.tokenizer||new yb(),d=function g(i){var A=b[i];b[i]=function(){for(var y=arguments.length,T=new Array(y),P=0;P<y;P++)T[P]=arguments[P];var aa=l.tokenizer[i].apply(b,T);return aa===!1&&(aa=A.apply(b,T)),aa}};for(var f in l.tokenizer)d(f);j.tokenizer=b}();if(l.walkTokens){var s=Z.defaults.walkTokens;j.walkTokens=function(b){l.walkTokens(b),s&&s(b)}}Z.setOptions(j)},Z.walkTokens=function(l,j){for(var s=r(l),b;!(b=s()).done;){var d=b.value;j(d);switch(d.type){case"table":{for(var f=r(d.tokens.header),g;!(g=f()).done;){var i=g.value;Z.walkTokens(i,j)}for(var A=r(d.tokens.cells),y;!(y=A()).done;)for(var T=y.value,P=r(T),aa;!(aa=P()).done;){var sa=aa.value;Z.walkTokens(sa,j)}break}case"list":{Z.walkTokens(d.items,j);break}default:d.tokens&&Z.walkTokens(d.tokens,j)}}},Z.parseInline=function(l,j){if(typeof l==="undefined"||l===null)throw new Error("marked.parseInline(): input parameter is undefined or null");if(typeof l!=="string")throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(l)+", string expected");j=Ab({},Z.defaults,j||{}),ic(j);try{var s=gb.lexInline(l,j);return j.walkTokens&&Z.walkTokens(s,j.walkTokens),ib.parseInline(s,j)}catch(b){b.message+=`
Please report this to https://github.com/markedjs/marked.`;if(j.silent)return"<p>An error occurred:</p><pre>"+Ob(b.message+"",!0)+"</pre>";throw b}},Z.Parser=ib,Z.parser=ib.parse,Z.Renderer=za,Z.TextRenderer=Mb,Z.Lexer=gb,Z.lexer=gb.lex,Z.Tokenizer=yb,Z.Slugger=hb,Z.parse=Z;var Lc=Z;return Lc})});const Yh=Pc(Te()),ia=new Yh.default({APIUrl:"https://flintstone.app/.netlify/identity",audience:"",setCookie:!0});const Vc=new WeakMap(),Qc=a=>(...c)=>{const e=a(...c);return Vc.set(e,!0),e},lb=a=>typeof a==="function"&&Vc.has(a);const mc=typeof window!=="undefined"&&window.customElements!=null&&window.customElements.polyfillWrapFlushCallback!==void 0,Wc=(a,c,e=null,h=null)=>{for(;c!==e;){const n=c.nextSibling;a.insertBefore(c,h),c=n}},Vb=(a,c,e=null)=>{for(;c!==e;){const h=c.nextSibling;a.removeChild(c),c=h}};const Da={},na={};const Pa=`{{lit-${String(Math.random()).slice(2)}}}`,pc=`<!--${Pa}-->`,ed=new RegExp(`${Pa}|${pc}`),mb="$lit$";class $c{constructor(a,c){this.parts=[],this.element=c;const e=[],h=[],n=document.createTreeWalker(c.content,133,null,!1);let z=0,t=-1,r=0;const{strings:O,values:{length:N}}=a;for(;r<N;){const H=n.nextNode();if(H===null){n.currentNode=h.pop();continue}t++;if(H.nodeType===1){if(H.hasAttributes()){const Y=H.attributes,{length:fa}=Y;let _=0;for(let K=0;K<fa;K++)fd(Y[K].name,mb)&&_++;for(;_-- >0;){const K=O[r],o=Wb.exec(K)[2],B=o.toLowerCase()+mb,p=H.getAttribute(B);H.removeAttribute(B);const v=p.split(ed);this.parts.push({type:"attribute",index:t,name:o,strings:v}),r+=v.length-1}}H.tagName==="TEMPLATE"&&(h.push(H),n.currentNode=H.content)}else if(H.nodeType===3){const Y=H.data;if(Y.indexOf(Pa)>=0){const fa=H.parentNode,_=Y.split(ed),K=_.length-1;for(let o=0;o<K;o++){let B,p=_[o];if(p==="")B=Wa();else{const v=Wb.exec(p);v!==null&&fd(v[2],mb)&&(p=p.slice(0,v.index)+v[1]+v[2].slice(0,-mb.length)+v[3]),B=document.createTextNode(p)}fa.insertBefore(B,H),this.parts.push({type:"node",index:++t})}_[K]===""?(fa.insertBefore(Wa(),H),e.push(H)):H.data=_[K],r+=K}}else if(H.nodeType===8)if(H.data===Pa){const Y=H.parentNode;(H.previousSibling===null||t===z)&&(t++,Y.insertBefore(Wa(),H)),z=t,this.parts.push({type:"node",index:t}),H.nextSibling===null?H.data="":(e.push(H),t--),r++}else{let Y=-1;for(;(Y=H.data.indexOf(Pa,Y+1))!==-1;)this.parts.push({type:"node",index:-1}),r++}}for(const H of e)H.parentNode.removeChild(H)}}const fd=(a,c)=>{const e=a.length-c.length;return e>=0&&a.slice(e)===c},bd=a=>a.index!==-1,Wa=()=>document.createComment(""),Wb=/([ \x09\x0a\x0c\x0d])([^\0-\x1F\x7F-\x9F "'>=/]+)([ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*))$/;class nc{constructor(a,c,e){this.__parts=[],this.template=a,this.processor=c,this.options=e}update(a){let c=0;for(const e of this.__parts)e!==void 0&&e.setValue(a[c]),c++;for(const e of this.__parts)e!==void 0&&e.commit()}_clone(){const a=mc?this.template.element.content.cloneNode(!0):document.importNode(this.template.element.content,!0),c=[],e=this.template.parts,h=document.createTreeWalker(a,133,null,!1);let n=0,z=0,t,r=h.nextNode();for(;n<e.length;){t=e[n];if(!bd(t)){this.__parts.push(void 0),n++;continue}for(;z<t.index;)z++,r.nodeName==="TEMPLATE"&&(c.push(r),h.currentNode=r.content),(r=h.nextNode())===null&&(h.currentNode=c.pop(),r=h.nextNode());if(t.type==="node"){const O=this.processor.handleTextExpression(this.options);O.insertAfterNode(r.previousSibling),this.__parts.push(O)}else this.__parts.push(...this.processor.handleAttributeExpressions(r,t.name,t.strings,this.options));n++}return mc&&(document.adoptNode(a),customElements.upgrade(a)),a}}const cd=window.trustedTypes&&trustedTypes.createPolicy("lit-html",{createHTML:a=>a}),De=` ${Pa} `;class Db{constructor(a,c,e,h){this.strings=a,this.values=c,this.type=e,this.processor=h}getHTML(){const a=this.strings.length-1;let c="",e=!1;for(let h=0;h<a;h++){const n=this.strings[h],z=n.lastIndexOf("<!--");e=(z>-1||e)&&n.indexOf("-->",z+1)===-1;const t=Wb.exec(n);t===null?c+=n+(e?De:pc):c+=n.substr(0,t.index)+t[1]+t[2]+mb+t[3]+Pa}return c+=this.strings[a],c}getTemplateElement(){const a=document.createElement("template");let c=this.getHTML();return cd!==void 0&&(c=cd.createHTML(c)),a.innerHTML=c,a}}class dd extends Db{getHTML(){return`<svg>${super.getHTML()}</svg>`}getTemplateElement(){const a=super.getTemplateElement(),c=a.content,e=c.firstChild;return c.removeChild(e),Wc(c,e.firstChild),a}}const Cb=a=>a===null||!(typeof a==="object"||typeof a==="function"),oc=a=>Array.isArray(a)||!!(a&&a[Symbol.iterator]);class kc{constructor(a,c,e){this.dirty=!0,this.element=a,this.name=c,this.strings=e,this.parts=[];for(let h=0;h<e.length-1;h++)this.parts[h]=this._createPart()}_createPart(){return new Xc(this)}_getValue(){const a=this.strings,c=a.length-1,e=this.parts;if(c===1&&a[0]===""&&a[1]===""){const n=e[0].value;if(typeof n==="symbol")return String(n);if(typeof n==="string"||!oc(n))return n}let h="";for(let n=0;n<c;n++){h+=a[n];const z=e[n];if(z!==void 0){const t=z.value;if(Cb(t)||!oc(t))h+=typeof t==="string"?t:String(t);else for(const r of t)h+=typeof r==="string"?r:String(r)}}return h+=a[c],h}commit(){this.dirty&&(this.dirty=!1,this.element.setAttribute(this.name,this._getValue()))}}class Xc{constructor(a){this.value=void 0,this.committer=a}setValue(a){a!==Da&&(!Cb(a)||a!==this.value)&&(this.value=a,lb(a)||(this.committer.dirty=!0))}commit(){for(;lb(this.value);){const a=this.value;this.value=Da,a(this)}if(this.value===Da)return;this.committer.commit()}}class bb{constructor(a){this.value=void 0,this.__pendingValue=void 0,this.options=a}appendInto(a){this.startNode=a.appendChild(Wa()),this.endNode=a.appendChild(Wa())}insertAfterNode(a){this.startNode=a,this.endNode=a.nextSibling}appendIntoPart(a){a.__insert(this.startNode=Wa()),a.__insert(this.endNode=Wa())}insertAfterPart(a){a.__insert(this.startNode=Wa()),this.endNode=a.endNode,a.endNode=this.startNode}setValue(a){this.__pendingValue=a}commit(){if(this.startNode.parentNode===null)return;for(;lb(this.__pendingValue);){const c=this.__pendingValue;this.__pendingValue=Da,c(this)}const a=this.__pendingValue;if(a===Da)return;Cb(a)?a!==this.value&&this.__commitText(a):a instanceof Db?this.__commitTemplateResult(a):a instanceof Node?this.__commitNode(a):oc(a)?this.__commitIterable(a):a===na?(this.value=na,this.clear()):this.__commitText(a)}__insert(a){this.endNode.parentNode.insertBefore(a,this.endNode)}__commitNode(a){if(this.value===a)return;this.clear(),this.__insert(a),this.value=a}__commitText(a){const c=this.startNode.nextSibling;a=a==null?"":a;const e=typeof a==="string"?a:String(a);c===this.endNode.previousSibling&&c.nodeType===3?c.data=e:this.__commitNode(document.createTextNode(e)),this.value=a}__commitTemplateResult(a){const c=this.options.templateFactory(a);if(this.value instanceof nc&&this.value.template===c)this.value.update(a.values);else{const e=new nc(c,a.processor,this.options),h=e._clone();e.update(a.values),this.__commitNode(h),this.value=e}}__commitIterable(a){Array.isArray(this.value)||(this.value=[],this.clear());const c=this.value;let e=0,h;for(const n of a)h=c[e],h===void 0&&(h=new bb(this.options),c.push(h),e===0?h.appendIntoPart(this):h.insertAfterPart(c[e-1])),h.setValue(n),h.commit(),e++;e<c.length&&(c.length=e,this.clear(h&&h.endNode))}clear(a=this.startNode){Vb(this.startNode.parentNode,a.nextSibling,this.endNode)}}class Sc{constructor(a,c,e){this.value=void 0,this.__pendingValue=void 0;if(e.length!==2||e[0]!==""||e[1]!=="")throw new Error("Boolean attributes can only contain a single expression");this.element=a,this.name=c,this.strings=e}setValue(a){this.__pendingValue=a}commit(){for(;lb(this.__pendingValue);){const c=this.__pendingValue;this.__pendingValue=Da,c(this)}if(this.__pendingValue===Da)return;const a=!!this.__pendingValue;this.value!==a&&(a?this.element.setAttribute(this.name,""):this.element.removeAttribute(this.name),this.value=a),this.__pendingValue=Da}}class Uc extends kc{constructor(a,c,e){super(a,c,e);this.single=e.length===2&&e[0]===""&&e[1]===""}_createPart(){return new Be(this)}_getValue(){return this.single?this.parts[0].value:super._getValue()}commit(){this.dirty&&(this.dirty=!1,this.element[this.name]=this._getValue())}}class Be extends Xc{}let Yc=!1;(()=>{try{const a={get capture(){return Yc=!0,!1}};window.addEventListener("test",a,a),window.removeEventListener("test",a,a)}catch(a){}})();class Tc{constructor(a,c,e){this.value=void 0,this.__pendingValue=void 0,this.element=a,this.eventName=c,this.eventContext=e,this.__boundHandleEvent=h=>this.handleEvent(h)}setValue(a){this.__pendingValue=a}commit(){for(;lb(this.__pendingValue);){const n=this.__pendingValue;this.__pendingValue=Da,n(this)}if(this.__pendingValue===Da)return;const a=this.__pendingValue,c=this.value,e=a==null||c!=null&&(a.capture!==c.capture||a.once!==c.once||a.passive!==c.passive),h=a!=null&&(c==null||e);e&&this.element.removeEventListener(this.eventName,this.__boundHandleEvent,this.__options),h&&(this.__options=Ce(a),this.element.addEventListener(this.eventName,this.__boundHandleEvent,this.__options)),this.value=a,this.__pendingValue=Da}handleEvent(a){typeof this.value==="function"?this.value.call(this.eventContext||this.element,a):this.value.handleEvent(a)}}const Ce=a=>a&&(Yc?{capture:a.capture,passive:a.passive,once:a.once}:a.capture);class Ae{handleAttributeExpressions(a,c,e,h){const n=c[0];if(n==="."){const t=new Uc(a,c.slice(1),e);return t.parts}if(n==="@")return[new Tc(a,c.slice(1),h.eventContext)];if(n==="?")return[new Sc(a,c.slice(1),e)];const z=new kc(a,c,e);return z.parts}handleTextExpression(a){return new bb(a)}}const lc=new Ae();function Zc(a){let c=ad.get(a.type);c===void 0&&(c={stringsArray:new WeakMap(),keyString:new Map()},ad.set(a.type,c));let e=c.stringsArray.get(a.strings);if(e!==void 0)return e;const h=a.strings.join(Pa);return e=c.keyString.get(h),e===void 0&&(e=new $c(a,a.getTemplateElement()),c.keyString.set(h,e)),c.stringsArray.set(a.strings,e),e}const ad=new Map();const _c=new WeakMap(),Eb=(a,c,e)=>{let h=_c.get(c);h===void 0&&(Vb(c,c.firstChild),_c.set(c,h=new bb(Object.assign({templateFactory:Zc},e))),h.appendInto(c)),h.setValue(a),h.commit()};typeof window!=="undefined"&&(window.litHtmlVersions||(window.litHtmlVersions=[])).push("1.3.0");const u=(a,...c)=>new Db(a,c,"html",lc),ha=(a,...c)=>new dd(a,c,"svg",lc);let R=(a,c=document)=>c.querySelector(a),Ea=a=>JSON.parse(JSON.stringify(a)),_d=(a,c)=>Object.keys(a).forEach(e=>c[e]=a[e]),oa=(a,c)=>R(`[data-index="${a}"]`,c),Qa=(a,c,e)=>a.style.setProperty(`--${c}`,e),cb=(a,c="",e)=>{let h=document.documentElement;if(e==void 0){h.getAttribute(a)?h.setAttribute(a,c):h.removeAttribute(a);return}e&&h.setAttribute(a,c),e||h.removeAttribute(a)},je=(a,c,e={})=>a.forEach(h=>c[h]=c[h]||e),kd=()=>location=location.href,be=(a,c)=>a.split(c)[0].length,he=a=>a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),ee=a=>a.which&&!a.ctrlKey&&!a.metaKey&&!a.altKey&&!a.shiftKey&&a.which!=8,ce=(a,c)=>a.lastIndexOf(a.match(new RegExp(c,"g")).pop()),Cd=a=>{let c=new Blob([JSON.stringify(a)],{type:"application/json"});return URL.createObjectURL(c)},ge=a=>a.replace(/</g,"%3C").replace(/{/g,"B").replace(/expression\(.+?\)/g,""),Kb=(a,c)=>c==void 0?JSON.parse(localStorage.getItem(a)):localStorage.setItem(a,JSON.stringify(c)),Gb=(a,c)=>{let e=a.target;c[e.name]=e.value},sb=a=>{let c=/\s/,{selectionEnd:e,selectionStart:h,value:n}=a,z=n.substr(0,h),t=n.substr(e),r=e-h?n.substring(h,e):z.split(c).pop()+t.split(c).shift();return{selection:r,selectionStart:h,selectionEnd:e,before:z,after:t}};const E=({title:a="",action:c=null,icon:e=null,type:h="",content:n="",className:z="",disabled:t=!1})=>u`
<button type=${h} ?disabled=${t} title=${a} ?data-has-icon=${e} class=${z} @click=${c}>
  ${e?u`${e} ${n}`:n}
</button>`;const U=a=>u`
<modal @click=${()=>Za(!1)} class=mount>
  ${a}
</modal>`;const Ya=(a="Your email or password may be invalid")=>u`
<span>
  ${a}.
  ${E({content:"Try logging in again",className:"link underline",action:()=>G(U(qb()))})}
  or
  ${E({content:"continue using anonymously.",className:"link underline",action:()=>G()})}
</span>`;const pb=({fields:a,formData:c})=>a.map(e=>u`
<label class="smol light">
  ${e}
  <input required=true @input=${h=>Gb(h,c)}
  type=${/email|password/.test(e)?e:"text"}
  name=${e} />
</label>`);const jd=()=>{let a=["email"],c={};return u`
  <form class=mount>
    ${pb({fields:a,formData:c})}
    ${E({className:"primary",content:"Send Recovery Email",action:()=>{D("loading",!0),ia.requestPasswordRecovery(c.email).then(()=>{D("loading",!1),G(U("Recovery email sent. Check your inbox."))}).catch(e=>{va(e),G(U(Ya(e.message)))})}})}
    ${E({className:"link",content:"Back to sign in",action:()=>G(U(qb()))})}
  </form>`};const nb=()=>u`
<div style="display: grid; place-items: center; gap: 2em;">

  <div>
    <h1 class=mount>Welcome to <span style="color: var(--primary)">Flintstone</span>!</h1>
    <p>The tool for creating formal-ish documents on the go.</p>
  </div>

  <form class="mount">
  ${E({content:"Start from scratch",className:"primary",action:()=>Jb.then(a=>{k.savedLocally=!0,k.currentUser.styles=a.currentUser.styles,ob(),G(),la(!0),console.log(k.currentUser.styles)})})}
  ${E({content:"Use the starter template",className:"link",action:()=>Jb.then(a=>{_d(a,k),k.savedLocally=!0,ob(),G(),la(!0)}).catch(a=>{va(a),G(U(Ya(a.message)))})})}
  </form>
  
</div>`;function qb(){let a={};return u`
  <form class=mount>
    <label class="smol light">
      Email
      <input required @input=${c=>Gb(c,a)} type=email name=email />
    </label>
    <label class="smol light">
      Password
      <input required @input=${c=>Gb(c,a)} type=password name=password />
      ${E({className:"link",content:"Forgot Password",action:()=>G(U(jd()))})}
    </label>

    ${E({className:"primary",content:"Sign In",action:()=>{D("loading",!0),ia.login(a.email,a.password,!0).then(()=>{la(!0),kd()}).catch(c=>{va(c),G(U(Ya(c.message)))})}})}
    ${E({className:"link",content:"Continue using anonymously",action:()=>k.savedLocally?G():G(U(nb()))})}
  </form>`}const ld=()=>{let a=ia.currentUser();return u`
  <form class=mount>
    ${E({className:"primary",content:"Sign Out",action:()=>{D("loading",!0),ia.currentUser().logout().then(()=>location=location.href)}})}
    ${E({className:"link",content:u`Continue as <strong>${a.user_metadata.full_name||a.email}</strong>`,action:()=>G()})}
  </form>`};const md=()=>{let a=["name","email","password"],c={};return u`
  <form class=mount>
    ${pb({fields:a,formData:c})}
    ${E({className:"primary",content:"Create Account",action:()=>{D("loading",!0),ia.signup(c.email,c.password,{full_name:c.name}).then(()=>{D("loading",!1),G(U("Confirmation email sent. Check your inbox."))}).catch(e=>{va(e),G(U(Ya(e.message)))})}})}
    ${E({className:"link",content:"Continue using anonymously",action:()=>k.savedLocally?G():G(U(nb()))})}
  </form>`};const ma=({content:a,className:c="line",color:e=""})=>ha`
<svg class=${c} style=${e?`--color:var(--${e})`:""} xmlns="http://www.w3.org/2000/svg" viewBox="0 0 216 216">
  ${a}
</svg>`;const $b=()=>{k.loading=!0,k.showPreview=!0,G(),setTimeout(()=>{print(),D("loading",!1)},500)};let yc="flintstone_data",zc="flintstone_preferences",$d={expandedAdjustments:[],shortcutReady:!1,exportSelection:{},forImport:{},importSelection:{},intellisense:{logger:"",suggestions:[]},currentUser:{documents:[{id:"New Document",body:""}],datasets:[{id:"New Data",fields:[["",""]]}],styles:{}}},ae={dark:!1,open_pane:void 0,show_header_nav:!1},La=["documents","datasets"];const Bd=(a,c,e)=>{let h=`${a.id}_${c}`,n=z=>{z.target.checked?k.exportSelection[e].push(Ea(a)):k.exportSelection[e]=k.exportSelection[e].filter(t=>t.id!=a.id),G(U(rb()))};return u`
  <label class="flex" style="margin-bottom: .5rem">
    <input name=${h} type=checkbox @input=${n} />
    <h3>${a.id}</h3>
  </label>`};const sc=a=>{var h;let c,e=new FileReader();k.forImport={},((h=a.dataTransfer)==null?void 0:h.items)?(a.preventDefault(),c=a.dataTransfer.items[0].getAsFile()):a.dataTransfer?(a.preventDefault(),c=a.dataTransfer.files[0]):c=a.target.files[0],e.onerror=va,e.onload=function(){let n=JSON.parse(this.result);La.map(z=>k.forImport[z]=n[z]||[]),k.importSelection=Ea(k.forImport),k.loading=!1,G(U(Ra()))},D("loading",!0),e.readAsText(c)};const Ra=()=>Object.keys(k.forImport).length?u`
  <form class=mount>
    ${La.map(a=>Yb(k.forImport,a,"import"))}
    ${E({className:"primary",content:"Import Selected",disabled:!La.some(a=>{var c;return(c=k.importSelection[a])==null?void 0:c.length}),action:()=>{for(let a of La)k.currentUser[a]=k.currentUser[a].concat(k.importSelection[a]);D("forImport",{})}})}
    ${E({className:"link",content:"Back to editing",action:()=>G()})}
  </form>`:u`
  <input class=mount type=file accept=".json" @input=${sc} @dragleave=${a=>{a.preventDefault(),G()}} @drop=${sc} />
  <div class=mount>
    <h3 style="pointer-events: none;">Click or drop a file to import it.</h3>
    <br />
    ${E({className:"link",content:"Back to editing",action:()=>G()})}
  </div>`;const Dd=(a,c,e)=>{let h=`${a.id}_${c}`,n=z=>{z.target.checked?k.importSelection[e].push(Ea(a)):k.importSelection[e]=k.importSelection[e].filter(t=>t.id!=a.id),G(U(Ra()))};return u`
  <label class=flex style="margin-bottom: .5rem">
    <input checked name=${h} type=checkbox @input=${n} />
    <h3>${a.id}</h3>
  </label>`};const Yb=(a,c,e)=>{var h;return u`
<div style="width: 100%">
  ${a[c]&&((h=Object.keys(a[c]))==null?void 0:h.length)?u`
      <label class="smol light" style="margin-bottom: .5rem;">${c}</label>
      ${a[c].map((n,z)=>{if(e=="import")return Dd(n,z,c);if(e=="export")return Bd(n,z,c)})}`:na}
</div>`};const rb=()=>u`
<form class=mount>
  ${La.map(a=>Yb(k.currentUser,a,"export"))}
  <a class="button primary" 
  ?disabled=${!La.some(a=>{var c;return(c=k.exportSelection[a])==null?void 0:c.length})} 
  href=${Cd(k.exportSelection)} 
  download="Flintstone Export (${new Date().toLocaleDateString()})">
    Export Selected
  </a>
  ${E({className:"link",content:"Back to editing",action:()=>G()})}
</form>`;const ea={add:ma({content:ha`<line x1="36" y1="108" x2="180" y2="108" /><line x1="108" y1="180" x2="108" y2="36" />`}),delete:ma({content:ha`<line x1="48" y1="48" x2="168" y2="168"/><line x1="48" y1="168" x2="168" y2="48"/>`,color:"error"}),duplicate:ma({content:ha`<rect x="90.4" y="90.71" width="105.31" height="105.31" rx="21.57"/><path d="M157.59,65.77V41.29A21.58,21.58,0,0,0,136,19.71H41A21.58,21.58,0,0,0,19.4,41.29v95A21.58,21.58,0,0,0,41,157.9H65.46"/>`}),up:ma({content:ha`<polyline points="184.69 146.81 108 70.12 31.31 146.81" />`}),down:ma({content:ha`<polyline points="184.69 70.12 108 146.81 31.31 70.12" />`}),right:ma({content:ha`<path d="M73.67,26.62,155.05,108,73.67,189.38" />`}),reset:ma({content:ha`<polyline points="37 11.6 37 71.34 96.75 71.34"/><path d="M47.33,172.61a81.82,81.82,0,1,0,0-115.72l-5.77,5.77"/>`}),check:ma({content:ha`<polyline points="182.48 34.41 89.53 182.33 36.66 138.35" />`,color:"green"}),export:ma({content:ha`<line x1="119.65" y1="65.2" x2="162.5" y2="65.2"/><circle cx="184.18" cy="65.2" r="21.05"/><line x1="103.79" y1="103.51" x2="134.08" y2="133.81"/><circle cx="149.42" cy="149.14" r="21.05"/><line x1="65.48" y1="119.38" x2="65.48" y2="162.22"/><circle cx="65.48" cy="183.91" r="21.05"/><circle cx="65.48" cy="65.2" r="53.54"/>`,color:"purple"}),import:ma({content:ha`<line x1="89.77" y1="126.49" x2="69.49" y2="146.77"/><circle cx="32.16" cy="183.47" r="21.04"/><circle cx="32.16" cy="92.12" r="21.04"/><circle cx="123.51" cy="183.47" r="21.04"/><circle cx="151.05" cy="64.58" r="53.5"/>`,color:"green"}),theme:ma({content:ha`<circle cx="108" cy="108" r="80"/><line x1="108" y1="28" x2="108" y2="188"/><path d="M173,147.3H111M186,108H111m62-39.3H111"/>`}),adjust:ma({content:ha`<path d="M108,108l59.4-59.4M126.81,26.13a84,84,0,1,0,63.05,63.06" />`,color:"yellow"}),print:ma({content:ha`<path d="M158.2,173,108,195.41,57.8,173"/><rect x="31" y="97.95" width="154" height="48.28"/><polyline points="57.8 70.34 57.8 29.34 158.21 29.34 158.21 70.34"/>`,color:"primary-80"}),preview:ma({content:ha`<path d="M37.41,135.13H93.55m29.17,0h56.15M37.28,179.07H179M37.28,36.93H179V91.19H37.28Z"/>`,color:"purple"}),edit:ma({content:ha`<path d="M131.68,55,161,25.6,190.4,55,161,84.32ZM25.6,190.4l35.89-6.54L161,84.32,131.68,55,32.14,154.51Zm89.1,3.66h54.1a21.61,21.61,0,0,0,21.6-21.61V115m-89.09-93H47.2A21.61,21.61,0,0,0,25.6,43.55V101"/>`,color:"green"}),keyboard:ma({content:ha`<path d="M51.81,94.22H67.05m35.06,0h62.36m-112.66,40H96.52m37.06,0h30.89M15.8,55.63H200.48V172.81H15.8Z"/>`}),documents:ma({content:ha`<path d="M185,65.16V203.22H33V13.78H133.65ZM133.65,13.78V65.16H185ZM68.3,64.35h32.32M68.3,154.49h81.79M68.3,109.42h81.79"/>`,color:"purple"}),data:ma({content:ha`<rect x="143.48" y="18.99" width="52.53" height="52.53" rx="13.53"/><rect x="126.11" y="131.48" width="52.53" height="52.53" rx="13.53"/><rect x="34.99" y="131.48" width="52.53" height="52.53" rx="13.53"/><rect x="34.99" y="40.36" width="52.53" height="52.53" rx="13.53"/>`,color:"primary-80"})};class pa{constructor(a,c=()=>null){this.elements=Array.isArray(a)?a:[a],this.modifier=c,this.duration=300}added(){let a=this.elements[0];a.style.transition="none",a.style.opacity=0,Qa(a,"translateY",1),Qa(a,"scaleY",0),setTimeout(()=>{a.style.transition="",a.style.opacity=1,Qa(a,"translateY",0),Qa(a,"scaleY",1)},10)}removed(){let{elements:a,duration:c,modifier:e}=this,h=a[0];h.style.opacity=0,Qa(h,"scaleY",0),setTimeout(()=>{e(),h.style.transition="none",h.style.opacity=1,Qa(h,"scaleY",1),setTimeout(()=>h.style.transition="",c)},c)}swapped(a){let[c,e]=this.elements;Qa(c,"translateY",a),Qa(e,"translateY",a*-1),this.elements.map(h=>h.style.transition="none"),setTimeout(()=>{this.elements.map(h=>{h.style.transition="",Qa(h,"translateY",0)}),this.modifier()},10)}}const _b=a=>{D("currentDocument",k.currentUser.documents[a])};const Zb=()=>{var n;let a={id:"New Document",body:""},c=k.currentUser.documents.length;k.currentUser.documents.push(a),_b(c);let e=oa(c,R(".documents .sets")),h=new pa(e);h.added(),(n=R(".documents [data-active] input"))==null?void 0:n.focus(),la()};const de=(a,c)=>{let e=R(".editor");if(document.activeElement!=e)return;let{selection:h,selectionStart:n,selectionEnd:z,before:t,after:r}=sb(e),O=a.length,N=O*-1,H=c.length,Y=c.length*-1,fa=/\s/,_=!1;if(z-n>0){let o=t.slice(N)==a,B=r.slice(0,H)==c;_=o&&B,_?k.currentDocument.body=t.slice(0,N)+h+r.slice(H):k.currentDocument.body=t+a+h+c+r}if(z-n==0){let o=t.substr(0,ce(t,fa)+1),B=r.substr(be(r,fa)),p=h.slice(0,O)==a,v=h.slice(Y)==c;_=p&&v,h=_?h.slice(O,Y):a+h+c,k.currentDocument.body=o+h+B}e.value=k.currentDocument.body,la();let K=_?-1:1;e.selectionStart=n+O*K,e.selectionEnd=z+H*K};const Hb=(a,c)=>{document.activeElement.blur();let e=c>0?"down":"up",h=k.currentDataset.fields[a],n=a+c,z=R(".fields"),t=oa(a,z),r=oa(n,z);k.currentDataset.fields.splice(a,1),k.currentDataset.fields.splice(n,0,h),D("currentDataset",k.currentDataset,!0);let O=new pa([t,r],()=>R(`[title*="${e}"]`,r).focus());O.swapped(c)};let bc=(a,c)=>{if(document.activeElement!=R(".editor"))return;a.preventDefault(),de(c,c)},ie=(a,c)=>{let e=document.activeElement.closest(".field");if(e){a.preventDefault();let h=parseInt(e.getAttribute("data-index"));Hb(h,c)}};const Fb={b:{action:a=>bc(a,"**"),description:"format selection as bold",prefix:"ctrl"},i:{action:a=>bc(a,"_"),description:"format selection as italics",prefix:"ctrl"},"`":{action:a=>bc(a,"`"),description:"format selection as source code",prefix:"ctrl"},Delete:{action:a=>bc(a,"~"),description:"format selection as strikethrough",prefix:"ctrl"},Z:{action:()=>{ya("zen",!ja.zen),G()},description:"toggle zen mode",prefix:"ctrl+shift"},E:{action:a=>{a.preventDefault(),G(U(rb()))},description:"start an export",prefix:"ctrl+shift"},M:{action:a=>{a.preventDefault(),G(U(Ra()))},description:"start an import",prefix:"ctrl+shift"},N:{action:a=>{a.preventDefault(),Zb()},description:"add a new document",prefix:"ctrl+shift"},s:{action:a=>{a.preventDefault(),la()},description:"trigger a save",prefix:"ctrl+shift"},p:{action:a=>{a.preventDefault(),$b()},description:"print your document",prefix:"ctrl"},ArrowUp:{action:a=>ie(a,-1),description:"move the current field up",prefix:"ctrl"},ArrowDown:{action:a=>ie(a,1),description:"move the current field down",prefix:"ctrl"}};const Ed=()=>u`
<div class=form>
  <table>
    <thead>
      <td>Shortcut</td>
      <td>Description</td>
    </thead>
    ${Object.entries(Fb).map(([a,{prefix:c,description:e}])=>u`
    <tr>
      <td>
        <span class=light>${c}</span> <strong>${a.toLowerCase()}</strong>
      </td>
      <td>${e}</td>
    </tr>
    `)}
  </table>
  <br />
  ${E({className:"link",content:"Close Keyboard Shortcuts",action:()=>G()})}
</div>`;const tb=(a,c)=>{c==void 0?a==ja.open_pane?ya("open_pane",void 0):ya("open_pane",a):c?ya("open_pane",a):ya("open_pane",void 0),G()};const Od=()=>u`
<nav class=header-nav>
  <desktop-only>
  ${E({content:`${ja.open_pane=="styles"?"Close":"Open"} style editor`,icon:ea.adjust,action:()=>{Za(!1),tb("styles")}})}
  </desktop-only>
${E({content:"Print current document",icon:ea.print,action:$b})}
${E({content:"Start an import",icon:ea.import,action:()=>G(U(Ra()))})}
${E({content:"Start an export",icon:ea.export,action:()=>{k.exportSelection={},La.map(a=>k.exportSelection[a]=[]),G(U(rb()))}})}
${E({icon:ea.theme,content:u`Switch to <light>dark</light><dark>light</dark> theme`,action:()=>ya("dark",!ja.dark)})}
${E({icon:ea.keyboard,content:u`Keyboard shortcuts`,action:()=>G(U(Ed()))})}
</nav>`;const Pd=()=>u`
<div id=logo>
  <light>
    <desktop-only>
      <img alt="Flintstone logo" src="logo.svg" />
    </desktop-only>
    <mobile-only>
      <img alt="Flintstone logo" src="logo-icon.svg" />
    </mobile-only>
  </light>
  <dark>
    <desktop-only>
      <img alt="Flintstone logo" src="logo-light.svg" />
    </desktop-only>
    <mobile-only>
      <img alt="Flintstone logo" src="logo-icon-light.svg" />
    </mobile-only>
  </dark>
</div>`;const Ib=()=>{let a=ia.currentUser();return u`
  ${Pd()}
  ${a?na:E({className:"primary",content:"Sign up",action:()=>G(U(md()))})}
  ${E({className:"link",content:a?u`Signed in as <strong>${a.user_metadata.full_name||a.email}</strong>`:"Sign in",action:a?()=>G(U(ld())):()=>G(U(qb()))})}
  ${k.savedLocally?u`<separator></separator>`:na}
  ${k.savedLocally?E({title:`${ja.show_header_nav?"Close":"Open"} menu`,content:ma({content:ha`
            <line y1="30" x2="100%" y2="30"/>
            <line y1="50%" x2="100%" y2="50%"/>
            <line y1="186" x2="100%" y2="186"/>`}),className:"icon menu-toggle",action:()=>Za()}):na}
  ${Od()}`};const Za=a=>{a==void 0?(ya("show_header_nav",!ja.show_header_nav),Eb(Ib(),R("header"))):(ya("show_header_nav",a),Eb(Ib(),R("header")))};const Xb=a=>{D("currentDataset",k.currentUser.datasets[a])};const rd=()=>{var n;let a={id:"New Data",fields:[["",""]]},c=k.currentUser.datasets.length;k.currentUser.datasets.push(a),Xb(c);let e=oa(c,R(".data .sets")),h=new pa(e);h.added(),(n=R(".data [data-active] input"))==null?void 0:n.focus(),la()};const sd=()=>{k.currentDataset.fields.push(["",""]),D("currentDataset",k.currentDataset,!0);let a=oa(k.currentDataset.fields.length-1,R(".fields"));new pa(a).added()};const td=a=>{let c=k.currentUser.datasets[a],e=Ea(c);e.id=c.id+" copy",k.currentUser.datasets.push(e),D("currentUser",k.currentUser),D("currentDataset",e,!0);let h=oa(a+1,R(".data .sets")),n=new pa(h);n.added()};const ud=a=>{let c=k.currentUser.datasets,e=c[a];if(!confirm(`Are you sure you want to delete ${e.id}?`))return;let h=oa(a,R(".data .sets")),n=new pa(h,()=>{c.splice(a,1),k.currentUser.datasets=c,D("currentDataset",k.currentUser.datasets[0],!0)});n.removed()};const vd=a=>{k.currentDataset.id=a,D("currentDataset",k.currentDataset,!0)};const yd=a=>{let c=oa(a,R(".fields")),e=new pa(c,()=>{k.currentDataset.fields.splice(a,1),D("currentDataset",k.currentDataset,!0)});e.removed()};const zd=(a,c)=>{let[e,h]=k.currentDataset.fields[a];k.currentDataset.fields[a]=[c,h],D("currentDataset",k.currentDataset,!0)};const Ad=(a,c)=>{let[e,h]=k.currentDataset.fields[a];k.currentDataset.fields[a]=[e,c],D("currentDataset",k.currentDataset,!0)};const wd=([a,c],e,h)=>{let n=`${h}_${e}_key`,z=`${h}_${e}_value`;return u`
  <li class=field data-index=${e}>
    <key>
      <input 
      title="Rename this field"
      type=text
      .value=${a} 
      id=${n}
      @input=${t=>zd(e,t.target.value)} />
    </key>
    <value>
      <input 
      title="Change the value this field"
      type=text
      .value=${c} 
      id=${z}
      @input=${t=>Ad(e,t.target.value)} />
    </value>
    <actions>
      <div class=join-buttons>
        ${E({title:"Move field up",className:"icon",disabled:e==0,icon:ea.up,action:()=>Hb(e,-1)})}
        ${E({title:"Move field down",className:"icon",disabled:e==k.currentDataset.fields.length-1,icon:ea.down,action:()=>Hb(e,1)})}
      </div>
      ${E({title:"Delete field",className:"icon",icon:ea.delete,action:()=>yd(e)})}
    </actions>
  </li>`};const xd=()=>{let a=k.currentDataset;return u`
  <div class="pane data">
    <label class="smol light" for="currentDatasetTitle">Current data</label>
    ${a?u`
      <div class="selection mount">

        <div class="selection__header">
          <h2>
            <input 
            id=currentDatasetTitle
            title="Rename the current data set"
            type=text 
            .value=${a.id} 
            @input=${c=>vd(c.target.value)} />
          </h2>
        </div>

        <ul class="fields">
        ${a.fields.length?u`
            <li>
              <label class="smol light">Name</label>
              <label class="smol light">Value</label>
              <span></span>
            </li>`:na}
        ${a.fields.map((c,e)=>wd(c,e,a.id))}
        ${E({action:sd,className:"link",icon:ea.add,content:"Add Field"})}
        </ul>

      </div>`:na}

    <label class="smol light">All data</label>
    <ul class="sets mount">
      ${k.currentUser.datasets.map((c,e)=>u`
      <li data-index=${e}>
        ${E({title:`Select ${c.id}`,className:"link",action:()=>Xb(e),content:u`<h4>${c.id}</h4>`})}
        ${E({title:`Duplicate ${c.id}`,className:"icon",action:()=>td(e),icon:ea.duplicate})}
        ${k.currentUser.datasets.length>1?E({title:`Delete ${c.id}`,className:"icon",action:()=>ud(e),icon:ea.delete}):na}
      </li>`)}
      <button @click=${rd}>Add Data</button>
    </ul>
  </div>`};const Gd=a=>{let c=k.currentUser.documents,e=c[a];if(!confirm(`Are you sure you want to delete ${e.id}?`))return;let h=oa(a,R(".documents .sets")),n=new pa(h,()=>{c.splice(a,1),k.currentUser.documents=c,D("currentDocument",k.currentUser.documents[0],!0)});n.removed()};const Hd=a=>{k.currentDocument.id=a,D("currentDocument",k.currentDocument,!0)};const Id=a=>{let c=k.currentUser.documents[a],e=Ea(c);e.id=c.id+" copy",k.currentUser.documents.push(e),D("currentUser",k.currentUser),D("currentDocument",e,!0);let h=oa(k.currentUser.documents.length-1,R(".documents .sets")),n=new pa(h);n.added()};let tc=a=>`page_${a+1}`,Je=/\n\s*\-{3,}\s*\n/;const Fd=()=>{let a=k.currentDocument.body,c=n=>{var z;D("showPreview",!0),(z=R("#"+tc(n)))==null?void 0:z.scrollIntoView()},e=n=>{let z=n.match(/.+?(\n|$)/)[0],t=z.trim();return t.replace(/^[^A-z0-9]*|[^A-z0-9\{\}]*$/g,"")},h=a.split(Je);return h.length||(h=[a]),u`
  <div class=toc-wrapper>
    <h3>Pages</h3>
    <ol class=toc>
      ${h.map((n,z)=>u`
        <li>
          <button class=link @click=${()=>c(z)}>
            ${z+1}. ${e(n)}
          </button>
        </li>`)}
    </ol>
  </div>`};const Jd=()=>{let a=k.currentDocument;return u`
  <div class="pane documents">
    <label class="smol light" for="currentDocumentTitle">Current document</label>
    ${a?u`
      <div class="selection mount">

        <div class="selection__header">
          <h2>
            <input 
            type=text 
            id=currentDocumentTitle
            .value=${a.id} 
            @input=${c=>Hd(c.target.value)} />
          </h2>
        </div>
        
        ${a.body.length?Fd():na}
      </div>
      `:na}

    <label class="smol light">All documents</label>
    <ul class="sets mount">
      ${k.currentUser.documents.map((c,e)=>u`
      <li data-index=${e}>
        ${E({title:`Select ${c.id}`,className:"link",action:()=>_b(e),content:u`<h4>${c.id}</h4>`})}
        ${E({title:`Duplicate ${c.id}`,className:"icon",action:()=>Id(e),icon:ea.duplicate})}
        ${k.currentUser.documents.length>1?E({title:`Delete ${c.id}`,className:"icon",action:()=>Gd(e),icon:ea.delete}):na}
      </li>`)}
      <button @click=${Zb}>Add Document</button>
    </ul>
  </div>`};const Rc=new WeakMap(),Ub=Qc(a=>c=>{if(!(c instanceof bb))throw new Error("unsafeHTML can only be used in text bindings");const e=Rc.get(c);if(e!==void 0&&Cb(a)&&a===e.value&&c.value===e.fragment)return;const h=document.createElement("template");h.innerHTML=a;const n=document.importNode(h.content,!0);c.setValue(n),Rc.set(c,{value:a,fragment:n})});const Gk=Pc(Se()),Hk=Pc(ef());function Ie(a){for(let[c,e]of k.currentDataset.fields)if(c==a)return e}function uc(a){return Ie(a.slice(1,-1).trim(),k.currentDataset.fields)}let vc=/\{.+?\}/g;const od=()=>{if(!k.currentDocument.body.length)return u`
    <div class=preview__page>
      <p>
        Write something in <a class=link @click=${()=>D("showPreview",!1)}>the editor</a> to see it
        show
        up here.
      </p>
    </div>`;let a=k.currentDocument.body.replace(vc,uc),c=Gk.sanitize(Hk.default(a));return c.split("<hr>").map((e,h)=>u`
      <div id=${tc(h)} class=preview__page>
        ${Ub(e)}
      </div>`)};let Le=([a,c])=>{if(/content|font-family/i.test(a))if(c.length)c='"'+c.replace(/"/g,'\\"')+'"';else return;return c=c.replace(vc,uc),[a,ge(c)].join(":")};const nd=()=>`\r
<style>\r
${Object.entries(k.currentUser.styles).map(([a,c])=>`.preview ${a} {\r
        ${Object.entries(c).map(Le).join(";")}\r
      }`).join("")}\r
</style>`;const fe=()=>{let a=k.intellisense,c=R(".intellisense"),e=R(".intellisense-mapper"),h=R(".first-lines",e),n=R(".last-line",e),z=R(".editor"),{before:t}=sb(z),r=t.split(/\n/),O=r.splice(-1,1),N=t.split("{").pop().trim(),H=new RegExp(he(N),"i");h.innerText=r.join(`
`)+`
`,n.innerText=O;let{offsetHeight:Y,offsetWidth:fa,offsetLeft:_,offsetTop:K}=n,{scrollWidth:o}=c,B=K+Y,p=_+fa;p+o>innerWidth&&(p=p-o),c.style.transform=`translate3d(${p}px, ${B-z.scrollTop}px, 0)`,a.suggestions=k.currentDataset.fields.filter(v=>H.test(v[0])),D("intellisense",a)};let Ld=a=>{k.currentDocument.body=a.target.value,fe(),la()},Kd=a=>{k.shortcutReady=!1,k.intellisense.logger="",ja.zen&&(ya("zen",!1),G())},Md=a=>{let c=k.intellisense,e=a.key;ee(a)&&(c.logger+=e);switch(e){case"Backspace":c.logger=c.logger.slice(0,-1);break;case"{":c.logger+=e;break;case"}":c.logger="";break}};const Nd=()=>{var a;return u`
<div class='intellisense-mapper'>
  <span class='first-lines'></span>
  <span class='last-line'></span>
</div>

<ul class=intellisense ?data-active=${((a=k.intellisense.suggestions)==null?void 0:a.length)&&k.currentDocument.body.includes("{")&&document.activeElement==R(".editor")}>
  ${k.intellisense.suggestions.map(([c,e])=>u`
  <li>${E({content:u`<strong>${c}</strong> <span class="light">(${e})</span>`,action:()=>{let h=R(".editor"),{before:n,after:z}=sb(h),t=n.replace(/\{(.(?!\{))*?$/,"")+"{ "+c+" }";h.value=t+z,k.currentDocument.body=h.value,k.intellisense={logger:"",suggestions:[]},D("intellisense",k.intellisense,!0),h.focus(),h.setSelectionRange(t.length,t.length)}})}</li>`)}
</ul>`};const pd=()=>u`
<textarea class=editor placeholder="Start typing when you're ready..." @keyup=${Md}
  @focusout=${Kd} @input=${Ld}>${k.currentDocument.body}</textarea>
${Nd()}
`;const qd=()=>u`
<toolbar>
  ${E({title:"Show Editor",className:"icon"+(k.showPreview?"":" active"),action:()=>D("showPreview",!1),icon:ea.edit})}
  ${E({title:"Show Preview",className:"icon"+(k.showPreview?" active":""),action:()=>D("showPreview",!0),icon:ea.preview})}
  <a 
  title="Format your text like a pro with the Markdown cheatsheet."
  class="button icon" 
  rel="noopener"
  target=_blank 
  href="https://www.markdownguide.org/cheat-sheet/">
    ❓
  </a>
</toolbar>

${k.showPreview?u`
    <div class=preview>
      <div class=preview__wrapper>
        ${od()}
      </div>
    </div>
    ${Ub(nd())}`:pd()}`;let vb=["font-family","font-size","font-weight","line-height","letter-spacing","text-transform","text-align","color"],cc=["font-weight","text-transform","color"],le=["content","color","font-size","font-weight","text-transform","letter-spacing","text-align"],me=["padding-left","padding-right","color","list-style"],ne=["font-size","font-weight","text-transform","text-align","color"],ub={".preview__wrapper":{normieName:"global",useAdjustments:["font-family","font-size","line-height","--vertical-space"]},".preview__page":{normieName:"pages",useAdjustments:["padding-top","padding-bottom","padding-left","padding-right"]},".preview__wrapper::before":{normieName:"header",useAdjustments:le},".preview__wrapper::after":{normieName:"footer",useAdjustments:le},h1:{normieName:"level 1 headings",useAdjustments:vb},h2:{normieName:"level 2 headings",useAdjustments:vb},h3:{normieName:"level 3 headings",useAdjustments:vb},h4:{normieName:"level 4 headings",useAdjustments:vb},h5:{normieName:"level 5 headings",useAdjustments:vb},h6:{normieName:"level 6 headings",useAdjustments:vb},a:{normieName:"links",useAdjustments:cc},strong:{normieName:"bold text",useAdjustments:cc},em:{normieName:"italic Text",useAdjustments:cc},del:{normieName:"strikethroughs",useAdjustments:cc},ul:{normieName:"unordered lists",useAdjustments:me},ol:{normieName:"ordered lists",useAdjustments:me},blockquote:{normieName:"block quotes",useAdjustments:["color","padding-left","padding-right","border-width","border-color"]},img:{normieName:"images",useAdjustments:["width"]},th:{normieName:"table headings",useAdjustments:ne},td:{normieName:"table cells",useAdjustments:ne}};class Ac{constructor(a){this.type=a}}class dc extends Ac{constructor({placeholder:a}){super("text");this.placeholder=a||""}}class Ma extends Ac{constructor({min:a,max:c,step:e,unit:h}){super("range");this.min=a||0,this.max=c||100,this.step=e||1,this.unit=h||""}}class Bc extends Ac{constructor({options:a,defaultValue:c}){super("select");this.options=a||[],this.defaultValue=c||""}}let Td={content:new dc({placeholder:"{ date }"}),"font-family":new dc({placeholder:"Helvetica"}),"font-size":new Ma({min:8,max:72,step:1,unit:"px"}),"font-weight":new Ma({min:300,max:900,step:50}),"letter-spacing":new Ma({min:-5,max:5,step:.2,unit:"px"}),"line-height":new Ma({min:.5,max:3,step:.1}),"--vertical-space":new Ma({min:0,max:56,step:1,unit:"px"}),"text-transform":new Bc({defaultValue:"none",options:["capitalize","uppercase","lowercase","none"]}),"text-align":new Bc({defaultValue:"left",options:["left","center","right"]}),width:new Ma({min:0,max:100,step:1,unit:"%"}),"list-style":new Bc({defaultValue:"disc",options:["disc","circle","square","decimal","lower-alpha","upper-alpha","lower-roman","upper-roman","none"]}),color:new dc({placeholder:"Tomato"}),"border-color":new dc({placeholder:"DodgerBlue"}),"border-width":new Ma({min:0,max:10,step:.5,unit:"px"}),"padding-top":new Ma({min:0,max:56,step:1,unit:"px"}),"padding-bottom":new Ma({min:0,max:56,step:1,unit:"px"}),"padding-left":new Ma({min:0,max:56,step:1,unit:"px"}),"padding-right":new Ma({min:0,max:56,step:1,unit:"px"})};const ac=(a,c,e)=>{k.currentUser.styles[a][c]=e,D("currentUser",k.currentUser,!0)};let xc=a=>a.replace(/-+/g," ").trim(),Ke=a=>parseFloat(a.replace(/turn|deg|pt|px|rem|em|ch|in|vw|vh|%/g,"").trim()),Ud=([a,{normieName:c}],[e,{min:h,max:n,step:z,unit:t}])=>{let r=k.currentUser.styles[a][e]||"",O=Ke(r),N=xc(e);return u`
  <label class="smol light">
    <span class=label>
      <span class=label__name>${N}</span>
      <span class=label__value>${r||""}</span>
    </span>
    <input 
    title='Change ${c} ${N}'
    min=${h}
    max=${n}
    step=${z}
    .value=${O}
    type=range
    @input=${H=>ac(a,e,H.target.value+t)} />
  </label>`},Wd=([a,{normieName:c}],[e,{placeholder:h}])=>{let n=k.currentUser.styles[a][e],z=xc(e);return u`
  <label class="smol light">
    <span class=label>
      <span class=label__name>${z}</span>
    </span>
    <input
    title='Change ${c} ${z}'
    placeholder=${h}
    .value=${n||""}
    type=text
    @input=${t=>ac(a,e,t.target.value)} />
  </label>`},Vd=([a,{normieName:c}],[e,{options:h,defaultValue:n}])=>{let z=k.currentUser.styles[a][e]||n,t=xc(e);return u`
  <label class="smol light">
    <span class=label>
      <span class=label__name>${t}</span>
    </span>
    <select
    title='Change ${c} ${t}'
    .value=${z||""}
    @input=${r=>ac(a,e,r.target.value)}>
      ${h.map(r=>u`<option ?selected=${r==z}>${r}</option>`)}
    </select>
  </label>`};const wc=a=>{let c=document.createElement("style");c.id="temp",c.innerHTML=`\r
  .preview ${a} {\r
    box-shadow: 0 0 0 var(--borderWidth) var(--primary-80);\r
    border-radius: var(--radius);\r
    transition: box-shadow var(--transition);\r
  }`,document.body.appendChild(c)};const Xd=a=>{Jb.then(c=>{let e=k.currentUser.styles;e[a]=Ea(c.currentUser.styles[a]),k.expandedAdjustments.push(ub[a].normieName),D("currentUser",k.currentUser,!0)})};const Yd=a=>{let c=k.expandedAdjustments,e=c.includes(a);e?c.splice(c.indexOf(a),1):c.push(a),D("expandedAdjustments",c)};const Zd=([a,{normieName:c,useAdjustments:e}])=>{let h=k.expandedAdjustments.includes(c);return u`
  <div 
  class=adjustment 
  ?data-expanded=${h}
  @mouseenter=${()=>wc(a)} 
  @touchstart=${()=>wc(a)}
  @mouseleave=${()=>{var n;return(n=R("#temp"))==null?void 0:n.remove()}}
  @touchend=${()=>{var n;return(n=R("#temp"))==null?void 0:n.remove()}}>

    <button class=adjustment__header @click=${()=>Yd(c)}>
      <h3 class=adjustment__header--title>${c}</h3>
      <div class=adjustment__header--actions>
      ${E({title:`Reset ${c.replace(/s$/,"")} styles`,className:"icon",disabled:!h,icon:ea.reset,action:()=>Xd(a)})}
      </div>
    </button>
    
    ${h?Object.entries(Td).filter(([n])=>e.includes(n)).map(([n,z])=>{let t=[a,{normieName:c,useAdjustments:e}],r=[n,z];switch(z.type){case"range":return Ud(t,r);case"text":return Wd(t,r);case"select":return Vd(t,r)}}):na}
  </div>`};const Qd=()=>u`
<div class="styles">
  <div class=styles__header>
  ${k.showPreview?u`<p class=light>Change the look and feel of your document here.</p>`:u`
      <p class=light>
        <button class="link primary" @click=${()=>D("showPreview",!0)}>Show the document preview</button> to see your
        changes.
      </p>`}
  </div>
  <div class=adjustments>${Object.entries(ub).map(Zd)}</div>
</div>`;const Rd=()=>u`
<main 
?data-zen=${ja.zen}
@click=${()=>Za(!1)}
@dragleave=${G}
@dragenter=${()=>G(U(Ra()))}
@dragover=${a=>a.preventDefault()}>
  <section class="aside left">${Jd()}</section>
  <section class="center">${qd()}</section>
  <section class="aside right">${xd()}</section>
  ${Qd()}
</main>`;const Sd=()=>u`
<nav class=mobile-nav>
  ${E({title:"Open documents",className:"icon",icon:ea.documents,action:()=>tb("documents",ja.open_pane!="documents")})}
  ${E({title:"Open data",className:"icon",icon:ea.data,action:()=>tb("data",ja.open_pane!="data")})}
  ${E({title:"Open styles",className:"icon",icon:ea.adjust,action:()=>tb("styles",ja.open_pane!="styles")})}
</nav>`;let Me=ia.currentUser(),ca=Kb(yc)||$d,ke=setTimeout(()=>0,0);const k=ca;let qc=Me==null?void 0:Me.getUserData(),Jb=fetch("/defaults.json").then(a=>a.json()),ja=Kb(zc)||ae;function ob(){ca.currentDataset=ca.currentUser.datasets[0],ca.currentDocument=ca.currentUser.documents[0],ca.savedLocally=ca.savedLocally||!1,ca.showPreview=ca.showPreview||!1,ca.showStyles=ca.showStyles||!1,ca.intellisense=ca.intellisense||{suggestions:[],logger:""},ca.expandedAdjustments=ca.expandedAdjustments||["global","pages"],ca.currentUser.styles=ca.currentUser.styles||{},je(Object.keys(ub),ca.currentUser.styles),Ne()}function va(a){console.error(a),ca.error=a.message,ca.loading=!1,cb("error",!0)}function la(a=!1){ca.savedLocally=!0;let c=2000,e=a?0:c;clearTimeout(ke),ke=setTimeout(h,e),cb("working",!0,!0);function h(){if(ia.currentUser())return ia.currentUser().update({data:{flintstone:JSON.stringify(ca.currentUser)}}).then(()=>{ca.error=!1,cb("working",!1,!1)}).catch(va);try{ca.error=!1,Kb(yc,ca),cb("working",!1,!1)}catch(n){va(n)}}}function G(a=Rd()){Eb(u`
    <div id=app ?data-loading=${ca.loading}>
      <header>${Ib()}</header>
      ${a}
      <loader></loader>
      <status-message>${ca.error?`Error: ${ca.error}`:"All changes saved"}</status-message>
      <mobile-only>${Sd()}</mobile-only>
    </div>`,document.body)}function Ne(){for(let[a,c]of Object.entries(ja))cb(a,c,c)}function ya(a,c){ja[a]=c,cb(a,c,c),Kb(zc,ja)}function D(a,c,e){ca[a]=c,G(),e&&la()}const hd=a=>{let c=["name","password"],e={};return u`
  <form class=mount>
    ${pb({fields:c,formData:e})}
    ${E({className:"primary",content:"Create Account & Sign In",action:()=>{D("loading",!0),ia.acceptInvite(a,e.password,!0).then(()=>{ia.currentUser().update({full_name:e.name}),D("loading",!1)}).catch(h=>{va(h),renderAll(Modal(AuthError(h.message)))})}})}
  </form>`};const id=()=>{let a;return u`
  <form class=mount>
    <label class="smol light">
      New Password
      <input required @input=${c=>a=c.target.value} minlength=8 type=password name=password />
    </label>
    ${E({className:"primary",content:"Save New Password",action:()=>{D("loading",!0),ia.currentUser().update({password:a}).then(()=>{D("loading",!1),la(!0)}).catch(c=>{va(c),renderAll(Modal(AuthError(c.message)))})}})}
  </form>`};k.loading=!0;let rc=()=>{ob();if(location.hash&&location.hash.length){let[a,c]=location.hash.slice(1).split("=");location.replace("#"),history.replaceState(null,null,location.href.slice(0,-1)),k.loading=!1;if(a&&c)switch(a){case"recovery_token":ia.recover(c,!0).then(()=>G(U(id())));break;case"confirmation_token":ia.confirm(c,!0).then(()=>{G(),la(!0)});break;case"invite_token":G(U(hd(c)));break}}else k.loading=!1,G(),la(!0);addEventListener("keydown",a=>{var c,e;a.key=="Control"&&(k.shortcutReady=!0),k.shortcutReady&&Fb[a.key]&&((e=(c=Fb[a.key])==null?void 0:c.action)==null?void 0:e.call(void 0,a))}),addEventListener("keyup",a=>{a.key=="Control"&&(k.shortcutReady=!1)})};qc?qc.then(a=>{k.currentUser=JSON.parse(a.user_metadata.flintstone),rc()}).catch(a=>{console.log(a),rc()}):k.savedLocally?rc():(k.loading=!1,ob(),G(U(nb())));})();

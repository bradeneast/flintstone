(()=>{var za=Object.create;var nn=Object.defineProperty;var Ha=Object.getOwnPropertyDescriptor;var ja=Object.getOwnPropertyNames;var Fa=Object.getPrototypeOf,Ba=Object.prototype.hasOwnProperty;var qa=n=>nn(n,"__esModule",{value:!0});var f=(n,e)=>()=>(n&&(e=n(n=0)),e);var Fe=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var Va=(n,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of ja(e))!Ba.call(n,i)&&(t||i!=="default")&&nn(n,i,{get:()=>e[i],enumerable:!(r=Ha(e,i))||r.enumerable});return n},Ei=(n,e)=>Va(qa(nn(n!=null?za(Fa(n)):{},"default",!e&&n&&n.__esModule?{get:()=>n.default,enumerable:!0}:{value:n,enumerable:!0})),n);var $i=Fe(on=>{"use strict";Object.defineProperty(on,"__esModule",{value:!0});var Wa=function(){function n(e,t){var r=[],i=!0,o=!1,s=void 0;try{for(var l=e[Symbol.iterator](),u;!(i=(u=l.next()).done)&&(r.push(u.value),!(t&&r.length===t));i=!0);}catch(b){o=!0,s=b}finally{try{!i&&l.return&&l.return()}finally{if(o)throw s}}return r}return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return n(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();on.getPagination=Ga;function Ga(n){var e=n.headers.get("Link"),t={};if(e==null)return null;e=e.split(",");for(var r=n.headers.get("X-Total-Count"),i=0,o=e.length;i<o;i++){var s=e[i].replace(/(^\s*|\s*$)/,""),l=s.split(";"),u=Wa(l,2),b=u[0],k=u[1],S=b.match(/page=(\d+)/),$=S&&parseInt(S[1],10);k.match(/last/)?t.last=$:k.match(/next/)?t.next=$:k.match(/prev/)?t.prev=$:k.match(/first/)&&(t.first=$)}return t.last=Math.max(t.last||0,t.prev&&t.prev+1||0),t.current=t.next?t.next-1:t.last||1,t.total=r?parseInt(r,10):null,t}});var ln=Fe(xe=>{"use strict";Object.defineProperty(xe,"__esModule",{value:!0});xe.JSONHTTPError=xe.TextHTTPError=xe.HTTPError=xe.getPagination=void 0;var Di=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Za=function(){function n(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),Oi=$i();Object.defineProperty(xe,"getPagination",{enumerable:!0,get:function(){return Oi.getPagination}});function Jt(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function sn(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:n}function an(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}function Ja(n){function e(){var t=Reflect.construct(n,Array.from(arguments));return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t}return e.prototype=Object.create(n.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n,e}var Ni=xe.HTTPError=function(n){an(e,n);function e(t){Jt(this,e);var r=sn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t.statusText));return r.name=r.constructor.name,typeof Error.captureStackTrace=="function"?Error.captureStackTrace(r,r.constructor):r.stack=new Error(t.statusText).stack,r.status=t.status,r}return e}(Ja(Error)),Ya=xe.TextHTTPError=function(n){an(e,n);function e(t,r){Jt(this,e);var i=sn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.data=r,i}return e}(Ni),Ka=xe.JSONHTTPError=function(n){an(e,n);function e(t,r){Jt(this,e);var i=sn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.json=r,i}return e}(Ni),Qa=function(){function n(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",t=arguments[1];Jt(this,n),this.apiURL=e,this.apiURL.match(/\/[^\/]?/)&&(this._sameOrigin=!0),this.defaultHeaders=t&&t.defaultHeaders||{}}return Za(n,[{key:"headers",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Di({},this.defaultHeaders,{"Content-Type":"application/json"},t)}},{key:"parseJsonResponse",value:function(t){return t.json().then(function(r){if(!t.ok)return Promise.reject(new Ka(t,r));var i=(0,Oi.getPagination)(t);return i?{pagination:i,items:r}:r})}},{key:"request",value:function(t){var r=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=this.headers(i.headers||{});return this._sameOrigin&&(i.credentials=i.credentials||"same-origin"),fetch(this.apiURL+t,Di({},i,{headers:o})).then(function(s){var l=s.headers.get("Content-Type");return l&&l.match(/json/)?r.parseJsonResponse(s):s.ok?s.text().then(function(u){}):s.text().then(function(u){return Promise.reject(new Ya(s,u))})})}}]),n}();xe.default=Qa});var Ii=Fe(Yt=>{"use strict";Object.defineProperty(Yt,"__esModule",{value:!0});Yt.default=void 0;function Xa(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Ri(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function el(n,e,t){return e&&Ri(n.prototype,e),t&&Ri(n,t),n}var tl=function(){function n(e){Xa(this,n),this.user=e}return el(n,[{key:"listUsers",value:function(t){return this.user._request("/admin/users",{method:"GET",audience:t})}},{key:"getUser",value:function(t){return this.user._request("/admin/users/".concat(t.id))}},{key:"updateUser",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.user._request("/admin/users/".concat(t.id),{method:"PUT",body:JSON.stringify(r)})}},{key:"createUser",value:function(t,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return i.email=t,i.password=r,this.user._request("/admin/users",{method:"POST",body:JSON.stringify(i)})}},{key:"deleteUser",value:function(t){return this.user._request("/admin/users/".concat(t.id),{method:"DELETE"})}}]),n}();Yt.default=tl});var Ui=Fe(tr=>{"use strict";function Kt(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Kt=function(t){return typeof t}:Kt=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kt(n)}Object.defineProperty(tr,"__esModule",{value:!0});tr.default=void 0;var Pi=il(ln()),rl=nl(Ii());function nl(n){return n&&n.__esModule?n:{default:n}}function Ci(){if(typeof WeakMap!="function")return null;var n=new WeakMap;return Ci=function(){return n},n}function il(n){if(n&&n.__esModule)return n;if(n===null||Kt(n)!=="object"&&typeof n!="function")return{default:n};var e=Ci();if(e&&e.has(n))return e.get(n);var t={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){var o=r?Object.getOwnPropertyDescriptor(n,i):null;o&&(o.get||o.set)?Object.defineProperty(t,i,o):t[i]=n[i]}return t.default=n,e&&e.set(n,t),t}function Mi(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function ol(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Mi(Object(t),!0).forEach(function(r){sl(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Mi(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function sl(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function al(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Li(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function ll(n,e,t){return e&&Li(n.prototype,e),t&&Li(n,t),n}var cl=60*1e3,Qt="gotrue.user",kt={},Xt=null,ul={api:1,token:1,audience:1,url:1},pl={api:1},er=function(){return typeof window!="undefined"},ml=function(){function n(e,t,r){al(this,n),this.api=e,this.url=e.apiURL,this.audience=r,this._processTokenResponse(t),Xt=this}return ll(n,[{key:"update",value:function(t){var r=this;return this._request("/user",{method:"PUT",body:JSON.stringify(t)}).then(function(i){return r._saveUserData(i)._refreshSavedSession()})}},{key:"jwt",value:function(t){var r=this.tokenDetails();if(r==null)return Promise.reject(new Error("Gotrue-js: failed getting jwt access token"));var i=r.expires_at,o=r.refresh_token,s=r.access_token;return t||i-cl<Date.now()?this._refreshToken(o):Promise.resolve(s)}},{key:"logout",value:function(){return this._request("/logout",{method:"POST"}).then(this.clearSession.bind(this)).catch(this.clearSession.bind(this))}},{key:"_refreshToken",value:function(t){var r=this;return kt[t]?kt[t]:kt[t]=this.api.request("/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"grant_type=refresh_token&refresh_token=".concat(t)}).then(function(i){return delete kt[t],r._processTokenResponse(i),r._refreshSavedSession(),r.token.access_token}).catch(function(i){return delete kt[t],r.clearSession(),Promise.reject(i)})}},{key:"_request",value:function(t){var r=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};i.headers=i.headers||{};var o=i.audience||this.audience;return o&&(i.headers["X-JWT-AUD"]=o),this.jwt().then(function(s){return r.api.request(t,ol({headers:Object.assign(i.headers,{Authorization:"Bearer ".concat(s)})},i)).catch(function(l){return l instanceof Pi.JSONHTTPError&&l.json&&(l.json.msg?l.message=l.json.msg:l.json.error&&(l.message="".concat(l.json.error,": ").concat(l.json.error_description))),Promise.reject(l)})})}},{key:"getUserData",value:function(){return this._request("/user").then(this._saveUserData.bind(this)).then(this._refreshSavedSession.bind(this))}},{key:"_saveUserData",value:function(t,r){for(var i in t)i in n.prototype||i in ul||(this[i]=t[i]);return r&&(this._fromStorage=!0),this}},{key:"_processTokenResponse",value:function(t){this.token=t;try{var r=JSON.parse(fl(t.access_token.split(".")[1]));this.token.expires_at=r.exp*1e3}catch(i){console.error(new Error("Gotrue-js: Failed to parse tokenResponse claims: ".concat(i)))}}},{key:"_refreshSavedSession",value:function(){return er()&&localStorage.getItem(Qt)&&this._saveSession(),this}},{key:"_saveSession",value:function(){return er()&&localStorage.setItem(Qt,JSON.stringify(this._details)),this}},{key:"tokenDetails",value:function(){return this.token}},{key:"clearSession",value:function(){n.removeSavedSession(),this.token=null,Xt=null}},{key:"admin",get:function(){return new rl.default(this)}},{key:"_details",get:function(){var t={};for(var r in this)r in n.prototype||r in pl||(t[r]=this[r]);return t}}],[{key:"removeSavedSession",value:function(){er()&&localStorage.removeItem(Qt)}},{key:"recoverSession",value:function(t){if(Xt)return Xt;var r=er()&&localStorage.getItem(Qt);if(r)try{var i=JSON.parse(r),o=i.url,s=i.token,l=i.audience;if(!o||!s)return null;var u=t||new Pi.default(o,{});return new n(u,s,l)._saveUserData(i,!0)}catch(b){return console.error(new Error("Gotrue-js: Error recovering session: ".concat(b))),null}return null}}]),n}();tr.default=ml;function fl(n){var e=n.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw"Illegal base64url string!"}var t=window.atob(e);try{return decodeURIComponent(escape(t))}catch(r){return t}}});var Bi=Fe(nr=>{"use strict";function rr(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?rr=function(t){return typeof t}:rr=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rr(n)}Object.defineProperty(nr,"__esModule",{value:!0});nr.default=void 0;var zi=hl(ln()),cn=dl(Ui());function dl(n){return n&&n.__esModule?n:{default:n}}function Hi(){if(typeof WeakMap!="function")return null;var n=new WeakMap;return Hi=function(){return n},n}function hl(n){if(n&&n.__esModule)return n;if(n===null||rr(n)!=="object"&&typeof n!="function")return{default:n};var e=Hi();if(e&&e.has(n))return e.get(n);var t={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){var o=r?Object.getOwnPropertyDescriptor(n,i):null;o&&(o.get||o.set)?Object.defineProperty(t,i,o):t[i]=n[i]}return t.default=n,e&&e.set(n,t),t}function gl(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function ji(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function yl(n,e,t){return e&&ji(n.prototype,e),t&&ji(n,t),n}var xl=/^http:\/\//,vl="/.netlify/identity",Fi=function(){function n(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.APIUrl,r=t===void 0?vl:t,i=e.audience,o=i===void 0?"":i,s=e.setCookie,l=s===void 0?!1:s;gl(this,n),r.match(xl)&&console.warn(`Warning:

DO NOT USE HTTP IN PRODUCTION FOR GOTRUE EVER!
GoTrue REQUIRES HTTPS to work securely.`),o&&(this.audience=o),this.setCookie=l,this.api=new zi.default(r)}return yl(n,[{key:"_request",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};r.headers=r.headers||{};var i=r.audience||this.audience;return i&&(r.headers["X-JWT-AUD"]=i),this.api.request(t,r).catch(function(o){return o instanceof zi.JSONHTTPError&&o.json&&(o.json.msg?o.message=o.json.msg:o.json.error&&(o.message="".concat(o.json.error,": ").concat(o.json.error_description))),Promise.reject(o)})}},{key:"settings",value:function(){return this._request("/settings")}},{key:"signup",value:function(t,r,i){return this._request("/signup",{method:"POST",body:JSON.stringify({email:t,password:r,data:i})})}},{key:"login",value:function(t,r,i){var o=this;return this._setRememberHeaders(i),this._request("/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"grant_type=password&username=".concat(encodeURIComponent(t),"&password=").concat(encodeURIComponent(r))}).then(function(s){return cn.default.removeSavedSession(),o.createUser(s,i)})}},{key:"loginExternalUrl",value:function(t){return"".concat(this.api.apiURL,"/authorize?provider=").concat(t)}},{key:"confirm",value:function(t,r){return this._setRememberHeaders(r),this.verify("signup",t,r)}},{key:"requestPasswordRecovery",value:function(t){return this._request("/recover",{method:"POST",body:JSON.stringify({email:t})})}},{key:"recover",value:function(t,r){return this._setRememberHeaders(r),this.verify("recovery",t,r)}},{key:"acceptInvite",value:function(t,r,i){var o=this;return this._setRememberHeaders(i),this._request("/verify",{method:"POST",body:JSON.stringify({token:t,password:r,type:"signup"})}).then(function(s){return o.createUser(s,i)})}},{key:"acceptInviteExternalUrl",value:function(t,r){return"".concat(this.api.apiURL,"/authorize?provider=").concat(t,"&invite_token=").concat(r)}},{key:"createUser",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;this._setRememberHeaders(r);var i=new cn.default(this.api,t,this.audience);return i.getUserData().then(function(o){return r&&o._saveSession(),o})}},{key:"currentUser",value:function(){var t=cn.default.recoverSession(this.api);return t&&this._setRememberHeaders(t._fromStorage),t}},{key:"verify",value:function(t,r,i){var o=this;return this._setRememberHeaders(i),this._request("/verify",{method:"POST",body:JSON.stringify({token:r,type:t})}).then(function(s){return o.createUser(s,i)})}},{key:"_setRememberHeaders",value:function(t){this.setCookie&&(this.api.defaultHeaders=this.api.defaultHeaders||{},this.api.defaultHeaders["X-Use-Cookie"]=t?"1":"session")}}]),n}();nr.default=Fi;typeof window!="undefined"&&(window.GoTrue=Fi)});var qi,W,Te=f(()=>{qi=Ei(Bi()),W=new qi.default({APIUrl:"https://flintstone.app/.netlify/identity",audience:"",setCookie:!0})});var Vi,un,Be,pn=f(()=>{Vi=new WeakMap,un=n=>(...e)=>{let t=n(...e);return Vi.set(t,!0),t},Be=n=>typeof n=="function"&&Vi.has(n)});var mn,fn,Tt,nt=f(()=>{mn=typeof window!="undefined"&&window.customElements!=null&&window.customElements.polyfillWrapFlushCallback!==void 0,fn=(n,e,t=null,r=null)=>{for(;e!==t;){let i=e.nextSibling;n.insertBefore(e,r),e=i}},Tt=(n,e,t=null)=>{for(;e!==t;){let r=e.nextSibling;n.removeChild(e),e=r}}});var ge,ee,dn=f(()=>{ge={},ee={}});var Se,hn,Wi,it,ir,Gi,gn,Ae,or,ot=f(()=>{Se=`{{lit-${String(Math.random()).slice(2)}}}`,hn=`<!--${Se}-->`,Wi=new RegExp(`${Se}|${hn}`),it="$lit$",ir=class{constructor(e,t){this.parts=[],this.element=t;let r=[],i=[],o=document.createTreeWalker(t.content,133,null,!1),s=0,l=-1,u=0,{strings:b,values:{length:k}}=e;for(;u<k;){let S=o.nextNode();if(S===null){o.currentNode=i.pop();continue}if(l++,S.nodeType===1){if(S.hasAttributes()){let $=S.attributes,{length:y}=$,q=0;for(let M=0;M<y;M++)Gi($[M].name,it)&&q++;for(;q-- >0;){let M=b[u],V=or.exec(M)[2],O=V.toLowerCase()+it,L=S.getAttribute(O);S.removeAttribute(O);let oe=L.split(Wi);this.parts.push({type:"attribute",index:l,name:V,strings:oe}),u+=oe.length-1}}S.tagName==="TEMPLATE"&&(i.push(S),o.currentNode=S.content)}else if(S.nodeType===3){let $=S.data;if($.indexOf(Se)>=0){let y=S.parentNode,q=$.split(Wi),M=q.length-1;for(let V=0;V<M;V++){let O,L=q[V];if(L==="")O=Ae();else{let oe=or.exec(L);oe!==null&&Gi(oe[2],it)&&(L=L.slice(0,oe.index)+oe[1]+oe[2].slice(0,-it.length)+oe[3]),O=document.createTextNode(L)}y.insertBefore(O,S),this.parts.push({type:"node",index:++l})}q[M]===""?(y.insertBefore(Ae(),S),r.push(S)):S.data=q[M],u+=M}}else if(S.nodeType===8)if(S.data===Se){let $=S.parentNode;(S.previousSibling===null||l===s)&&(l++,$.insertBefore(Ae(),S)),s=l,this.parts.push({type:"node",index:l}),S.nextSibling===null?S.data="":(r.push(S),l--),u++}else{let $=-1;for(;($=S.data.indexOf(Se,$+1))!==-1;)this.parts.push({type:"node",index:-1}),u++}}for(let S of r)S.parentNode.removeChild(S)}},Gi=(n,e)=>{let t=n.length-e.length;return t>=0&&n.slice(t)===e},gn=n=>n.index!==-1,Ae=()=>document.createComment(""),or=/([ \x09\x0a\x0c\x0d])([^\0-\x1F\x7F-\x9F "'>=/]+)([ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*))$/});var St,yn=f(()=>{nt();ot();St=class{constructor(e,t,r){this.__parts=[],this.template=e,this.processor=t,this.options=r}update(e){let t=0;for(let r of this.__parts)r!==void 0&&r.setValue(e[t]),t++;for(let r of this.__parts)r!==void 0&&r.commit()}_clone(){let e=mn?this.template.element.content.cloneNode(!0):document.importNode(this.template.element.content,!0),t=[],r=this.template.parts,i=document.createTreeWalker(e,133,null,!1),o=0,s=0,l,u=i.nextNode();for(;o<r.length;){if(l=r[o],!gn(l)){this.__parts.push(void 0),o++;continue}for(;s<l.index;)s++,u.nodeName==="TEMPLATE"&&(t.push(u),i.currentNode=u.content),(u=i.nextNode())===null&&(i.currentNode=t.pop(),u=i.nextNode());if(l.type==="node"){let b=this.processor.handleTextExpression(this.options);b.insertAfterNode(u.previousSibling),this.__parts.push(b)}else this.__parts.push(...this.processor.handleAttributeExpressions(u,l.name,l.strings,this.options));o++}return mn&&(document.adoptNode(e),customElements.upgrade(e)),e}}});var Zi,_l,qe,sr,ar=f(()=>{nt();ot();Zi=window.trustedTypes&&trustedTypes.createPolicy("lit-html",{createHTML:n=>n}),_l=` ${Se} `,qe=class{constructor(e,t,r,i){this.strings=e,this.values=t,this.type=r,this.processor=i}getHTML(){let e=this.strings.length-1,t="",r=!1;for(let i=0;i<e;i++){let o=this.strings[i],s=o.lastIndexOf("<!--");r=(s>-1||r)&&o.indexOf("-->",s+1)===-1;let l=or.exec(o);l===null?t+=o+(r?_l:hn):t+=o.substr(0,l.index)+l[1]+l[2]+it+l[3]+Se}return t+=this.strings[e],t}getTemplateElement(){let e=document.createElement("template"),t=this.getHTML();return Zi!==void 0&&(t=Zi.createHTML(t)),e.innerHTML=t,e}},sr=class extends qe{getHTML(){return`<svg>${super.getHTML()}</svg>`}getTemplateElement(){let e=super.getTemplateElement(),t=e.content,r=t.firstChild;return t.removeChild(r),fn(t,r.firstChild),e}}});var st,lr,At,cr,Ee,ur,pr,xn,Ji,mr,bl,Et=f(()=>{pn();nt();dn();yn();ar();ot();st=n=>n===null||!(typeof n=="object"||typeof n=="function"),lr=n=>Array.isArray(n)||!!(n&&n[Symbol.iterator]),At=class{constructor(e,t,r){this.dirty=!0,this.element=e,this.name=t,this.strings=r,this.parts=[];for(let i=0;i<r.length-1;i++)this.parts[i]=this._createPart()}_createPart(){return new cr(this)}_getValue(){let e=this.strings,t=e.length-1,r=this.parts;if(t===1&&e[0]===""&&e[1]===""){let o=r[0].value;if(typeof o=="symbol")return String(o);if(typeof o=="string"||!lr(o))return o}let i="";for(let o=0;o<t;o++){i+=e[o];let s=r[o];if(s!==void 0){let l=s.value;if(st(l)||!lr(l))i+=typeof l=="string"?l:String(l);else for(let u of l)i+=typeof u=="string"?u:String(u)}}return i+=e[t],i}commit(){this.dirty&&(this.dirty=!1,this.element.setAttribute(this.name,this._getValue()))}},cr=class{constructor(e){this.value=void 0,this.committer=e}setValue(e){e!==ge&&(!st(e)||e!==this.value)&&(this.value=e,Be(e)||(this.committer.dirty=!0))}commit(){for(;Be(this.value);){let e=this.value;this.value=ge,e(this)}this.value!==ge&&this.committer.commit()}},Ee=class{constructor(e){this.value=void 0,this.__pendingValue=void 0,this.options=e}appendInto(e){this.startNode=e.appendChild(Ae()),this.endNode=e.appendChild(Ae())}insertAfterNode(e){this.startNode=e,this.endNode=e.nextSibling}appendIntoPart(e){e.__insert(this.startNode=Ae()),e.__insert(this.endNode=Ae())}insertAfterPart(e){e.__insert(this.startNode=Ae()),this.endNode=e.endNode,e.endNode=this.startNode}setValue(e){this.__pendingValue=e}commit(){if(this.startNode.parentNode===null)return;for(;Be(this.__pendingValue);){let t=this.__pendingValue;this.__pendingValue=ge,t(this)}let e=this.__pendingValue;e!==ge&&(st(e)?e!==this.value&&this.__commitText(e):e instanceof qe?this.__commitTemplateResult(e):e instanceof Node?this.__commitNode(e):lr(e)?this.__commitIterable(e):e===ee?(this.value=ee,this.clear()):this.__commitText(e))}__insert(e){this.endNode.parentNode.insertBefore(e,this.endNode)}__commitNode(e){this.value!==e&&(this.clear(),this.__insert(e),this.value=e)}__commitText(e){let t=this.startNode.nextSibling;e=e==null?"":e;let r=typeof e=="string"?e:String(e);t===this.endNode.previousSibling&&t.nodeType===3?t.data=r:this.__commitNode(document.createTextNode(r)),this.value=e}__commitTemplateResult(e){let t=this.options.templateFactory(e);if(this.value instanceof St&&this.value.template===t)this.value.update(e.values);else{let r=new St(t,e.processor,this.options),i=r._clone();r.update(e.values),this.__commitNode(i),this.value=r}}__commitIterable(e){Array.isArray(this.value)||(this.value=[],this.clear());let t=this.value,r=0,i;for(let o of e)i=t[r],i===void 0&&(i=new Ee(this.options),t.push(i),r===0?i.appendIntoPart(this):i.insertAfterPart(t[r-1])),i.setValue(o),i.commit(),r++;r<t.length&&(t.length=r,this.clear(i&&i.endNode))}clear(e=this.startNode){Tt(this.startNode.parentNode,e.nextSibling,this.endNode)}},ur=class{constructor(e,t,r){if(this.value=void 0,this.__pendingValue=void 0,r.length!==2||r[0]!==""||r[1]!=="")throw new Error("Boolean attributes can only contain a single expression");this.element=e,this.name=t,this.strings=r}setValue(e){this.__pendingValue=e}commit(){for(;Be(this.__pendingValue);){let t=this.__pendingValue;this.__pendingValue=ge,t(this)}if(this.__pendingValue===ge)return;let e=!!this.__pendingValue;this.value!==e&&(e?this.element.setAttribute(this.name,""):this.element.removeAttribute(this.name),this.value=e),this.__pendingValue=ge}},pr=class extends At{constructor(e,t,r){super(e,t,r);this.single=r.length===2&&r[0]===""&&r[1]===""}_createPart(){return new xn(this)}_getValue(){return this.single?this.parts[0].value:super._getValue()}commit(){this.dirty&&(this.dirty=!1,this.element[this.name]=this._getValue())}},xn=class extends cr{},Ji=!1;(()=>{try{let n={get capture(){return Ji=!0,!1}};window.addEventListener("test",n,n),window.removeEventListener("test",n,n)}catch(n){}})();mr=class{constructor(e,t,r){this.value=void 0,this.__pendingValue=void 0,this.element=e,this.eventName=t,this.eventContext=r,this.__boundHandleEvent=i=>this.handleEvent(i)}setValue(e){this.__pendingValue=e}commit(){for(;Be(this.__pendingValue);){let o=this.__pendingValue;this.__pendingValue=ge,o(this)}if(this.__pendingValue===ge)return;let e=this.__pendingValue,t=this.value,r=e==null||t!=null&&(e.capture!==t.capture||e.once!==t.once||e.passive!==t.passive),i=e!=null&&(t==null||r);r&&this.element.removeEventListener(this.eventName,this.__boundHandleEvent,this.__options),i&&(this.__options=bl(e),this.element.addEventListener(this.eventName,this.__boundHandleEvent,this.__options)),this.value=e,this.__pendingValue=ge}handleEvent(e){typeof this.value=="function"?this.value.call(this.eventContext||this.element,e):this.value.handleEvent(e)}},bl=n=>n&&(Ji?{capture:n.capture,passive:n.passive,once:n.once}:n.capture)});var vn,fr,_n=f(()=>{Et();vn=class{handleAttributeExpressions(e,t,r,i){let o=t[0];return o==="."?new pr(e,t.slice(1),r).parts:o==="@"?[new mr(e,t.slice(1),i.eventContext)]:o==="?"?[new ur(e,t.slice(1),r)]:new At(e,t,r).parts}handleTextExpression(e){return new Ee(e)}},fr=new vn});function bn(n){let e=wn.get(n.type);e===void 0&&(e={stringsArray:new WeakMap,keyString:new Map},wn.set(n.type,e));let t=e.stringsArray.get(n.strings);if(t!==void 0)return t;let r=n.strings.join(Se);return t=e.keyString.get(r),t===void 0&&(t=new ir(n,n.getTemplateElement()),e.keyString.set(r,t)),e.stringsArray.set(n.strings,t),t}var wn,kn=f(()=>{ot();wn=new Map});var Tn,at,Yi=f(()=>{nt();Et();kn();Tn=new WeakMap,at=(n,e,t)=>{let r=Tn.get(e);r===void 0&&(Tt(e,e.firstChild),Tn.set(e,r=new Ee(Object.assign({templateFactory:bn},t))),r.appendInto(e)),r.setValue(n),r.commit()}});var p,G,P=f(()=>{_n();ar();_n();pn();nt();dn();Et();Yi();kn();yn();ar();ot();typeof window!="undefined"&&(window.litHtmlVersions||(window.litHtmlVersions=[])).push("1.4.1");p=(n,...e)=>new qe(n,e,"html",fr),G=(n,...e)=>new sr(n,e,"svg",fr)});var R,ye,Ki,ne,$e,Ve,Qi,Xi,eo,to,ro,no,io,oo,$t,Dt,lt,z=f(()=>{R=(n,e=document)=>e.querySelector(n),ye=n=>JSON.parse(JSON.stringify(n)),Ki=(n,e)=>Object.keys(n).forEach(t=>e[t]=n[t]),ne=(n,e)=>R(`[data-index="${n}"]`,e),$e=(n,e,t)=>n.style.setProperty(`--${e}`,t),Ve=(n,e="",t)=>{let r=document.documentElement;if(t==null){r.getAttribute(n)?r.setAttribute(n,e):r.removeAttribute(n);return}t&&r.setAttribute(n,e),t||r.removeAttribute(n)},Qi=(n,e,t={})=>n.forEach(r=>e[r]=e[r]||t),Xi=()=>location=location.href,eo=(n,e)=>n.split(e)[0].length,to=n=>n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),ro=n=>n.which&&!n.ctrlKey&&!n.metaKey&&!n.altKey&&!n.shiftKey&&n.which!=8,no=(n,e)=>n.lastIndexOf(n.match(new RegExp(e,"g")).pop()),io=n=>{let e=new Blob([JSON.stringify(n)],{type:"application/json"});return URL.createObjectURL(e)},oo=n=>n.replace(/</g,"%3C").replace(/{/g,"\0o7B").replace(/expression\(.+?\)/g,""),$t=(n,e)=>e==null?JSON.parse(localStorage.getItem(n)):localStorage.setItem(n,JSON.stringify(e)),Dt=(n,e)=>{let t=n.target;e[t.name]=t.value},lt=n=>{let e=/\s/,{selectionEnd:t,selectionStart:r,value:i}=n,o=i.substr(0,r),s=i.substr(t);return{selection:t-r?i.substring(r,t):o.split(e).pop()+s.split(e).shift(),selectionStart:r,selectionEnd:t,before:o,after:s}}});var h,Y=f(()=>{P();h=({title:n="",action:e=null,icon:t=null,type:r="",content:i="",className:o="",disabled:s=!1})=>p`
<button type=${r} ?disabled=${s} title=${n} ?data-has-icon=${t} class=${o} @click=${e}>
  ${t?p`${t} ${i}`:i}
</button>`});var C,fe=f(()=>{P();Ot();C=n=>p`
<modal @click=${()=>ze(!1)} class=mount>
  ${n}
</modal>`});var He,Nt=f(()=>{P();T();Y();dr();fe();He=(n="Your email or password may be invalid")=>p`
<span>
  ${n}.
  ${h({content:"Try logging in again",className:"link underline",action:()=>x(C(We()))})}
  or
  ${h({content:"continue using anonymously.",className:"link underline",action:()=>x()})}
</span>`});var ct,hr=f(()=>{P();z();ct=({fields:n,formData:e})=>n.map(t=>p`
<label class="smol light">
  ${t}
  <input required=true @input=${r=>Dt(r,e)}
  type=${/email|password/.test(t)?t:"text"}
  name=${t} />
</label>`)});var so,ao=f(()=>{P();Te();T();Y();dr();fe();Nt();hr();so=()=>{let n=["email"],e={};return p`
  <form class=mount>
    ${ct({fields:n,formData:e})}
    ${h({className:"primary",content:"Send Recovery Email",action:()=>{d("loading",!0),W.requestPasswordRecovery(e.email).then(()=>{d("loading",!1),x(C("Recovery email sent. Check your inbox."))}).catch(t=>{me(t),x(C(He(t.message)))})}})}
    ${h({className:"link",content:"Back to sign in",action:()=>x(C(We()))})}
  </form>`}});var ut,gr=f(()=>{P();T();z();Nt();Y();fe();ut=()=>p`
<div style="display: grid; place-items: center; gap: 2em;">

  <div>
    <h1 class=mount>Welcome to <span style="color: var(--primary)">Flintstone</span>!</h1>
    <p>The tool for creating formal-ish documents on the go.</p>
  </div>

  <form class="mount">
  ${h({content:"Start from scratch",className:"primary",action:()=>Rt.then(n=>{c.savedLocally=!0,c.currentUser.styles=n.currentUser.styles,pt(),x(),K(!0),console.log(c.currentUser.styles)})})}
  ${h({content:"Use the starter template",className:"link",action:()=>Rt.then(n=>{Ki(n,c),c.savedLocally=!0,pt(),x(),K(!0)}).catch(n=>{me(n),x(C(He(n.message)))})})}
  </form>
  
</div>`});function We(){let n={};return p`
  <form class=mount>
    <label class="smol light">
      Email
      <input required @input=${e=>Dt(e,n)} type=email name=email />
    </label>
    <label class="smol light">
      Password
      <input required @input=${e=>Dt(e,n)} type=password name=password />
      ${h({className:"link",content:"Forgot Password",action:()=>x(C(so()))})}
    </label>

    ${h({className:"primary",content:"Sign In",action:()=>{d("loading",!0),W.login(n.email,n.password,!0).then(()=>{K(!0),Xi()}).catch(e=>{me(e),x(C(He(e.message)))})}})}
    ${h({className:"link",content:"Continue using anonymously",action:()=>c.savedLocally?x():x(C(ut()))})}
  </form>`}var dr=f(()=>{P();Te();T();Y();ao();fe();Nt();z();gr()});var lo,co=f(()=>{P();Te();Y();T();lo=()=>{let n=W.currentUser();return p`
  <form class=mount>
    ${h({className:"primary",content:"Sign Out",action:()=>{d("loading",!0),W.currentUser().logout().then(()=>location=location.href)}})}
    ${h({className:"link",content:p`Continue as <strong>${n.user_metadata.full_name||n.email}</strong>`,action:()=>x()})}
  </form>`}});var uo,po=f(()=>{P();Te();Y();T();fe();Nt();hr();gr();uo=()=>{let n=["name","email","password"],e={};return p`
  <form class=mount>
    ${ct({fields:n,formData:e})}
    ${h({className:"primary",content:"Create Account",action:()=>{d("loading",!0),W.signup(e.email,e.password,{full_name:e.name}).then(()=>{d("loading",!1),x(C("Confirmation email sent. Check your inbox."))}).catch(t=>{me(t),x(C(He(t.message)))})}})}
    ${h({className:"link",content:"Continue using anonymously",action:()=>c.savedLocally?x():x(C(ut()))})}
  </form>`}});var Q,yr=f(()=>{P();Q=({content:n,className:e="line",color:t=""})=>G`
<svg class=${e} style=${t?`--color:var(--${t})`:""} xmlns="http://www.w3.org/2000/svg" viewBox="0 0 216 216">
  ${n}
</svg>`});var xr,Sn=f(()=>{T();xr=()=>{c.loading=!0,c.showPreview=!0,x(),setTimeout(()=>{print(),d("loading",!1)},500)}});var An,En,mo,fo,ve,mt=f(()=>{An="flintstone_data",En="flintstone_preferences",mo={expandedAdjustments:[],shortcutReady:!1,exportSelection:{},forImport:{},importSelection:{},intellisense:{logger:"",suggestions:[]},currentUser:{documents:[{id:"New Document",body:""}],datasets:[{id:"New Data",fields:[["",""]]}],styles:{}}},fo={dark:!1,open_pane:void 0,show_header_nav:!1},ve=["documents","datasets"]});var ho,go=f(()=>{P();T();z();fe();vr();ho=(n,e,t)=>{let r=`${n.id}_${e}`;return p`
  <label class="flex" style="margin-bottom: .5rem">
    <input name=${r} type=checkbox @input=${o=>{o.target.checked?c.exportSelection[t].push(ye(n)):c.exportSelection[t]=c.exportSelection[t].filter(s=>s.id!=n.id),x(C(ft()))}} />
    <h3>${n.id}</h3>
  </label>`}});var $n,yo=f(()=>{dt();fe();mt();T();z();$n=n=>{var r;let e,t=new FileReader;c.forImport={},((r=n.dataTransfer)==null?void 0:r.items)?(n.preventDefault(),e=n.dataTransfer.items[0].getAsFile()):n.dataTransfer?(n.preventDefault(),e=n.dataTransfer.files[0]):e=n.target.files[0],t.onerror=me,t.onload=function(){let i=JSON.parse(this.result);ve.map(o=>c.forImport[o]=i[o]||[]),c.importSelection=ye(c.forImport),c.loading=!1,x(C(De()))},d("loading",!0),t.readAsText(e)}});var De,dt=f(()=>{P();mt();yo();T();Y();Dn();De=()=>Object.keys(c.forImport).length?p`
  <form class=mount>
    ${ve.map(n=>_r(c.forImport,n,"import"))}
    ${h({className:"primary",content:"Import Selected",disabled:!ve.some(n=>{var e;return(e=c.importSelection[n])==null?void 0:e.length}),action:()=>{for(let n of ve)c.currentUser[n]=c.currentUser[n].concat(c.importSelection[n]);d("forImport",{})}})}
    ${h({className:"link",content:"Back to editing",action:()=>x()})}
  </form>`:p`
  <input class=mount type=file accept=".json" @input=${$n} @dragleave=${n=>{n.preventDefault(),x()}} @drop=${$n} />

  <h3 style="pointer-events: none;">
    Click or drop a file to import it.
  </h3>

  <div style="position: absolute; bottom: 2em;">
  ${h({className:"link",content:"Back to editing",action:()=>x()})}
  </div>`});var xo,vo=f(()=>{P();T();z();fe();dt();xo=(n,e,t)=>{let r=`${n.id}_${e}`;return p`
  <label class=flex style="margin-bottom: .5rem">
    <input checked name=${r} type=checkbox @input=${o=>{o.target.checked?c.importSelection[t].push(ye(n)):c.importSelection[t]=c.importSelection[t].filter(s=>s.id!=n.id),x(C(De()))}} />
    <h3>${n.id}</h3>
  </label>`}});var _r,Dn=f(()=>{P();go();vo();_r=(n,e,t)=>{var r;return p`
<div style="width: 100%">
  ${n[e]&&((r=Object.keys(n[e]))==null?void 0:r.length)?p`
      <label class="smol light" style="margin-bottom: .5rem;">${e}</label>
      ${n[e].map((i,o)=>{if(t=="import")return xo(i,o,e);if(t=="export")return ho(i,o,e)})}`:ee}
</div>`}});var ft,vr=f(()=>{P();mt();T();z();Y();Dn();ft=()=>p`
<form class=mount>
  ${ve.map(n=>_r(c.currentUser,n,"export"))}
  <a class="button primary" 
  ?disabled=${!ve.some(n=>{var e;return(e=c.exportSelection[n])==null?void 0:e.length})} 
  href=${io(c.exportSelection)} 
  download="Flintstone Export (${new Date().toLocaleDateString()})">
    Export Selected
  </a>
  ${h({className:"link",content:"Back to editing",action:()=>x()})}
</form>`});var F,je=f(()=>{P();yr();F={add:Q({content:G`<line x1="36" y1="108" x2="180" y2="108" /><line x1="108" y1="180" x2="108" y2="36" />`}),delete:Q({content:G`<line x1="48" y1="48" x2="168" y2="168"/><line x1="48" y1="168" x2="168" y2="48"/>`,color:"error"}),duplicate:Q({content:G`<rect x="90.4" y="90.71" width="105.31" height="105.31" rx="21.57"/><path d="M157.59,65.77V41.29A21.58,21.58,0,0,0,136,19.71H41A21.58,21.58,0,0,0,19.4,41.29v95A21.58,21.58,0,0,0,41,157.9H65.46"/>`}),up:Q({content:G`<polyline points="184.69 146.81 108 70.12 31.31 146.81" />`}),down:Q({content:G`<polyline points="184.69 70.12 108 146.81 31.31 70.12" />`}),right:Q({content:G`<path d="M73.67,26.62,155.05,108,73.67,189.38" />`}),reset:Q({content:G`<polyline points="37 11.6 37 71.34 96.75 71.34"/><path d="M47.33,172.61a81.82,81.82,0,1,0,0-115.72l-5.77,5.77"/>`}),check:Q({content:G`<polyline points="182.48 34.41 89.53 182.33 36.66 138.35" />`,color:"green"}),export:Q({content:G`<line x1="119.65" y1="65.2" x2="162.5" y2="65.2"/><circle cx="184.18" cy="65.2" r="21.05"/><line x1="103.79" y1="103.51" x2="134.08" y2="133.81"/><circle cx="149.42" cy="149.14" r="21.05"/><line x1="65.48" y1="119.38" x2="65.48" y2="162.22"/><circle cx="65.48" cy="183.91" r="21.05"/><circle cx="65.48" cy="65.2" r="53.54"/>`,color:"purple"}),import:Q({content:G`<line x1="89.77" y1="126.49" x2="69.49" y2="146.77"/><circle cx="32.16" cy="183.47" r="21.04"/><circle cx="32.16" cy="92.12" r="21.04"/><circle cx="123.51" cy="183.47" r="21.04"/><circle cx="151.05" cy="64.58" r="53.5"/>`,color:"green"}),theme:Q({content:G`<circle cx="108" cy="108" r="80"/><line x1="108" y1="28" x2="108" y2="188"/><path d="M173,147.3H111M186,108H111m62-39.3H111"/>`}),adjust:Q({content:G`<path d="M108,108l59.4-59.4M126.81,26.13a84,84,0,1,0,63.05,63.06" />`,color:"yellow"}),print:Q({content:G`<path d="M158.2,173,108,195.41,57.8,173"/><rect x="31" y="97.95" width="154" height="48.28"/><polyline points="57.8 70.34 57.8 29.34 158.21 29.34 158.21 70.34"/>`,color:"primary-80"}),preview:Q({content:G`<path d="M37.41,135.13H93.55m29.17,0h56.15M37.28,179.07H179M37.28,36.93H179V91.19H37.28Z"/>`,color:"purple"}),edit:Q({content:G`<path d="M131.68,55,161,25.6,190.4,55,161,84.32ZM25.6,190.4l35.89-6.54L161,84.32,131.68,55,32.14,154.51Zm89.1,3.66h54.1a21.61,21.61,0,0,0,21.6-21.61V115m-89.09-93H47.2A21.61,21.61,0,0,0,25.6,43.55V101"/>`,color:"green"}),keyboard:Q({content:G`<path d="M51.81,94.22H67.05m35.06,0h62.36m-112.66,40H96.52m37.06,0h30.89M15.8,55.63H200.48V172.81H15.8Z"/>`}),documents:Q({content:G`<path d="M185,65.16V203.22H33V13.78H133.65ZM133.65,13.78V65.16H185ZM68.3,64.35h32.32M68.3,154.49h81.79M68.3,109.42h81.79"/>`,color:"purple"}),data:Q({content:G`<rect x="143.48" y="18.99" width="52.53" height="52.53" rx="13.53"/><rect x="126.11" y="131.48" width="52.53" height="52.53" rx="13.53"/><rect x="34.99" y="131.48" width="52.53" height="52.53" rx="13.53"/><rect x="34.99" y="40.36" width="52.53" height="52.53" rx="13.53"/>`,color:"primary-80"})}});var te,Oe=f(()=>{z();te=class{constructor(e,t=()=>null){this.elements=Array.isArray(e)?e:[e],this.callback=t,this.duration=300,this.tick=10}added(){let{elements:e,tick:t}=this,r=e[0];r.style.transition="none",r.style.opacity=0,$e(r,"translateY",1),$e(r,"scaleY",0),setTimeout(()=>{r.style.transition="",r.style.opacity=1,$e(r,"translateY",0),$e(r,"scaleY",1)},t)}removed(){let{elements:e,duration:t,callback:r}=this,i=e[0];i.style.opacity=0,$e(i,"scaleY",0),setTimeout(()=>{r(),i.style.transition="none",i.style.opacity=1,$e(i,"scaleY",1),setTimeout(()=>i.style.transition="",t)},t)}swapped(e){let{elements:t,callback:r,tick:i}=this,[o,s]=t;$e(o,"translateY",e),$e(s,"translateY",e*-1),this.elements.map(l=>l.style.transition="none"),setTimeout(()=>{this.elements.map(l=>{l.style.transition="",$e(l,"translateY",0)}),r()},i)}}});var br,On=f(()=>{T();br=n=>{d("currentDocument",c.currentUser.documents[n])}});var wr,Nn=f(()=>{Oe();T();z();On();wr=()=>{var i;let n={id:"New Document",body:""},e=c.currentUser.documents.length;c.currentUser.documents.push(n),br(e);let t=ne(e,R(".documents .sets"));new te(t).added(),(i=R(".documents [data-active] input"))==null||i.focus(),K()}});var _o,bo=f(()=>{T();z();_o=(n,e)=>{let t=R(".editor");if(document.activeElement!=t)return;let{selection:r,selectionStart:i,selectionEnd:o,before:s,after:l}=lt(t),u=n.length,b=u*-1,k=e.length,S=e.length*-1,$=/\s/,y=!1;if(o-i>0){let M=s.slice(b)==n,V=l.slice(0,k)==e;y=M&&V,y?c.currentDocument.body=s.slice(0,b)+r+l.slice(k):c.currentDocument.body=s+n+r+e+l}if(o-i==0){let M=s.substr(0,no(s,$)+1),V=l.substr(eo(l,$)),O=r.slice(0,u)==n,L=r.slice(S)==e;y=O&&L,r=y?r.slice(u,S):n+r+e,c.currentDocument.body=M+r+V}t.value=c.currentDocument.body,K();let q=y?-1:1;t.selectionStart=i+u*q,t.selectionEnd=o+k*q}});var It,Rn=f(()=>{T();z();Oe();It=(n,e)=>{document.activeElement.blur();let t=e>0?"down":"up",r=c.currentDataset.fields[n],i=n+e,o=R(".fields"),s=ne(n,o),l=ne(i,o);c.currentDataset.fields.splice(n,1),c.currentDataset.fields.splice(i,0,r),d("currentDataset",c.currentDataset,!0),new te([s,l],()=>R(`[title*="${t}"]`,l).focus()).swapped(e)}});var kr,wo,Pt,In=f(()=>{vr();dt();fe();Nn();bo();Rn();Sn();T();z();kr=(n,e)=>{document.activeElement==R(".editor")&&(n.preventDefault(),_o(e,e))},wo=(n,e)=>{let t=document.activeElement.closest(".field");if(t){n.preventDefault();let r=parseInt(t.getAttribute("data-index"));It(r,e)}},Pt={b:{action:n=>kr(n,"**"),description:"format selection as bold",prefix:"ctrl"},i:{action:n=>kr(n,"_"),description:"format selection as italics",prefix:"ctrl"},"`":{action:n=>kr(n,"`"),description:"format selection as source code",prefix:"ctrl"},Delete:{action:n=>kr(n,"~"),description:"format selection as strikethrough",prefix:"ctrl"},k:{action:()=>{de("zen",!Z.zen),x()},description:"toggle zen mode",prefix:"ctrl+shift"},e:{action:n=>{n.preventDefault(),x(C(ft()))},description:"start an export",prefix:"ctrl+shift"},m:{action:n=>{n.preventDefault(),x(C(De()))},description:"start an import",prefix:"ctrl+shift"},n:{action:n=>{n.preventDefault(),wr()},description:"add a new document",prefix:"ctrl+shift"},s:{action:n=>{n.preventDefault(),K()},description:"trigger a save",prefix:"ctrl+shift"},p:{action:n=>{n.preventDefault(),xr()},description:"print your document",prefix:"ctrl"},ArrowUp:{action:n=>wo(n,-1),description:"move the current field up",prefix:"ctrl"},ArrowDown:{action:n=>wo(n,1),description:"move the current field down",prefix:"ctrl"}}});var ko,To=f(()=>{P();In();T();Y();ko=()=>p`
<div class=form>
  <table>
    <thead>
      <td>Shortcut</td>
      <td>Description</td>
    </thead>
    ${Object.entries(Pt).map(([n,{prefix:e,description:t}])=>p`
    <tr>
      <td>
        <span class=light>${e}</span> <strong>${n.toLowerCase()}</strong>
      </td>
      <td>${t}</td>
    </tr>
    `)}
  </table>
  <br />
  ${h({className:"link",content:"Close Keyboard Shortcuts",action:()=>x()})}
</div>`});var ht,Pn=f(()=>{T();ht=(n,e)=>{e==null?n==Z.open_pane?de("open_pane",void 0):de("open_pane",n):e?de("open_pane",n):de("open_pane",void 0),x()}});var So,Ao=f(()=>{Sn();T();Y();P();fe();vr();mt();Ot();dt();je();To();Pn();So=()=>p`
<nav class=header-nav>
  <desktop-only>
  ${h({content:`${Z.open_pane=="styles"?"Close":"Open"} style editor`,icon:F.adjust,action:()=>{ze(!1),ht("styles")}})}
  </desktop-only>
${h({content:"Print current document",icon:F.print,action:xr})}
${h({content:"Start an import",icon:F.import,action:()=>x(C(De()))})}
${h({content:"Start an export",icon:F.export,action:()=>{c.exportSelection={},ve.map(n=>c.exportSelection[n]=[]),x(C(ft()))}})}
${h({icon:F.theme,content:p`Switch to <light>dark</light><dark>light</dark> theme`,action:()=>de("dark",!Z.dark)})}
${h({icon:F.keyboard,content:p`Keyboard shortcuts`,action:()=>x(C(ko()))})}
</nav>`});var Eo,$o=f(()=>{P();Eo=()=>p`
<div id=logo>
  <light>
    <desktop-only>
      <img alt="Flintstone logo" src="logo.svg" />
    </desktop-only>
    <mobile-only>
      <img alt="Flintstone logo" src="logo-icon.svg" />
    </mobile-only>
  </light>
  <dark>
    <desktop-only>
      <img alt="Flintstone logo" src="logo-light.svg" />
    </desktop-only>
    <mobile-only>
      <img alt="Flintstone logo" src="logo-icon-light.svg" />
    </mobile-only>
  </dark>
</div>`});var Ct,Cn=f(()=>{Te();P();T();Y();dr();co();fe();po();yr();Ot();Ao();$o();Ct=()=>{let n=W.currentUser();return p`
  ${Eo()}
  ${n?ee:h({className:"primary",content:"Sign up",action:()=>x(C(uo()))})}
  ${h({className:"link",content:n?p`Signed in as <strong>${n.user_metadata.full_name||n.email}</strong>`:"Sign in",action:n?()=>x(C(lo())):()=>x(C(We()))})}
  ${c.savedLocally?p`<separator></separator>`:ee}
  ${c.savedLocally?h({title:`${Z.show_header_nav?"Close":"Open"} menu`,content:Q({content:G`
            <line y1="30" x2="100%" y2="30"/>
            <line y1="50%" x2="100%" y2="50%"/>
            <line y1="186" x2="100%" y2="186"/>`}),className:"icon menu-toggle",action:()=>ze()}):ee}
  ${So()}`}});var ze,Ot=f(()=>{P();Cn();T();z();ze=n=>{n==null?(de("show_header_nav",!Z.show_header_nav),at(Ct(),R("header"))):(de("show_header_nav",n),at(Ct(),R("header")))}});var Tr,Mn=f(()=>{T();Tr=n=>{d("currentDataset",c.currentUser.datasets[n])}});var Do,Oo=f(()=>{Oe();T();z();Mn();Do=()=>{var i;let n={id:"New Data",fields:[["",""]]},e=c.currentUser.datasets.length;c.currentUser.datasets.push(n),Tr(e);let t=ne(e,R(".data .sets"));new te(t).added(),(i=R(".data [data-active] input"))==null||i.focus(),K()}});var No,Ro=f(()=>{Oe();T();z();No=()=>{c.currentDataset.fields.push(["",""]),d("currentDataset",c.currentDataset,!0);let n=ne(c.currentDataset.fields.length-1,R(".fields"));new te(n).added()}});var Io,Po=f(()=>{Oe();T();z();Io=n=>{let e=c.currentUser.datasets[n],t=ye(e);t.id=e.id+" copy",c.currentUser.datasets.push(t),d("currentUser",c.currentUser),d("currentDataset",t,!0);let r=ne(n+1,R(".data .sets"));new te(r).added()}});var Co,Mo=f(()=>{Oe();T();z();Co=n=>{let e=c.currentUser.datasets,t=e[n];if(!confirm(`Are you sure you want to delete ${t.id}?`))return;let r=ne(n,R(".data .sets"));new te(r,()=>{e.splice(n,1),c.currentUser.datasets=e,d("currentDataset",c.currentUser.datasets[0],!0)}).removed()}});var Lo,Uo=f(()=>{T();Lo=n=>{c.currentDataset.id=n,d("currentDataset",c.currentDataset,!0)}});var zo,Ho=f(()=>{T();Oe();z();zo=n=>{let e=ne(n,R(".fields"));new te(e,()=>{c.currentDataset.fields.splice(n,1),d("currentDataset",c.currentDataset,!0)}).removed()}});var jo,Fo=f(()=>{T();jo=(n,e)=>{let[t,r]=c.currentDataset.fields[n];c.currentDataset.fields[n]=[e,r],d("currentDataset",c.currentDataset,!0)}});var Bo,qo=f(()=>{T();Bo=(n,e)=>{let[t,r]=c.currentDataset.fields[n];c.currentDataset.fields[n]=[t,e],d("currentDataset",c.currentDataset,!0)}});var Vo,Wo=f(()=>{P();Ho();Fo();qo();Y();Rn();yr();T();je();Vo=([n,e],t,r)=>{let i=`${r}_${t}_key`,o=`${r}_${t}_value`;return p`
  <li class=field data-index=${t}>
    <key>
      <input 
      title="Rename this field"
      type=text
      .value=${n} 
      id=${i}
      @input=${s=>jo(t,s.target.value)} />
    </key>
    <value>
      <input 
      title="Change the value this field"
      type=text
      .value=${e} 
      id=${o}
      @input=${s=>Bo(t,s.target.value)} />
    </value>
    <actions>
      <div class=join-buttons>
        ${h({title:"Move field up",className:"icon",disabled:t==0,icon:F.up,action:()=>It(t,-1)})}
        ${h({title:"Move field down",className:"icon",disabled:t==c.currentDataset.fields.length-1,icon:F.down,action:()=>It(t,1)})}
      </div>
      ${h({title:"Delete field",className:"icon",icon:F.delete,action:()=>zo(t)})}
    </actions>
  </li>`}});var Go,Zo=f(()=>{Oo();Ro();Po();Mo();Uo();Mn();P();T();Y();Wo();je();Go=()=>{let n=c.currentDataset;return p`
  <div class="pane data">
    <label class="smol light" for="currentDatasetTitle">Current data</label>
    ${n?p`
      <div class="selection mount">

        <div class="selection__header">
          <h2>
            <input 
            id=currentDatasetTitle
            title="Rename the current data set"
            type=text 
            .value=${n.id} 
            @input=${e=>Lo(e.target.value)} />
          </h2>
        </div>

        <ul class="fields">
        ${n.fields.length?p`
            <li>
              <label class="smol light">Name</label>
              <label class="smol light">Value</label>
              <span></span>
            </li>`:ee}
        ${n.fields.map((e,t)=>Vo(e,t,n.id))}
        ${h({action:No,className:"link",icon:F.add,content:"Add Field"})}
        </ul>

      </div>`:ee}

    <label class="smol light">All data</label>
    <ul class="sets mount">
      ${c.currentUser.datasets.map((e,t)=>p`
      <li data-index=${t}>
        ${h({title:`Select ${e.id}`,className:"link",action:()=>Tr(t),content:p`<h4>${e.id}</h4>`})}
        ${h({title:`Duplicate ${e.id}`,className:"icon",action:()=>Io(t),icon:F.duplicate})}
        ${c.currentUser.datasets.length>1?h({title:`Delete ${e.id}`,className:"icon",action:()=>Co(t),icon:F.delete}):ee}
      </li>`)}
      <button @click=${Do}>Add Data</button>
    </ul>
  </div>`}});var Jo,Yo=f(()=>{Oe();T();z();Jo=n=>{let e=c.currentUser.documents,t=e[n];if(!confirm(`Are you sure you want to delete ${t.id}?`))return;let r=ne(n,R(".documents .sets"));new te(r,()=>{e.splice(n,1),c.currentUser.documents=e,d("currentDocument",c.currentUser.documents[0],!0)}).removed()}});var Ko,Qo=f(()=>{T();Ko=n=>{c.currentDocument.id=n,d("currentDocument",c.currentDocument,!0)}});var Xo,es=f(()=>{Oe();T();z();Xo=n=>{let e=c.currentUser.documents[n],t=ye(e);t.id=e.id+" copy",c.currentUser.documents.push(t),d("currentUser",c.currentUser),d("currentDocument",t,!0);let r=ne(c.currentUser.documents.length-1,R(".documents .sets"));new te(r).added()}});var Ln,wl,ts,Un=f(()=>{P();T();z();Ln=n=>`page_${n+1}`,wl=/\n\s*\-{3,}\s*\n/,ts=()=>{let n=c.currentDocument.body,e=i=>{var o;d("showPreview",!0),(o=R("#"+Ln(i)))==null||o.scrollIntoView()},t=i=>i.match(/.+?(\n|$)/)[0].trim().replace(/^[^A-z0-9]*|[^A-z0-9\{\}]*$/g,""),r=n.split(wl);return r.length||(r=[n]),p`
  <div class=toc-wrapper>
    <h3>Pages</h3>
    <ol class=toc>
      ${r.map((i,o)=>p`
        <li>
          <button class=link @click=${()=>e(o)}>
            ${o+1}. ${t(i)}
          </button>
        </li>`)}
    </ol>
  </div>`}});var rs,ns=f(()=>{P();T();Nn();Yo();Qo();On();es();Y();Un();je();rs=()=>{let n=c.currentDocument;return p`
  <div class="pane documents">
    <label class="smol light" for="currentDocumentTitle">Current document</label>
    ${n?p`
      <div class="selection mount">

        <div class="selection__header">
          <h2>
            <input 
            type=text 
            id=currentDocumentTitle
            .value=${n.id} 
            @input=${e=>Ko(e.target.value)} />
          </h2>
        </div>
        
        ${n.body.length?ts():ee}
      </div>
      `:ee}

    <label class="smol light">All documents</label>
    <ul class="sets mount">
      ${c.currentUser.documents.map((e,t)=>p`
      <li data-index=${t}>
        ${h({title:`Select ${e.id}`,className:"link",action:()=>br(t),content:p`<h4>${e.id}</h4>`})}
        ${h({title:`Duplicate ${e.id}`,className:"icon",action:()=>Xo(t),icon:F.duplicate})}
        ${c.currentUser.documents.length>1?h({title:`Delete ${e.id}`,className:"icon",action:()=>Jo(t),icon:F.delete}):ee}
      </li>`)}
      <button @click=${wr}>Add Document</button>
    </ul>
  </div>`}});var is,Sr,zn=f(()=>{Et();P();is=new WeakMap,Sr=un(n=>e=>{if(!(e instanceof Ee))throw new Error("unsafeHTML can only be used in text bindings");let t=is.get(e);if(t!==void 0&&st(n)&&n===t.value&&e.value===t.fragment)return;let r=document.createElement("template");r.innerHTML=n;let i=document.importNode(r.content,!0);e.setValue(i),is.set(e,{value:n,fragment:i})})});var os=Fe((Hn,jn)=>{(function(n,e){typeof Hn=="object"&&typeof jn!="undefined"?jn.exports=e():typeof define=="function"&&define.amd?define(e):(n=n||self,n.DOMPurify=e())})(Hn,function(){"use strict";function n(_){if(Array.isArray(_)){for(var w=0,I=Array(_.length);w<_.length;w++)I[w]=_[w];return I}else return Array.from(_)}var e=Object.hasOwnProperty,t=Object.setPrototypeOf,r=Object.isFrozen,i=Object.getPrototypeOf,o=Object.getOwnPropertyDescriptor,s=Object.freeze,l=Object.seal,u=Object.create,b=typeof Reflect!="undefined"&&Reflect,k=b.apply,S=b.construct;k||(k=function(w,I,U){return w.apply(I,U)}),s||(s=function(w){return w}),l||(l=function(w){return w}),S||(S=function(w,I){return new(Function.prototype.bind.apply(w,[null].concat(n(I))))});var $=re(Array.prototype.forEach),y=re(Array.prototype.pop),q=re(Array.prototype.push),M=re(String.prototype.toLowerCase),V=re(String.prototype.match),O=re(String.prototype.replace),L=re(String.prototype.indexOf),oe=re(String.prototype.trim),J=re(RegExp.prototype.test),be=Ge(TypeError);function re(_){return function(w){for(var I=arguments.length,U=Array(I>1?I-1:0),ae=1;ae<I;ae++)U[ae-1]=arguments[ae];return k(_,w,U)}}function Ge(_){return function(){for(var w=arguments.length,I=Array(w),U=0;U<w;U++)I[U]=arguments[U];return S(_,I)}}function N(_,w){t&&t(_,null);for(var I=w.length;I--;){var U=w[I];if(typeof U=="string"){var ae=M(U);ae!==U&&(r(w)||(w[I]=ae),U=ae)}_[U]=!0}return _}function Ie(_){var w=u(null),I=void 0;for(I in _)k(e,_,[I])&&(w[I]=_[I]);return w}function Ut(_,w){for(;_!==null;){var I=o(_,w);if(I){if(I.get)return re(I.get);if(typeof I.value=="function")return re(I.value)}_=i(_)}function U(ae){return console.warn("fallback value for",ae),null}return U}var Qn=s(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Cr=s(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Mr=s(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),sa=s(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Lr=s(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),aa=s(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Xn=s(["#text"]),ei=s(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),Ur=s(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),ti=s(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),zt=s(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),la=l(/\{\{[\s\S]*|[\s\S]*\}\}/gm),ca=l(/<%[\s\S]*|[\s\S]*%>/gm),ua=l(/^data-[\-\w.\u00B7-\uFFFF]/),pa=l(/^aria-[\-\w]+$/),ma=l(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),fa=l(/^(?:\w+script|data):/i),da=l(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),vt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _};function we(_){if(Array.isArray(_)){for(var w=0,I=Array(_.length);w<_.length;w++)I[w]=_[w];return I}else return Array.from(_)}var ha=function(){return typeof window=="undefined"?null:window},ga=function(w,I){if((typeof w=="undefined"?"undefined":vt(w))!=="object"||typeof w.createPolicy!="function")return null;var U=null,ae="data-tt-policy-suffix";I.currentScript&&I.currentScript.hasAttribute(ae)&&(U=I.currentScript.getAttribute(ae));var Ht="dompurify"+(U?"#"+U:"");try{return w.createPolicy(Ht,{createHTML:function(jt){return jt}})}catch(Ze){return console.warn("TrustedTypes policy "+Ht+" could not be created."),null}};function ri(){var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ha(),w=function(a){return ri(a)};if(w.version="2.3.4",w.removed=[],!_||!_.document||_.document.nodeType!==9)return w.isSupported=!1,w;var I=_.document,U=_.document,ae=_.DocumentFragment,Ht=_.HTMLTemplateElement,Ze=_.Node,jt=_.Element,zr=_.NodeFilter,ni=_.NamedNodeMap,xa=ni===void 0?_.NamedNodeMap||_.MozNamedAttrMap:ni,va=_.HTMLFormElement,_a=_.DOMParser,ba=_.trustedTypes,Ft=jt.prototype,wa=Ut(Ft,"cloneNode"),ka=Ut(Ft,"nextSibling"),Ta=Ut(Ft,"childNodes"),Hr=Ut(Ft,"parentNode");if(typeof Ht=="function"){var jr=U.createElement("template");jr.content&&jr.content.ownerDocument&&(U=jr.content.ownerDocument)}var Le=ga(ba,I),ii=Le&&Wt?Le.createHTML(""):"",Bt=U,Fr=Bt.implementation,Sa=Bt.createNodeIterator,Aa=Bt.createDocumentFragment,Ea=Bt.getElementsByTagName,$a=I.importNode,oi={};try{oi=Ie(U).documentMode?U.documentMode:{}}catch(A){}var ke={};w.isSupported=typeof Hr=="function"&&Fr&&typeof Fr.createHTMLDocument!="undefined"&&oi!==9;var Br=la,qr=ca,Da=ua,Oa=pa,Na=fa,si=da,Vr=ma,le=null,ai=N({},[].concat(we(Qn),we(Cr),we(Mr),we(Lr),we(Xn))),se=null,li=N({},[].concat(we(ei),we(Ur),we(ti),we(zt))),X=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),qt=null,Wr=null,ci=!0,Gr=!0,ui=!1,Je=!1,Ye=!1,Zr=!1,Jr=!1,Ke=!1,Vt=!1,Wt=!1,pi=!0,Yr=!0,_t=!1,Qe={},Xe=null,mi=N({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),fi=null,di=N({},["audio","video","img","source","image","track"]),Kr=null,hi=N({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Qr="http://www.w3.org/1998/Math/MathML",Xr="http://www.w3.org/2000/svg",Ue="http://www.w3.org/1999/xhtml",Gt=Ue,en=!1,et=void 0,Ra=["application/xhtml+xml","text/html"],Ia="text/html",tt=void 0,rt=null,Pa=U.createElement("form"),gi=function(a){return a instanceof RegExp||a instanceof Function},tn=function(a){rt&&rt===a||((!a||(typeof a=="undefined"?"undefined":vt(a))!=="object")&&(a={}),a=Ie(a),le="ALLOWED_TAGS"in a?N({},a.ALLOWED_TAGS):ai,se="ALLOWED_ATTR"in a?N({},a.ALLOWED_ATTR):li,Kr="ADD_URI_SAFE_ATTR"in a?N(Ie(hi),a.ADD_URI_SAFE_ATTR):hi,fi="ADD_DATA_URI_TAGS"in a?N(Ie(di),a.ADD_DATA_URI_TAGS):di,Xe="FORBID_CONTENTS"in a?N({},a.FORBID_CONTENTS):mi,qt="FORBID_TAGS"in a?N({},a.FORBID_TAGS):{},Wr="FORBID_ATTR"in a?N({},a.FORBID_ATTR):{},Qe="USE_PROFILES"in a?a.USE_PROFILES:!1,ci=a.ALLOW_ARIA_ATTR!==!1,Gr=a.ALLOW_DATA_ATTR!==!1,ui=a.ALLOW_UNKNOWN_PROTOCOLS||!1,Je=a.SAFE_FOR_TEMPLATES||!1,Ye=a.WHOLE_DOCUMENT||!1,Ke=a.RETURN_DOM||!1,Vt=a.RETURN_DOM_FRAGMENT||!1,Wt=a.RETURN_TRUSTED_TYPE||!1,Jr=a.FORCE_BODY||!1,pi=a.SANITIZE_DOM!==!1,Yr=a.KEEP_CONTENT!==!1,_t=a.IN_PLACE||!1,Vr=a.ALLOWED_URI_REGEXP||Vr,Gt=a.NAMESPACE||Ue,a.CUSTOM_ELEMENT_HANDLING&&gi(a.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(X.tagNameCheck=a.CUSTOM_ELEMENT_HANDLING.tagNameCheck),a.CUSTOM_ELEMENT_HANDLING&&gi(a.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(X.attributeNameCheck=a.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),a.CUSTOM_ELEMENT_HANDLING&&typeof a.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(X.allowCustomizedBuiltInElements=a.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),et=Ra.indexOf(a.PARSER_MEDIA_TYPE)===-1?et=Ia:et=a.PARSER_MEDIA_TYPE,tt=et==="application/xhtml+xml"?function(m){return m}:M,Je&&(Gr=!1),Vt&&(Ke=!0),Qe&&(le=N({},[].concat(we(Xn))),se=[],Qe.html===!0&&(N(le,Qn),N(se,ei)),Qe.svg===!0&&(N(le,Cr),N(se,Ur),N(se,zt)),Qe.svgFilters===!0&&(N(le,Mr),N(se,Ur),N(se,zt)),Qe.mathMl===!0&&(N(le,Lr),N(se,ti),N(se,zt))),a.ADD_TAGS&&(le===ai&&(le=Ie(le)),N(le,a.ADD_TAGS)),a.ADD_ATTR&&(se===li&&(se=Ie(se)),N(se,a.ADD_ATTR)),a.ADD_URI_SAFE_ATTR&&N(Kr,a.ADD_URI_SAFE_ATTR),a.FORBID_CONTENTS&&(Xe===mi&&(Xe=Ie(Xe)),N(Xe,a.FORBID_CONTENTS)),Yr&&(le["#text"]=!0),Ye&&N(le,["html","head","body"]),le.table&&(N(le,["tbody"]),delete qt.tbody),s&&s(a),rt=a)},yi=N({},["mi","mo","mn","ms","mtext"]),xi=N({},["foreignobject","desc","title","annotation-xml"]),Zt=N({},Cr);N(Zt,Mr),N(Zt,sa);var rn=N({},Lr);N(rn,aa);var Ca=function(a){var m=Hr(a);(!m||!m.tagName)&&(m={namespaceURI:Ue,tagName:"template"});var v=M(a.tagName),j=M(m.tagName);if(a.namespaceURI===Xr)return m.namespaceURI===Ue?v==="svg":m.namespaceURI===Qr?v==="svg"&&(j==="annotation-xml"||yi[j]):Boolean(Zt[v]);if(a.namespaceURI===Qr)return m.namespaceURI===Ue?v==="math":m.namespaceURI===Xr?v==="math"&&xi[j]:Boolean(rn[v]);if(a.namespaceURI===Ue){if(m.namespaceURI===Xr&&!xi[j]||m.namespaceURI===Qr&&!yi[j])return!1;var ce=N({},["title","style","font","a","script"]);return!rn[v]&&(ce[v]||!Zt[v])}return!1},Pe=function(a){q(w.removed,{element:a});try{a.parentNode.removeChild(a)}catch(m){try{a.outerHTML=ii}catch(v){a.remove()}}},vi=function(a,m){try{q(w.removed,{attribute:m.getAttributeNode(a),from:m})}catch(v){q(w.removed,{attribute:null,from:m})}if(m.removeAttribute(a),a==="is"&&!se[a])if(Ke||Vt)try{Pe(m)}catch(v){}else try{m.setAttribute(a,"")}catch(v){}},_i=function(a){var m=void 0,v=void 0;if(Jr)a="<remove></remove>"+a;else{var j=V(a,/^[\r\n\t ]+/);v=j&&j[0]}et==="application/xhtml+xml"&&(a='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+a+"</body></html>");var ce=Le?Le.createHTML(a):a;if(Gt===Ue)try{m=new _a().parseFromString(ce,et)}catch(pe){}if(!m||!m.documentElement){m=Fr.createDocument(Gt,"template",null);try{m.documentElement.innerHTML=en?"":ce}catch(pe){}}var ue=m.body||m.documentElement;return a&&v&&ue.insertBefore(U.createTextNode(v),ue.childNodes[0]||null),Gt===Ue?Ea.call(m,Ye?"html":"body")[0]:Ye?m.documentElement:ue},bi=function(a){return Sa.call(a.ownerDocument||a,a,zr.SHOW_ELEMENT|zr.SHOW_COMMENT|zr.SHOW_TEXT,null,!1)},Ma=function(a){return a instanceof va&&(typeof a.nodeName!="string"||typeof a.textContent!="string"||typeof a.removeChild!="function"||!(a.attributes instanceof xa)||typeof a.removeAttribute!="function"||typeof a.setAttribute!="function"||typeof a.namespaceURI!="string"||typeof a.insertBefore!="function")},bt=function(a){return(typeof Ze=="undefined"?"undefined":vt(Ze))==="object"?a instanceof Ze:a&&(typeof a=="undefined"?"undefined":vt(a))==="object"&&typeof a.nodeType=="number"&&typeof a.nodeName=="string"},Ce=function(a,m,v){!ke[a]||$(ke[a],function(j){j.call(w,m,v,rt)})},wi=function(a){var m=void 0;if(Ce("beforeSanitizeElements",a,null),Ma(a)||V(a.nodeName,/[\u0080-\uFFFF]/))return Pe(a),!0;var v=tt(a.nodeName);if(Ce("uponSanitizeElement",a,{tagName:v,allowedTags:le}),!bt(a.firstElementChild)&&(!bt(a.content)||!bt(a.content.firstElementChild))&&J(/<[/\w]/g,a.innerHTML)&&J(/<[/\w]/g,a.textContent)||v==="select"&&J(/<template/i,a.innerHTML))return Pe(a),!0;if(!le[v]||qt[v]){if(Yr&&!Xe[v]){var j=Hr(a)||a.parentNode,ce=Ta(a)||a.childNodes;if(ce&&j)for(var ue=ce.length,pe=ue-1;pe>=0;--pe)j.insertBefore(wa(ce[pe],!0),ka(a))}return!qt[v]&&Ti(v)&&(X.tagNameCheck instanceof RegExp&&J(X.tagNameCheck,v)||X.tagNameCheck instanceof Function&&X.tagNameCheck(v))?!1:(Pe(a),!0)}return a instanceof jt&&!Ca(a)||(v==="noscript"||v==="noembed")&&J(/<\/no(script|embed)/i,a.innerHTML)?(Pe(a),!0):(Je&&a.nodeType===3&&(m=a.textContent,m=O(m,Br," "),m=O(m,qr," "),a.textContent!==m&&(q(w.removed,{element:a.cloneNode()}),a.textContent=m)),Ce("afterSanitizeElements",a,null),!1)},ki=function(a,m,v){if(pi&&(m==="id"||m==="name")&&(v in U||v in Pa))return!1;if(!(Gr&&!Wr[m]&&J(Da,m))){if(!(ci&&J(Oa,m))){if(!se[m]||Wr[m]){if(!(Ti(a)&&(X.tagNameCheck instanceof RegExp&&J(X.tagNameCheck,a)||X.tagNameCheck instanceof Function&&X.tagNameCheck(a))&&(X.attributeNameCheck instanceof RegExp&&J(X.attributeNameCheck,m)||X.attributeNameCheck instanceof Function&&X.attributeNameCheck(m))||m==="is"&&X.allowCustomizedBuiltInElements&&(X.tagNameCheck instanceof RegExp&&J(X.tagNameCheck,v)||X.tagNameCheck instanceof Function&&X.tagNameCheck(v))))return!1}else if(!Kr[m]){if(!J(Vr,O(v,si,""))){if(!((m==="src"||m==="xlink:href"||m==="href")&&a!=="script"&&L(v,"data:")===0&&fi[a])){if(!(ui&&!J(Na,O(v,si,"")))){if(v)return!1}}}}}}return!0},Ti=function(a){return a.indexOf("-")>0},Si=function(a){var m=void 0,v=void 0,j=void 0,ce=void 0;Ce("beforeSanitizeAttributes",a,null);var ue=a.attributes;if(!!ue){var pe={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:se};for(ce=ue.length;ce--;){m=ue[ce];var Me=m,wt=Me.name,Ai=Me.namespaceURI;if(v=oe(m.value),j=tt(wt),pe.attrName=j,pe.attrValue=v,pe.keepAttr=!0,pe.forceKeepAttr=void 0,Ce("uponSanitizeAttribute",a,pe),v=pe.attrValue,!pe.forceKeepAttr&&(vi(wt,a),!!pe.keepAttr)){if(J(/\/>/i,v)){vi(wt,a);continue}Je&&(v=O(v,Br," "),v=O(v,qr," "));var Ua=tt(a.nodeName);if(!!ki(Ua,j,v))try{Ai?a.setAttributeNS(Ai,wt,v):a.setAttribute(wt,v),y(w.removed)}catch(Vl){}}}Ce("afterSanitizeAttributes",a,null)}},La=function A(a){var m=void 0,v=bi(a);for(Ce("beforeSanitizeShadowDOM",a,null);m=v.nextNode();)Ce("uponSanitizeShadowNode",m,null),!wi(m)&&(m.content instanceof ae&&A(m.content),Si(m));Ce("afterSanitizeShadowDOM",a,null)};return w.sanitize=function(A,a){var m=void 0,v=void 0,j=void 0,ce=void 0,ue=void 0;if(en=!A,en&&(A="<!-->"),typeof A!="string"&&!bt(A)){if(typeof A.toString!="function")throw be("toString is not a function");if(A=A.toString(),typeof A!="string")throw be("dirty is not a string, aborting")}if(!w.isSupported){if(vt(_.toStaticHTML)==="object"||typeof _.toStaticHTML=="function"){if(typeof A=="string")return _.toStaticHTML(A);if(bt(A))return _.toStaticHTML(A.outerHTML)}return A}if(Zr||tn(a),w.removed=[],typeof A=="string"&&(_t=!1),!_t)if(A instanceof Ze)m=_i("<!---->"),v=m.ownerDocument.importNode(A,!0),v.nodeType===1&&v.nodeName==="BODY"||v.nodeName==="HTML"?m=v:m.appendChild(v);else{if(!Ke&&!Je&&!Ye&&A.indexOf("<")===-1)return Le&&Wt?Le.createHTML(A):A;if(m=_i(A),!m)return Ke?null:ii}m&&Jr&&Pe(m.firstChild);for(var pe=bi(_t?A:m);j=pe.nextNode();)j.nodeType===3&&j===ce||wi(j)||(j.content instanceof ae&&La(j.content),Si(j),ce=j);if(ce=null,_t)return A;if(Ke){if(Vt)for(ue=Aa.call(m.ownerDocument);m.firstChild;)ue.appendChild(m.firstChild);else ue=m;return se.shadowroot&&(ue=$a.call(I,ue,!0)),ue}var Me=Ye?m.outerHTML:m.innerHTML;return Je&&(Me=O(Me,Br," "),Me=O(Me,qr," ")),Le&&Wt?Le.createHTML(Me):Me},w.setConfig=function(A){tn(A),Zr=!0},w.clearConfig=function(){rt=null,Zr=!1},w.isValidAttribute=function(A,a,m){rt||tn({});var v=tt(A),j=tt(a);return ki(v,j,m)},w.addHook=function(A,a){typeof a=="function"&&(ke[A]=ke[A]||[],q(ke[A],a))},w.removeHook=function(A){ke[A]&&y(ke[A])},w.removeHooks=function(A){ke[A]&&(ke[A]=[])},w.removeAllHooks=function(){ke={}},w}var ya=ri();return ya})});function ss(){return{baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}function kl(n){gt=n}function ie(n,e){if(e){if(Tl.test(n))return n.replace(Sl,as)}else if(Al.test(n))return n.replace(El,as);return n}function ls(n){return n.replace(Dl,(e,t)=>(t=t.toLowerCase(),t==="colon"?":":t.charAt(0)==="#"?t.charAt(1)==="x"?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""))}function B(n,e){n=n.source||n,e=e||"";let t={replace:(r,i)=>(i=i.source||i,i=i.replace(Ol,"$1"),n=n.replace(r,i),t),getRegex:()=>new RegExp(n,e)};return t}function cs(n,e,t){if(n){let r;try{r=decodeURIComponent(ls(t)).replace(Nl,"").toLowerCase()}catch(i){return null}if(r.indexOf("javascript:")===0||r.indexOf("vbscript:")===0||r.indexOf("data:")===0)return null}e&&!Rl.test(t)&&(t=Ml(e,t));try{t=encodeURI(t).replace(/%25/g,"%")}catch(r){return null}return t}function Ml(n,e){Ar[" "+n]||(Il.test(n)?Ar[" "+n]=n+"/":Ar[" "+n]=$r(n,"/",!0)),n=Ar[" "+n];let t=n.indexOf(":")===-1;return e.substring(0,2)==="//"?t?e:n.replace(Pl,"$1")+e:e.charAt(0)==="/"?t?e:n.replace(Cl,"$1")+e:n+e}function _e(n){let e=1,t,r;for(;e<arguments.length;e++){t=arguments[e];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n}function us(n,e){let t=n.replace(/\|/g,(o,s,l)=>{let u=!1,b=s;for(;--b>=0&&l[b]==="\\";)u=!u;return u?"|":" |"}),r=t.split(/ \|/),i=0;if(r[0].trim()||r.shift(),r[r.length-1].trim()||r.pop(),r.length>e)r.splice(e);else for(;r.length<e;)r.push("");for(;i<r.length;i++)r[i]=r[i].trim().replace(/\\\|/g,"|");return r}function $r(n,e,t){let r=n.length;if(r===0)return"";let i=0;for(;i<r;){let o=n.charAt(r-i-1);if(o===e&&!t)i++;else if(o!==e&&t)i++;else break}return n.substr(0,r-i)}function Ll(n,e){if(n.indexOf(e[1])===-1)return-1;let t=n.length,r=0,i=0;for(;i<t;i++)if(n[i]==="\\")i++;else if(n[i]===e[0])r++;else if(n[i]===e[1]&&(r--,r<0))return i;return-1}function ps(n){n&&n.sanitize&&!n.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function ms(n,e){if(e<1)return"";let t="";for(;e>1;)e&1&&(t+=n),e>>=1,n+=n;return t+n}function fs(n,e,t,r){let i=e.href,o=e.title?ie(e.title):null,s=n[1].replace(/\\([\[\]])/g,"$1");if(n[0].charAt(0)!=="!"){r.state.inLink=!0;let l={type:"link",raw:t,href:i,title:o,text:s,tokens:r.inlineTokens(s,[])};return r.state.inLink=!1,l}else return{type:"image",raw:t,href:i,title:o,text:ie(s)}}function Ul(n,e){let t=n.match(/^(\s+)(?:```)/);if(t===null)return e;let r=t[1];return e.split(`
`).map(i=>{let o=i.match(/^\s+/);if(o===null)return i;let[s]=o;return s.length>=r.length?i.slice(r.length):i}).join(`
`)}function zl(n){return n.replace(/---/g,"\u2014").replace(/--/g,"\u2013").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1\u201C").replace(/"/g,"\u201D").replace(/\.{3}/g,"\u2026")}function ds(n){let e="",t,r,i=n.length;for(t=0;t<i;t++)r=n.charCodeAt(t),Math.random()>.5&&(r="x"+r.toString(16)),e+="&#"+r+";";return e}function D(n,e,t){if(typeof n=="undefined"||n===null)throw new Error("marked(): input parameter is undefined or null");if(typeof n!="string")throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(n)+", string expected");if(typeof e=="function"&&(t=e,e=null),e=_e({},D.defaults,e||{}),ps(e),t){let r=e.highlight,i;try{i=Ne.lex(n,e)}catch(l){return t(l)}let o=function(l){let u;if(!l)try{e.walkTokens&&D.walkTokens(i,e.walkTokens),u=Re.parse(i,e)}catch(b){l=b}return e.highlight=r,l?t(l):t(null,u)};if(!r||r.length<3||(delete e.highlight,!i.length))return o();let s=0;D.walkTokens(i,function(l){l.type==="code"&&(s++,setTimeout(()=>{r(l.text,l.lang,function(u,b){if(u)return o(u);b!=null&&b!==l.text&&(l.text=b,l.escaped=!0),s--,s===0&&o()})},0))}),s===0&&o();return}try{let r=Ne.lex(n,e);return e.walkTokens&&D.walkTokens(r,e.walkTokens),Re.parse(r,e)}catch(r){if(r.message+=`
Please report this to https://github.com/markedjs/marked.`,e.silent)return"<p>An error occurred:</p><pre>"+ie(r.message+"",!0)+"</pre>";throw r}}var gt,Tl,Sl,Al,El,$l,as,Dl,Ol,Nl,Rl,Ar,Il,Pl,Cl,Er,Dr,E,g,Ne,Or,Fn,Bn,Re,dd,hd,gd,yd,xd,vd,_d,hs=f(()=>{gt=ss();Tl=/[&<>"']/,Sl=/[&<>"']/g,Al=/[<>"']|&(?!#?\w+;)/,El=/[<>"']|&(?!#?\w+;)/g,$l={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},as=n=>$l[n];Dl=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;Ol=/(^|[^\[])\^/g;Nl=/[^\w:]/g,Rl=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;Ar={},Il=/^[^:]+:\/*[^/]*$/,Pl=/^([^:]+:)[\s\S]*$/,Cl=/^([^:]+:\/*[^/]*)[\s\S]*$/;Er={exec:function(){}};Dr=class{constructor(e){this.options=e||gt}space(e){let t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){let t=this.rules.block.code.exec(e);if(t){let r=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?r:$r(r,`
`)}}}fences(e){let t=this.rules.block.fences.exec(e);if(t){let r=t[0],i=Ul(r,t[3]||"");return{type:"code",raw:r,lang:t[2]?t[2].trim():t[2],text:i}}}heading(e){let t=this.rules.block.heading.exec(e);if(t){let r=t[2].trim();if(/#$/.test(r)){let o=$r(r,"#");(this.options.pedantic||!o||/ $/.test(o))&&(r=o.trim())}let i={type:"heading",raw:t[0],depth:t[1].length,text:r,tokens:[]};return this.lexer.inline(i.text,i.tokens),i}}hr(e){let t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:t[0]}}blockquote(e){let t=this.rules.block.blockquote.exec(e);if(t){let r=t[0].replace(/^ *> ?/gm,"");return{type:"blockquote",raw:t[0],tokens:this.lexer.blockTokens(r,[]),text:r}}}list(e){let t=this.rules.block.list.exec(e);if(t){let r,i,o,s,l,u,b,k,S,$,y,q,M=t[1].trim(),V=M.length>1,O={type:"list",raw:"",ordered:V,start:V?+M.slice(0,-1):"",loose:!1,items:[]};M=V?`\\d{1,9}\\${M.slice(-1)}`:`\\${M}`,this.options.pedantic&&(M=V?M:"[*+-]");let L=new RegExp(`^( {0,3}${M})((?: [^\\n]*)?(?:\\n|$))`);for(;e&&(q=!1,!(!(t=L.exec(e))||this.rules.block.hr.test(e)));){if(r=t[0],e=e.substring(r.length),k=t[2].split(`
`,1)[0],S=e.split(`
`,1)[0],this.options.pedantic?(s=2,y=k.trimLeft()):(s=t[2].search(/[^ ]/),s=s>4?1:s,y=k.slice(s),s+=t[1].length),u=!1,!k&&/^ *$/.test(S)&&(r+=S+`
`,e=e.substring(S.length+1),q=!0),!q){let J=new RegExp(`^ {0,${Math.min(3,s-1)}}(?:[*+-]|\\d{1,9}[.)])`);for(;e&&($=e.split(`
`,1)[0],k=$,this.options.pedantic&&(k=k.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!J.test(k));){if(k.search(/[^ ]/)>=s||!k.trim())y+=`
`+k.slice(s);else if(!u)y+=`
`+k;else break;!u&&!k.trim()&&(u=!0),r+=$+`
`,e=e.substring($.length+1)}}O.loose||(b?O.loose=!0:/\n *\n *$/.test(r)&&(b=!0)),this.options.gfm&&(i=/^\[[ xX]\] /.exec(y),i&&(o=i[0]!=="[ ] ",y=y.replace(/^\[[ xX]\] +/,""))),O.items.push({type:"list_item",raw:r,task:!!i,checked:o,loose:!1,text:y}),O.raw+=r}O.items[O.items.length-1].raw=r.trimRight(),O.items[O.items.length-1].text=y.trimRight(),O.raw=O.raw.trimRight();let oe=O.items.length;for(l=0;l<oe;l++){this.lexer.state.top=!1,O.items[l].tokens=this.lexer.blockTokens(O.items[l].text,[]);let J=O.items[l].tokens.filter(re=>re.type==="space"),be=J.every(re=>{let Ge=re.raw.split(""),N=0;for(let Ie of Ge)if(Ie===`
`&&(N+=1),N>1)return!0;return!1});!O.loose&&J.length&&be&&(O.loose=!0,O.items[l].loose=!0)}return O}}html(e){let t=this.rules.block.html.exec(e);if(t){let r={type:"html",raw:t[0],pre:!this.options.sanitizer&&(t[1]==="pre"||t[1]==="script"||t[1]==="style"),text:t[0]};return this.options.sanitize&&(r.type="paragraph",r.text=this.options.sanitizer?this.options.sanitizer(t[0]):ie(t[0]),r.tokens=[],this.lexer.inline(r.text,r.tokens)),r}}def(e){let t=this.rules.block.def.exec(e);if(t){t[3]&&(t[3]=t[3].substring(1,t[3].length-1));let r=t[1].toLowerCase().replace(/\s+/g," ");return{type:"def",tag:r,raw:t[0],href:t[2],title:t[3]}}}table(e){let t=this.rules.block.table.exec(e);if(t){let r={type:"table",header:us(t[1]).map(i=>({text:i})),align:t[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:t[3]?t[3].replace(/\n[ \t]*$/,"").split(`
`):[]};if(r.header.length===r.align.length){r.raw=t[0];let i=r.align.length,o,s,l,u;for(o=0;o<i;o++)/^ *-+: *$/.test(r.align[o])?r.align[o]="right":/^ *:-+: *$/.test(r.align[o])?r.align[o]="center":/^ *:-+ *$/.test(r.align[o])?r.align[o]="left":r.align[o]=null;for(i=r.rows.length,o=0;o<i;o++)r.rows[o]=us(r.rows[o],r.header.length).map(b=>({text:b}));for(i=r.header.length,s=0;s<i;s++)r.header[s].tokens=[],this.lexer.inlineTokens(r.header[s].text,r.header[s].tokens);for(i=r.rows.length,s=0;s<i;s++)for(u=r.rows[s],l=0;l<u.length;l++)u[l].tokens=[],this.lexer.inlineTokens(u[l].text,u[l].tokens);return r}}}lheading(e){let t=this.rules.block.lheading.exec(e);if(t){let r={type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:[]};return this.lexer.inline(r.text,r.tokens),r}}paragraph(e){let t=this.rules.block.paragraph.exec(e);if(t){let r={type:"paragraph",raw:t[0],text:t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1],tokens:[]};return this.lexer.inline(r.text,r.tokens),r}}text(e){let t=this.rules.block.text.exec(e);if(t){let r={type:"text",raw:t[0],text:t[0],tokens:[]};return this.lexer.inline(r.text,r.tokens),r}}escape(e){let t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:ie(t[1])}}tag(e){let t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(t[0]):ie(t[0]):t[0]}}link(e){let t=this.rules.inline.link.exec(e);if(t){let r=t[2].trim();if(!this.options.pedantic&&/^</.test(r)){if(!/>$/.test(r))return;let s=$r(r.slice(0,-1),"\\");if((r.length-s.length)%2===0)return}else{let s=Ll(t[2],"()");if(s>-1){let u=(t[0].indexOf("!")===0?5:4)+t[1].length+s;t[2]=t[2].substring(0,s),t[0]=t[0].substring(0,u).trim(),t[3]=""}}let i=t[2],o="";if(this.options.pedantic){let s=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(i);s&&(i=s[1],o=s[3])}else o=t[3]?t[3].slice(1,-1):"";return i=i.trim(),/^</.test(i)&&(this.options.pedantic&&!/>$/.test(r)?i=i.slice(1):i=i.slice(1,-1)),fs(t,{href:i&&i.replace(this.rules.inline._escapes,"$1"),title:o&&o.replace(this.rules.inline._escapes,"$1")},t[0],this.lexer)}}reflink(e,t){let r;if((r=this.rules.inline.reflink.exec(e))||(r=this.rules.inline.nolink.exec(e))){let i=(r[2]||r[1]).replace(/\s+/g," ");if(i=t[i.toLowerCase()],!i||!i.href){let o=r[0].charAt(0);return{type:"text",raw:o,text:o}}return fs(r,i,r[0],this.lexer)}}emStrong(e,t,r=""){let i=this.rules.inline.emStrong.lDelim.exec(e);if(!i||i[3]&&r.match(/[\p{L}\p{N}]/u))return;let o=i[1]||i[2]||"";if(!o||o&&(r===""||this.rules.inline.punctuation.exec(r))){let s=i[0].length-1,l,u,b=s,k=0,S=i[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(S.lastIndex=0,t=t.slice(-1*e.length+s);(i=S.exec(t))!=null;){if(l=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!l)continue;if(u=l.length,i[3]||i[4]){b+=u;continue}else if((i[5]||i[6])&&s%3&&!((s+u)%3)){k+=u;continue}if(b-=u,b>0)continue;if(u=Math.min(u,u+b+k),Math.min(s,u)%2){let y=e.slice(1,s+i.index+u);return{type:"em",raw:e.slice(0,s+i.index+u+1),text:y,tokens:this.lexer.inlineTokens(y,[])}}let $=e.slice(2,s+i.index+u-1);return{type:"strong",raw:e.slice(0,s+i.index+u+1),text:$,tokens:this.lexer.inlineTokens($,[])}}}}codespan(e){let t=this.rules.inline.code.exec(e);if(t){let r=t[2].replace(/\n/g," "),i=/[^ ]/.test(r),o=/^ /.test(r)&&/ $/.test(r);return i&&o&&(r=r.substring(1,r.length-1)),r=ie(r,!0),{type:"codespan",raw:t[0],text:r}}}br(e){let t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){let t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2],[])}}autolink(e,t){let r=this.rules.inline.autolink.exec(e);if(r){let i,o;return r[2]==="@"?(i=ie(this.options.mangle?t(r[1]):r[1]),o="mailto:"+i):(i=ie(r[1]),o=i),{type:"link",raw:r[0],text:i,href:o,tokens:[{type:"text",raw:i,text:i}]}}}url(e,t){let r;if(r=this.rules.inline.url.exec(e)){let i,o;if(r[2]==="@")i=ie(this.options.mangle?t(r[0]):r[0]),o="mailto:"+i;else{let s;do s=r[0],r[0]=this.rules.inline._backpedal.exec(r[0])[0];while(s!==r[0]);i=ie(r[0]),r[1]==="www."?o="http://"+i:o=i}return{type:"link",raw:r[0],text:i,href:o,tokens:[{type:"text",raw:i,text:i}]}}}inlineText(e,t){let r=this.rules.inline.text.exec(e);if(r){let i;return this.lexer.state.inRawBlock?i=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(r[0]):ie(r[0]):r[0]:i=ie(this.options.smartypants?t(r[0]):r[0]),{type:"text",raw:r[0],text:i}}}},E={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)( [^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?<?([^\s>]+)>?(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:Er,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/};E._label=/(?!\s*\])(?:\\.|[^\[\]\\])+/;E._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/;E.def=B(E.def).replace("label",E._label).replace("title",E._title).getRegex();E.bullet=/(?:[*+-]|\d{1,9}[.)])/;E.listItemStart=B(/^( *)(bull) */).replace("bull",E.bullet).getRegex();E.list=B(E.list).replace(/bull/g,E.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+E.def.source+")").getRegex();E._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul";E._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/;E.html=B(E.html,"i").replace("comment",E._comment).replace("tag",E._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex();E.paragraph=B(E._paragraph).replace("hr",E.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",E._tag).getRegex();E.blockquote=B(E.blockquote).replace("paragraph",E.paragraph).getRegex();E.normal=_e({},E);E.gfm=_e({},E.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"});E.gfm.table=B(E.gfm.table).replace("hr",E.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",E._tag).getRegex();E.gfm.paragraph=B(E._paragraph).replace("hr",E.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",E.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",E._tag).getRegex();E.pedantic=_e({},E.normal,{html:B(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",E._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Er,paragraph:B(E.normal._paragraph).replace("hr",E.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",E.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});g={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:Er,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^[^_*]*?\_\_[^_*]*?\*[^_*]*?(?=\_\_)|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?\_[^_*]*?(?=\*\*)|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:Er,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};g._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~";g.punctuation=B(g.punctuation).replace(/punctuation/g,g._punctuation).getRegex();g.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g;g.escapedEmSt=/\\\*|\\_/g;g._comment=B(E._comment).replace("(?:-->|$)","-->").getRegex();g.emStrong.lDelim=B(g.emStrong.lDelim).replace(/punct/g,g._punctuation).getRegex();g.emStrong.rDelimAst=B(g.emStrong.rDelimAst,"g").replace(/punct/g,g._punctuation).getRegex();g.emStrong.rDelimUnd=B(g.emStrong.rDelimUnd,"g").replace(/punct/g,g._punctuation).getRegex();g._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g;g._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/;g._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/;g.autolink=B(g.autolink).replace("scheme",g._scheme).replace("email",g._email).getRegex();g._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/;g.tag=B(g.tag).replace("comment",g._comment).replace("attribute",g._attribute).getRegex();g._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/;g._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/;g._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/;g.link=B(g.link).replace("label",g._label).replace("href",g._href).replace("title",g._title).getRegex();g.reflink=B(g.reflink).replace("label",g._label).replace("ref",E._label).getRegex();g.nolink=B(g.nolink).replace("ref",E._label).getRegex();g.reflinkSearch=B(g.reflinkSearch,"g").replace("reflink",g.reflink).replace("nolink",g.nolink).getRegex();g.normal=_e({},g);g.pedantic=_e({},g.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:B(/^!?\[(label)\]\((.*?)\)/).replace("label",g._label).getRegex(),reflink:B(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",g._label).getRegex()});g.gfm=_e({},g.normal,{escape:B(g.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/});g.gfm.url=B(g.gfm.url,"i").replace("email",g.gfm._extended_email).getRegex();g.breaks=_e({},g.gfm,{br:B(g.br).replace("{2,}","*").getRegex(),text:B(g.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});Ne=class{constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||gt,this.options.tokenizer=this.options.tokenizer||new Dr,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let t={block:E.normal,inline:g.normal};this.options.pedantic?(t.block=E.pedantic,t.inline=g.pedantic):this.options.gfm&&(t.block=E.gfm,this.options.breaks?t.inline=g.breaks:t.inline=g.gfm),this.tokenizer.rules=t}static get rules(){return{block:E,inline:g}}static lex(e,t){return new Ne(t).lex(e)}static lexInline(e,t){return new Ne(t).inlineTokens(e)}lex(e){e=e.replace(/\r\n|\r/g,`
`).replace(/\t/g,"    "),this.blockTokens(e,this.tokens);let t;for(;t=this.inlineQueue.shift();)this.inlineTokens(t.src,t.tokens);return this.tokens}blockTokens(e,t=[]){this.options.pedantic&&(e=e.replace(/^ +$/gm,""));let r,i,o,s;for(;e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(l=>(r=l.call({lexer:this},e,t))?(e=e.substring(r.raw.length),t.push(r),!0):!1))){if(r=this.tokenizer.space(e)){e=e.substring(r.raw.length),r.raw.length===1&&t.length>0?t[t.length-1].raw+=`
`:t.push(r);continue}if(r=this.tokenizer.code(e)){e=e.substring(r.raw.length),i=t[t.length-1],i&&(i.type==="paragraph"||i.type==="text")?(i.raw+=`
`+r.raw,i.text+=`
`+r.text,this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(r);continue}if(r=this.tokenizer.fences(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.heading(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.hr(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.blockquote(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.list(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.html(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.def(e)){e=e.substring(r.raw.length),i=t[t.length-1],i&&(i.type==="paragraph"||i.type==="text")?(i.raw+=`
`+r.raw,i.text+=`
`+r.raw,this.inlineQueue[this.inlineQueue.length-1].src=i.text):this.tokens.links[r.tag]||(this.tokens.links[r.tag]={href:r.href,title:r.title});continue}if(r=this.tokenizer.table(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.lheading(e)){e=e.substring(r.raw.length),t.push(r);continue}if(o=e,this.options.extensions&&this.options.extensions.startBlock){let l=1/0,u=e.slice(1),b;this.options.extensions.startBlock.forEach(function(k){b=k.call({lexer:this},u),typeof b=="number"&&b>=0&&(l=Math.min(l,b))}),l<1/0&&l>=0&&(o=e.substring(0,l+1))}if(this.state.top&&(r=this.tokenizer.paragraph(o))){i=t[t.length-1],s&&i.type==="paragraph"?(i.raw+=`
`+r.raw,i.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(r),s=o.length!==e.length,e=e.substring(r.raw.length);continue}if(r=this.tokenizer.text(e)){e=e.substring(r.raw.length),i=t[t.length-1],i&&i.type==="text"?(i.raw+=`
`+r.raw,i.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(r);continue}if(e){let l="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(l);break}else throw new Error(l)}}return this.state.top=!0,t}inline(e,t){this.inlineQueue.push({src:e,tokens:t})}inlineTokens(e,t=[]){let r,i,o,s=e,l,u,b;if(this.tokens.links){let k=Object.keys(this.tokens.links);if(k.length>0)for(;(l=this.tokenizer.rules.inline.reflinkSearch.exec(s))!=null;)k.includes(l[0].slice(l[0].lastIndexOf("[")+1,-1))&&(s=s.slice(0,l.index)+"["+ms("a",l[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(l=this.tokenizer.rules.inline.blockSkip.exec(s))!=null;)s=s.slice(0,l.index)+"["+ms("a",l[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(l=this.tokenizer.rules.inline.escapedEmSt.exec(s))!=null;)s=s.slice(0,l.index)+"++"+s.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;e;)if(u||(b=""),u=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(k=>(r=k.call({lexer:this},e,t))?(e=e.substring(r.raw.length),t.push(r),!0):!1))){if(r=this.tokenizer.escape(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.tag(e)){e=e.substring(r.raw.length),i=t[t.length-1],i&&r.type==="text"&&i.type==="text"?(i.raw+=r.raw,i.text+=r.text):t.push(r);continue}if(r=this.tokenizer.link(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(r.raw.length),i=t[t.length-1],i&&r.type==="text"&&i.type==="text"?(i.raw+=r.raw,i.text+=r.text):t.push(r);continue}if(r=this.tokenizer.emStrong(e,s,b)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.codespan(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.br(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.del(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.autolink(e,ds)){e=e.substring(r.raw.length),t.push(r);continue}if(!this.state.inLink&&(r=this.tokenizer.url(e,ds))){e=e.substring(r.raw.length),t.push(r);continue}if(o=e,this.options.extensions&&this.options.extensions.startInline){let k=1/0,S=e.slice(1),$;this.options.extensions.startInline.forEach(function(y){$=y.call({lexer:this},S),typeof $=="number"&&$>=0&&(k=Math.min(k,$))}),k<1/0&&k>=0&&(o=e.substring(0,k+1))}if(r=this.tokenizer.inlineText(o,zl)){e=e.substring(r.raw.length),r.raw.slice(-1)!=="_"&&(b=r.raw.slice(-1)),u=!0,i=t[t.length-1],i&&i.type==="text"?(i.raw+=r.raw,i.text+=r.text):t.push(r);continue}if(e){let k="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(k);break}else throw new Error(k)}}return t}},Or=class{constructor(e){this.options=e||gt}code(e,t,r){let i=(t||"").match(/\S*/)[0];if(this.options.highlight){let o=this.options.highlight(e,i);o!=null&&o!==e&&(r=!0,e=o)}return e=e.replace(/\n$/,"")+`
`,i?'<pre><code class="'+this.options.langPrefix+ie(i,!0)+'">'+(r?e:ie(e,!0))+`</code></pre>
`:"<pre><code>"+(r?e:ie(e,!0))+`</code></pre>
`}blockquote(e){return`<blockquote>
`+e+`</blockquote>
`}html(e){return e}heading(e,t,r,i){return this.options.headerIds?"<h"+t+' id="'+this.options.headerPrefix+i.slug(r)+'">'+e+"</h"+t+`>
`:"<h"+t+">"+e+"</h"+t+`>
`}hr(){return this.options.xhtml?`<hr/>
`:`<hr>
`}list(e,t,r){let i=t?"ol":"ul",o=t&&r!==1?' start="'+r+'"':"";return"<"+i+o+`>
`+e+"</"+i+`>
`}listitem(e){return"<li>"+e+`</li>
`}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(e){return"<p>"+e+`</p>
`}table(e,t){return t&&(t="<tbody>"+t+"</tbody>"),`<table>
<thead>
`+e+`</thead>
`+t+`</table>
`}tablerow(e){return`<tr>
`+e+`</tr>
`}tablecell(e,t){let r=t.header?"th":"td";return(t.align?"<"+r+' align="'+t.align+'">':"<"+r+">")+e+"</"+r+`>
`}strong(e){return"<strong>"+e+"</strong>"}em(e){return"<em>"+e+"</em>"}codespan(e){return"<code>"+e+"</code>"}br(){return this.options.xhtml?"<br/>":"<br>"}del(e){return"<del>"+e+"</del>"}link(e,t,r){if(e=cs(this.options.sanitize,this.options.baseUrl,e),e===null)return r;let i='<a href="'+ie(e)+'"';return t&&(i+=' title="'+t+'"'),i+=">"+r+"</a>",i}image(e,t,r){if(e=cs(this.options.sanitize,this.options.baseUrl,e),e===null)return r;let i='<img src="'+e+'" alt="'+r+'"';return t&&(i+=' title="'+t+'"'),i+=this.options.xhtml?"/>":">",i}text(e){return e}},Fn=class{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,t,r){return""+r}image(e,t,r){return""+r}br(){return""}},Bn=class{constructor(){this.seen={}}serialize(e){return e.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(e,t){let r=e,i=0;if(this.seen.hasOwnProperty(r)){i=this.seen[e];do i++,r=e+"-"+i;while(this.seen.hasOwnProperty(r))}return t||(this.seen[e]=i,this.seen[r]=0),r}slug(e,t={}){let r=this.serialize(e);return this.getNextSafeSlug(r,t.dryrun)}},Re=class{constructor(e){this.options=e||gt,this.options.renderer=this.options.renderer||new Or,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new Fn,this.slugger=new Bn}static parse(e,t){return new Re(t).parse(e)}static parseInline(e,t){return new Re(t).parseInline(e)}parse(e,t=!0){let r="",i,o,s,l,u,b,k,S,$,y,q,M,V,O,L,oe,J,be,re,Ge=e.length;for(i=0;i<Ge;i++){if(y=e[i],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[y.type]&&(re=this.options.extensions.renderers[y.type].call({parser:this},y),re!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(y.type))){r+=re||"";continue}switch(y.type){case"space":continue;case"hr":{r+=this.renderer.hr();continue}case"heading":{r+=this.renderer.heading(this.parseInline(y.tokens),y.depth,ls(this.parseInline(y.tokens,this.textRenderer)),this.slugger);continue}case"code":{r+=this.renderer.code(y.text,y.lang,y.escaped);continue}case"table":{for(S="",k="",l=y.header.length,o=0;o<l;o++)k+=this.renderer.tablecell(this.parseInline(y.header[o].tokens),{header:!0,align:y.align[o]});for(S+=this.renderer.tablerow(k),$="",l=y.rows.length,o=0;o<l;o++){for(b=y.rows[o],k="",u=b.length,s=0;s<u;s++)k+=this.renderer.tablecell(this.parseInline(b[s].tokens),{header:!1,align:y.align[s]});$+=this.renderer.tablerow(k)}r+=this.renderer.table(S,$);continue}case"blockquote":{$=this.parse(y.tokens),r+=this.renderer.blockquote($);continue}case"list":{for(q=y.ordered,M=y.start,V=y.loose,l=y.items.length,$="",o=0;o<l;o++)L=y.items[o],oe=L.checked,J=L.task,O="",L.task&&(be=this.renderer.checkbox(oe),V?L.tokens.length>0&&L.tokens[0].type==="paragraph"?(L.tokens[0].text=be+" "+L.tokens[0].text,L.tokens[0].tokens&&L.tokens[0].tokens.length>0&&L.tokens[0].tokens[0].type==="text"&&(L.tokens[0].tokens[0].text=be+" "+L.tokens[0].tokens[0].text)):L.tokens.unshift({type:"text",text:be}):O+=be),O+=this.parse(L.tokens,V),$+=this.renderer.listitem(O,J,oe);r+=this.renderer.list($,q,M);continue}case"html":{r+=this.renderer.html(y.text);continue}case"paragraph":{r+=this.renderer.paragraph(this.parseInline(y.tokens));continue}case"text":{for($=y.tokens?this.parseInline(y.tokens):y.text;i+1<Ge&&e[i+1].type==="text";)y=e[++i],$+=`
`+(y.tokens?this.parseInline(y.tokens):y.text);r+=t?this.renderer.paragraph($):$;continue}default:{let N='Token with "'+y.type+'" type was not found.';if(this.options.silent){console.error(N);return}else throw new Error(N)}}}return r}parseInline(e,t){t=t||this.renderer;let r="",i,o,s,l=e.length;for(i=0;i<l;i++){if(o=e[i],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[o.type]&&(s=this.options.extensions.renderers[o.type].call({parser:this},o),s!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(o.type))){r+=s||"";continue}switch(o.type){case"escape":{r+=t.text(o.text);break}case"html":{r+=t.html(o.text);break}case"link":{r+=t.link(o.href,o.title,this.parseInline(o.tokens,t));break}case"image":{r+=t.image(o.href,o.title,o.text);break}case"strong":{r+=t.strong(this.parseInline(o.tokens,t));break}case"em":{r+=t.em(this.parseInline(o.tokens,t));break}case"codespan":{r+=t.codespan(o.text);break}case"br":{r+=t.br();break}case"del":{r+=t.del(this.parseInline(o.tokens,t));break}case"text":{r+=t.text(o.text);break}default:{let u='Token with "'+o.type+'" type was not found.';if(this.options.silent){console.error(u);return}else throw new Error(u)}}}return r}};D.options=D.setOptions=function(n){return _e(D.defaults,n),kl(D.defaults),D};D.getDefaults=ss;D.defaults=gt;D.use=function(...n){let e=_e({},...n),t=D.defaults.extensions||{renderers:{},childTokens:{}},r;n.forEach(i=>{if(i.extensions&&(r=!0,i.extensions.forEach(o=>{if(!o.name)throw new Error("extension name required");if(o.renderer){let s=t.renderers?t.renderers[o.name]:null;s?t.renderers[o.name]=function(...l){let u=o.renderer.apply(this,l);return u===!1&&(u=s.apply(this,l)),u}:t.renderers[o.name]=o.renderer}if(o.tokenizer){if(!o.level||o.level!=="block"&&o.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");t[o.level]?t[o.level].unshift(o.tokenizer):t[o.level]=[o.tokenizer],o.start&&(o.level==="block"?t.startBlock?t.startBlock.push(o.start):t.startBlock=[o.start]:o.level==="inline"&&(t.startInline?t.startInline.push(o.start):t.startInline=[o.start]))}o.childTokens&&(t.childTokens[o.name]=o.childTokens)})),i.renderer){let o=D.defaults.renderer||new Or;for(let s in i.renderer){let l=o[s];o[s]=(...u)=>{let b=i.renderer[s].apply(o,u);return b===!1&&(b=l.apply(o,u)),b}}e.renderer=o}if(i.tokenizer){let o=D.defaults.tokenizer||new Dr;for(let s in i.tokenizer){let l=o[s];o[s]=(...u)=>{let b=i.tokenizer[s].apply(o,u);return b===!1&&(b=l.apply(o,u)),b}}e.tokenizer=o}if(i.walkTokens){let o=D.defaults.walkTokens;e.walkTokens=function(s){i.walkTokens.call(this,s),o&&o.call(this,s)}}r&&(e.extensions=t),D.setOptions(e)})};D.walkTokens=function(n,e){for(let t of n)switch(e.call(D,t),t.type){case"table":{for(let r of t.header)D.walkTokens(r.tokens,e);for(let r of t.rows)for(let i of r)D.walkTokens(i.tokens,e);break}case"list":{D.walkTokens(t.items,e);break}default:D.defaults.extensions&&D.defaults.extensions.childTokens&&D.defaults.extensions.childTokens[t.type]?D.defaults.extensions.childTokens[t.type].forEach(function(r){D.walkTokens(t[r],e)}):t.tokens&&D.walkTokens(t.tokens,e)}};D.parseInline=function(n,e){if(typeof n=="undefined"||n===null)throw new Error("marked.parseInline(): input parameter is undefined or null");if(typeof n!="string")throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(n)+", string expected");e=_e({},D.defaults,e||{}),ps(e);try{let t=Ne.lexInline(n,e);return e.walkTokens&&D.walkTokens(t,e.walkTokens),Re.parseInline(t,e)}catch(t){if(t.message+=`
Please report this to https://github.com/markedjs/marked.`,e.silent)return"<p>An error occurred:</p><pre>"+ie(t.message+"",!0)+"</pre>";throw t}};D.Parser=Re;D.parser=Re.parse;D.Renderer=Or;D.TextRenderer=Fn;D.Lexer=Ne;D.lexer=Ne.lex;D.Tokenizer=Dr;D.Slugger=Bn;D.parse=D;dd=D.options,hd=D.setOptions,gd=D.use,yd=D.walkTokens,xd=D.parseInline,vd=Re.parse,_d=Ne.lex});function Hl(n){for(let[e,t]of c.currentDataset.fields)if(e==n)return t}function qn(n){return Hl(n.slice(1,-1).trim(),c.currentDataset.fields)}var gs,Vn,ys,Wn=f(()=>{T();gs=Ei(os());hs();P();zn();Un();Vn=/\{.+?\}/g,ys=()=>{if(!c.currentDocument.body.length)return p`
    <div class=preview__page>
      <p>
        Write something in <a class=link @click=${()=>d("showPreview",!1)}>the editor</a> to see it
        show
        up here.
      </p>
    </div>`;let n=c.currentDocument.body.replace(Vn,qn);return(0,gs.sanitize)(D(n)).split("<hr>").map((t,r)=>p`
      <div id=${Ln(r)} class=preview__page>
        ${Sr(t)}
      </div>`)}});var jl,xs,vs=f(()=>{T();z();Wn();jl=([n,e])=>{if(/content|font-family/i.test(n))if(e.length)e='"'+e.replace(/"/g,'\\"')+'"';else return;return e=e.replace(Vn,qn),[n,oo(e)].join(":")},xs=()=>`
<style>
${Object.entries(c.currentUser.styles).map(([n,e])=>`.preview ${n} {
        ${Object.entries(e).map(jl).join(";")}
      }`).join("")}
</style>`});var _s,bs=f(()=>{T();z();_s=()=>{let n=c.intellisense,e=R(".intellisense"),t=R(".intellisense-mapper"),r=R(".first-lines",t),i=R(".last-line",t),o=R(".editor"),{before:s}=lt(o),l=s.split(/\n/),u=l.splice(-1,1),b=s.split("{").pop().trim(),k=new RegExp(to(b),"i");r.innerText=l.join(`
`)+`
`,i.innerText=u;let{offsetHeight:S,offsetWidth:$,offsetLeft:y,offsetTop:q}=i,{scrollWidth:M}=e,V=q+S,O=y+$;O+M>innerWidth&&(O=O-M),e.style.transform=`translate3d(${O}px, ${V-o.scrollTop}px, 0)`,n.suggestions=c.currentDataset.fields.filter(L=>k.test(L[0])),d("intellisense",n)}});var ws,ks,Ts,Ss=f(()=>{T();z();bs();ws=n=>{c.currentDocument.body=n.target.value,_s(),K()},ks=n=>{c.shortcutReady=!1,c.intellisense.logger="",Z.zen&&(de("zen",!1),x())},Ts=n=>{let e=c.intellisense,t=n.key;switch(ro(n)&&(e.logger+=t),t){case"Backspace":e.logger=e.logger.slice(0,-1);break;case"{":e.logger+=t;break;case"}":e.logger="";break}}});var As,Es=f(()=>{P();T();z();Y();As=()=>{var n;return p`
<div class='intellisense-mapper'>
  <span class='first-lines'></span>
  <span class='last-line'></span>
</div>

<ul class=intellisense ?data-active=${((n=c.intellisense.suggestions)==null?void 0:n.length)&&c.currentDocument.body.includes("{")&&document.activeElement==R(".editor")}>
  ${c.intellisense.suggestions.map(([e,t])=>p`
  <li>${h({content:p`<strong>${e}</strong> <span class="light">(${t})</span>`,action:()=>{let r=R(".editor"),{before:i,after:o}=lt(r),s=i.replace(/\{(.(?!\{))*?$/,"")+"{ "+e+" }";r.value=s+o,c.currentDocument.body=r.value,c.intellisense={logger:"",suggestions:[]},d("intellisense",c.intellisense,!0),r.focus(),r.setSelectionRange(s.length,s.length)}})}</li>`)}
</ul>`}});var $s,Ds=f(()=>{P();Ss();T();Es();$s=()=>p`
<textarea class=editor placeholder="Start typing when you're ready..." @keyup=${Ts}
  @focusout=${ks} @input=${ws}>${c.currentDocument.body}</textarea>
${As()}
`});var Os,Ns=f(()=>{P();zn();vs();T();Y();Wn();Ds();je();Os=()=>p`
<toolbar>
  ${h({title:"Show Editor",className:"icon"+(c.showPreview?"":" active"),action:()=>d("showPreview",!1),icon:F.edit})}
  ${h({title:"Show Preview",className:"icon"+(c.showPreview?" active":""),action:()=>d("showPreview",!0),icon:F.preview})}
  <a 
  title="Format your text like a pro with the Markdown cheatsheet."
  class="button icon" 
  rel="noopener"
  target=_blank 
  href="https://www.markdownguide.org/cheat-sheet/">
    ❓
  </a>
</toolbar>

${c.showPreview?p`
    <div class=preview>
      <div class=preview__wrapper>
        ${ys()}
      </div>
    </div>
    ${Sr(xs())}`:$s()}`});var yt,Nr,Rs,Is,Ps,xt,Rr,Mt,he,Ir,Cs,Lt=f(()=>{yt=["font-family","font-size","font-weight","line-height","letter-spacing","text-transform","text-align","color","margin-top","margin-bottom"],Nr=["font-weight","text-transform","color"],Rs=["content","color","font-size","font-weight","text-transform","letter-spacing","text-align"],Is=["padding-left","padding-right","color","list-style","margin-top","margin-bottom"],Ps=["font-size","font-weight","text-transform","text-align","color","margin-top","margin-bottom"],xt={".preview__wrapper":{normieName:"global",useAdjustments:["font-family","font-size","line-height","--vertical-space"]},".preview__page":{normieName:"pages",useAdjustments:["padding-top","padding-bottom","padding-left","padding-right"]},".preview__wrapper::before":{normieName:"header",useAdjustments:Rs},".preview__wrapper::after":{normieName:"footer",useAdjustments:Rs},h1:{normieName:"level 1 headings",useAdjustments:yt},h2:{normieName:"level 2 headings",useAdjustments:yt},h3:{normieName:"level 3 headings",useAdjustments:yt},h4:{normieName:"level 4 headings",useAdjustments:yt},h5:{normieName:"level 5 headings",useAdjustments:yt},h6:{normieName:"level 6 headings",useAdjustments:yt},a:{normieName:"links",useAdjustments:Nr},strong:{normieName:"bold text",useAdjustments:Nr},em:{normieName:"italic Text",useAdjustments:Nr},del:{normieName:"strikethroughs",useAdjustments:Nr},ul:{normieName:"unordered lists",useAdjustments:Is},ol:{normieName:"ordered lists",useAdjustments:Is},blockquote:{normieName:"block quotes",useAdjustments:["color","padding-left","padding-right","border-width","border-color"]},img:{normieName:"images",useAdjustments:["width"]},th:{normieName:"table headings",useAdjustments:Ps},td:{normieName:"table cells",useAdjustments:Ps}},Rr=class{constructor(e){this.type=e}},Mt=class extends Rr{constructor({placeholder:e}){super("text");this.placeholder=e||""}},he=class extends Rr{constructor({min:e,max:t,step:r,unit:i}){super("range");this.min=e||0,this.max=t||100,this.step=r||1,this.unit=i||""}},Ir=class extends Rr{constructor({options:e,defaultValue:t}){super("select");this.options=e||[],this.defaultValue=t||""}},Cs={content:new Mt({placeholder:"{ date }"}),"font-family":new Mt({placeholder:"Inter"}),"font-size":new he({min:8,max:72,step:1,unit:"px"}),"font-weight":new he({min:300,max:900,step:50}),"letter-spacing":new he({min:-5,max:5,step:.2,unit:"px"}),"line-height":new he({min:.5,max:3,step:.1}),"--vertical-space":new he({min:0,max:56,step:1,unit:"px"}),"text-transform":new Ir({defaultValue:"none",options:["capitalize","uppercase","lowercase","none"]}),"text-align":new Ir({defaultValue:"left",options:["left","center","right"]}),width:new he({min:0,max:100,step:1,unit:"%"}),"list-style":new Ir({defaultValue:"disc",options:["disc","circle","square","decimal","lower-alpha","upper-alpha","lower-roman","upper-roman","none"]}),color:new Mt({placeholder:"Tomato"}),"border-color":new Mt({placeholder:"DodgerBlue"}),"border-width":new he({min:0,max:10,step:.5,unit:"px"}),"padding-top":new he({min:0,max:56,step:1,unit:"px"}),"padding-bottom":new he({min:0,max:56,step:1,unit:"px"}),"padding-left":new he({min:0,max:56,step:1,unit:"px"}),"padding-right":new he({min:0,max:56,step:1,unit:"px"}),"margin-top":new he({min:0,max:56,step:1,unit:"px"}),"margin-bottom":new he({min:0,max:56,step:1,unit:"px"})}});var Pr,Ms=f(()=>{T();Pr=(n,e,t)=>{c.currentUser.styles[n][e]=t,d("currentUser",c.currentUser,!0)}});var Gn,Fl,Ls,Us,zs,Hs=f(()=>{Ms();P();T();Gn=n=>n.replace(/-+/g," ").trim(),Fl=n=>parseFloat(n.replace(/turn|deg|pt|px|rem|em|ch|in|vw|vh|%/g,"").trim()),Ls=([n,{normieName:e}],[t,{min:r,max:i,step:o,unit:s}])=>{let l=c.currentUser.styles[n][t]||"",u=Fl(l),b=Gn(t);return p`
  <label class="smol light">
    <span class=label>
      <span class=label__name>${b}</span>
      <span class=label__value>${l||""}</span>
    </span>
    <input 
    title='Change ${e} ${b}'
    min=${r}
    max=${i}
    step=${o}
    .value=${u}
    type=range
    @input=${k=>Pr(n,t,k.target.value+s)} />
  </label>`},Us=([n,{normieName:e}],[t,{placeholder:r}])=>{let i=c.currentUser.styles[n][t],o=Gn(t);return p`
  <label class="smol light">
    <span class=label>
      <span class=label__name>${o}</span>
    </span>
    <input
    title='Change ${e} ${o}'
    placeholder=${r}
    .value=${i||""}
    type=text
    @input=${s=>Pr(n,t,s.target.value)} />
  </label>`},zs=([n,{normieName:e}],[t,{options:r,defaultValue:i}])=>{let o=c.currentUser.styles[n][t]||i,s=Gn(t);return p`
  <label class="smol light">
    <span class=label>
      <span class=label__name>${s}</span>
    </span>
    <select
    title='Change ${e} ${s}'
    .value=${o||""}
    @input=${l=>Pr(n,t,l.target.value)}>
      ${r.map(l=>p`<option ?selected=${l==o}>${l}</option>`)}
    </select>
  </label>`}});var Zn,js=f(()=>{Zn=n=>{let e=document.createElement("style");e.id="temp",e.innerHTML=`
  .preview ${n} {
    box-shadow: 0 0 0 var(--borderWidth) var(--primary-80);
    border-radius: var(--radius);
    transition: box-shadow var(--transition);
  }`,document.body.appendChild(e)}});var Fs,Bs=f(()=>{T();Lt();z();Fs=n=>{Rt.then(e=>{let t=c.currentUser.styles;t[n]=ye(e.currentUser.styles[n]),c.expandedAdjustments.push(xt[n].normieName),d("currentUser",c.currentUser,!0)})}});var qs,Vs=f(()=>{T();qs=n=>{let e=c.expandedAdjustments;e.includes(n)?e.splice(e.indexOf(n),1):e.push(n),d("expandedAdjustments",e)}});var Ws,Gs=f(()=>{P();Lt();T();z();Y();Hs();js();Bs();Vs();je();Ws=([n,{normieName:e,useAdjustments:t}])=>{let r=c.expandedAdjustments.includes(e);return p`
  <div 
  class=adjustment 
  ?data-expanded=${r}
  @mouseenter=${()=>Zn(n)} 
  @touchstart=${()=>Zn(n)}
  @mouseleave=${()=>{var i;return(i=R("#temp"))==null?void 0:i.remove()}}
  @touchend=${()=>{var i;return(i=R("#temp"))==null?void 0:i.remove()}}>

    <button class=adjustment__header @click=${()=>qs(e)}>
      <h3 class=adjustment__header--title>${e}</h3>
      <div class=adjustment__header--actions>
      ${h({title:`Reset ${e.replace(/s$/,"")} styles`,className:"icon",disabled:!r,icon:F.reset,action:()=>Fs(n)})}
      </div>
    </button>
    
    ${r?Object.entries(Cs).filter(([i])=>t.includes(i)).map(([i,o])=>{let s=[n,{normieName:e,useAdjustments:t}],l=[i,o];switch(o.type){case"range":return Ls(s,l);case"text":return Us(s,l);case"select":return zs(s,l)}}):ee}
  </div>`}});var Zs,Js=f(()=>{P();T();Lt();Gs();Zs=()=>p`
<div class="styles">
  <div class=styles__header>
  ${c.showPreview?p`<p class=light>Change the look and feel of your document here.</p>`:p`
      <p class=light>
        <button class="link primary" @click=${()=>d("showPreview",!0)}>Show the document preview</button> to see your
        changes.
      </p>`}
  </div>
  <div class=adjustments>${Object.entries(xt).map(Ws)}</div>
</div>`});var Ys,Ks=f(()=>{P();Ot();T();Zo();dt();ns();fe();Ns();Js();Ys=()=>p`
<main 
?data-zen=${Z.zen}
@click=${()=>ze(!1)}
@dragleave=${x}
@dragenter=${()=>x(C(De()))}
@dragover=${n=>n.preventDefault()}>
  <section class="aside left">${rs()}</section>
  <section class="center">${Os()}</section>
  <section class="aside right">${Go()}</section>
  ${Zs()}
</main>`});var Qs,Xs=f(()=>{P();Pn();T();Y();je();Qs=()=>p`
<nav class=mobile-nav>
  ${h({title:"Open documents",className:"icon",icon:F.documents,action:()=>ht("documents",Z.open_pane!="documents")})}
  ${h({title:"Open data",className:"icon",icon:F.data,action:()=>ht("data",Z.open_pane!="data")})}
  ${h({title:"Open styles",className:"icon",icon:F.adjust,action:()=>ht("styles",Z.open_pane!="styles")})}
</nav>`});function pt(){H.currentDataset=H.currentUser.datasets[0],H.currentDocument=H.currentUser.documents[0],H.savedLocally=H.savedLocally||!1,H.showPreview=H.showPreview||!1,H.showStyles=H.showStyles||!1,H.intellisense=H.intellisense||{suggestions:[],logger:""},H.expandedAdjustments=H.expandedAdjustments||["global","pages"],H.currentUser.styles=H.currentUser.styles||{},Qi(Object.keys(xt),H.currentUser.styles),Bl()}function me(n){console.error(n),H.error=n.message,H.loading=!1,Ve("error",!0)}function K(n=!1){H.savedLocally=!0;let t=n?0:2e3;clearTimeout(ea),ea=setTimeout(r,t),Ve("working",!0,!0);function r(){if(W.currentUser())return W.currentUser().update({data:{flintstone:JSON.stringify(H.currentUser)}}).then(()=>{H.error=!1,Ve("working",!1,!1)}).catch(me);try{H.error=!1,$t(An,H),Ve("working",!1,!1)}catch(i){me(i)}}}function x(n=Ys()){at(p`
    <div id=app ?data-loading=${H.loading}>
      <header>${Ct()}</header>
      ${n}
      <loader></loader>
      <status-message>${H.error?`Error: ${H.error}`:"All changes saved"}</status-message>
      <mobile-only>${Qs()}</mobile-only>
    </div>`,document.body)}function Bl(){for(let[n,e]of Object.entries(Z))Ve(n,e,e)}function de(n,e){Z[n]=e,Ve(n,e,e),$t(En,Z)}function d(n,e,t){H[n]=e,x(),t&&K()}var Jn,H,ea,c,Yn,Rt,Z,T=f(()=>{P();z();Ks();Cn();Te();Lt();mt();Xs();Jn=W.currentUser(),H=$t(An)||mo,ea=setTimeout(()=>0,0),c=H,Yn=Jn==null?void 0:Jn.getUserData(),Rt=fetch("/defaults.json").then(n=>n.json()),Z=$t(En)||fo});var ta,ra=f(()=>{P();Te();T();Y();hr();ta=n=>{let e=["name","password"],t={};return p`
  <form class=mount>
    ${ct({fields:e,formData:t})}
    ${h({className:"primary",content:"Create Account & Sign In",action:()=>{d("loading",!0),W.acceptInvite(n,t.password,!0).then(()=>{W.currentUser().update({full_name:t.name}),d("loading",!1)}).catch(r=>{me(r),renderAll(Modal(AuthError(r.message)))})}})}
  </form>`}});var na,ia=f(()=>{P();Te();T();Y();na=()=>{let n;return p`
  <form class=mount>
    <label class="smol light">
      New Password
      <input required @input=${e=>n=e.target.value} minlength=8 type=password name=password />
    </label>
    ${h({className:"primary",content:"Save New Password",action:()=>{d("loading",!0),W.currentUser().update({password:n}).then(()=>{d("loading",!1),K(!0)}).catch(e=>{me(e),renderAll(Modal(AuthError(e.message)))})}})}
  </form>`}});var ql=Fe(oa=>{Te();ra();ia();fe();gr();In();T();c.loading=!0;var Kn=()=>{if(pt(),location.hash&&location.hash.length){let[n,e]=location.hash.slice(1).split("=");if(location.replace("#"),history.replaceState(null,null,location.href.slice(0,-1)),c.loading=!1,n&&e)switch(n){case"recovery_token":W.recover(e,!0).then(()=>x(C(na())));break;case"confirmation_token":W.confirm(e,!0).then(()=>{x(),K(!0)});break;case"invite_token":x(C(ta(e)));break}}else c.loading=!1,x(),K(!0);addEventListener("keydown",n=>{var e,t;n.key=="Control"&&(c.shortcutReady=!0),c.shortcutReady&&Pt[n.key]&&((t=(e=Pt[n.key])==null?void 0:e.action)==null||t.call(oa,n))}),addEventListener("keyup",n=>{n.key=="Control"&&(c.shortcutReady=!1)})};Yn?Yn.then(n=>{c.currentUser=JSON.parse(n.user_metadata.flintstone),Kn()}).catch(n=>{console.log(n),Kn()}):c.savedLocally?Kn():(c.loading=!1,pt(),x(C(ut())))});ql();})();
/*! @license DOMPurify 2.3.4 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.3.4/LICENSE */
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
/**
 * @license
 * Copyright (c) 2018 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */

(()=>{const wc=new WeakMap(),X=a=>typeof a==="function"&&wc.has(a);const Ka=typeof window!=="undefined"&&window.customElements!=null&&window.customElements.polyfillWrapFlushCallback!==void 0,ia=(a,b,d=null)=>{for(;b!==d;){const e=b.nextSibling;a.removeChild(b),b=e}};const F={},T={};const N=`{{lit-${String(Math.random()).slice(2)}}}`,Sa=`<!--${N}-->`,Lb=new RegExp(`${N}|${Sa}`),ba="$lit$";class Pa{constructor(a,b){this.parts=[],this.element=b;const d=[],e=[],i=document.createTreeWalker(b.content,133,null,!1);let m=0,k=-1,r=0;const{strings:t,values:{length:ma}}=a;for(;r<ma;){const o=i.nextNode();if(o===null){i.currentNode=e.pop();continue}k++;if(o.nodeType===1){if(o.hasAttributes()){const B=o.attributes,{length:W}=B;let J=0;for(let w=0;w<W;w++)Mb(B[w].name,ba)&&J++;for(;J-- >0;){const w=t[r],u=Ca.exec(w)[2],H=u.toLowerCase()+ba,C=o.getAttribute(H);o.removeAttribute(H);const y=C.split(Lb);this.parts.push({type:"attribute",index:k,name:u,strings:y}),r+=y.length-1}}o.tagName==="TEMPLATE"&&(e.push(o),i.currentNode=o.content)}else if(o.nodeType===3){const B=o.data;if(B.indexOf(N)>=0){const W=o.parentNode,J=B.split(Lb),w=J.length-1;for(let u=0;u<w;u++){let H,C=J[u];if(C==="")H=M();else{const y=Ca.exec(C);y!==null&&Mb(y[2],ba)&&(C=C.slice(0,y.index)+y[1]+y[2].slice(0,-ba.length)+y[3]),H=document.createTextNode(C)}W.insertBefore(H,o),this.parts.push({type:"node",index:++k})}J[w]===""?(W.insertBefore(M(),o),d.push(o)):o.data=J[w],r+=w}}else if(o.nodeType===8)if(o.data===N){const B=o.parentNode;(o.previousSibling===null||k===m)&&(k++,B.insertBefore(M(),o)),m=k,this.parts.push({type:"node",index:k}),o.nextSibling===null?o.data="":(d.push(o),k--),r++}else{let B=-1;for(;(B=o.data.indexOf(N,B+1))!==-1;)this.parts.push({type:"node",index:-1}),r++}}for(const o of d)o.parentNode.removeChild(o)}}const Mb=(a,b)=>{const d=a.length-b.length;return d>=0&&a.slice(d)===b},Ra=a=>a.index!==-1,M=()=>document.createComment(""),Ca=/([ \x09\x0a\x0c\x0d])([^\0-\x1F\x7F-\x9F "'>=/]+)([ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*))$/;class Aa{constructor(a,b,d){this.__parts=[],this.template=a,this.processor=b,this.options=d}update(a){let b=0;for(const d of this.__parts)d!==void 0&&d.setValue(a[b]),b++;for(const d of this.__parts)d!==void 0&&d.commit()}_clone(){const a=Ka?this.template.element.content.cloneNode(!0):document.importNode(this.template.element.content,!0),b=[],d=this.template.parts,e=document.createTreeWalker(a,133,null,!1);let i=0,m=0,k,r=e.nextNode();for(;i<d.length;){k=d[i];if(!Ra(k)){this.__parts.push(void 0),i++;continue}for(;m<k.index;)m++,r.nodeName==="TEMPLATE"&&(b.push(r),e.currentNode=r.content),(r=e.nextNode())===null&&(e.currentNode=b.pop(),r=e.nextNode());if(k.type==="node"){const t=this.processor.handleTextExpression(this.options);t.insertAfterNode(r.previousSibling),this.__parts.push(t)}else this.__parts.push(...this.processor.handleAttributeExpressions(r,k.name,k.strings,this.options));i++}return Ka&&(document.adoptNode(a),customElements.upgrade(a)),a}}const zc=` ${N} `;class ja{constructor(a,b,d,e){this.strings=a,this.values=b,this.type=d,this.processor=e}getHTML(){const a=this.strings.length-1;let b="",d=!1;for(let e=0;e<a;e++){const i=this.strings[e],m=i.lastIndexOf("<!--");d=(m>-1||d)&&i.indexOf("-->",m+1)===-1;const k=Ca.exec(i);k===null?b+=i+(d?zc:Sa):b+=i.substr(0,k.index)+k[1]+k[2]+ba+k[3]+N}return b+=this.strings[a],b}getTemplateElement(){const a=document.createElement("template");return a.innerHTML=this.getHTML(),a}}const Ba=a=>a===null||!(typeof a==="object"||typeof a==="function"),La=a=>Array.isArray(a)||!!(a&&a[Symbol.iterator]);class za{constructor(a,b,d){this.dirty=!0,this.element=a,this.name=b,this.strings=d,this.parts=[];for(let e=0;e<d.length-1;e++)this.parts[e]=this._createPart()}_createPart(){return new Ma(this)}_getValue(){const a=this.strings,b=a.length-1;let d="";for(let e=0;e<b;e++){d+=a[e];const i=this.parts[e];if(i!==void 0){const m=i.value;if(Ba(m)||!La(m))d+=typeof m==="string"?m:String(m);else for(const k of m)d+=typeof k==="string"?k:String(k)}}return d+=a[b],d}commit(){this.dirty&&(this.dirty=!1,this.element.setAttribute(this.name,this._getValue()))}}class Ma{constructor(a){this.value=void 0,this.committer=a}setValue(a){a!==F&&(!Ba(a)||a!==this.value)&&(this.value=a,X(a)||(this.committer.dirty=!0))}commit(){for(;X(this.value);){const a=this.value;this.value=F,a(this)}if(this.value===F)return;this.committer.commit()}}class aa{constructor(a){this.value=void 0,this.__pendingValue=void 0,this.options=a}appendInto(a){this.startNode=a.appendChild(M()),this.endNode=a.appendChild(M())}insertAfterNode(a){this.startNode=a,this.endNode=a.nextSibling}appendIntoPart(a){a.__insert(this.startNode=M()),a.__insert(this.endNode=M())}insertAfterPart(a){a.__insert(this.startNode=M()),this.endNode=a.endNode,a.endNode=this.startNode}setValue(a){this.__pendingValue=a}commit(){if(this.startNode.parentNode===null)return;for(;X(this.__pendingValue);){const b=this.__pendingValue;this.__pendingValue=F,b(this)}const a=this.__pendingValue;if(a===F)return;Ba(a)?a!==this.value&&this.__commitText(a):a instanceof ja?this.__commitTemplateResult(a):a instanceof Node?this.__commitNode(a):La(a)?this.__commitIterable(a):a===T?(this.value=T,this.clear()):this.__commitText(a)}__insert(a){this.endNode.parentNode.insertBefore(a,this.endNode)}__commitNode(a){if(this.value===a)return;this.clear(),this.__insert(a),this.value=a}__commitText(a){const b=this.startNode.nextSibling;a=a==null?"":a;const d=typeof a==="string"?a:String(a);b===this.endNode.previousSibling&&b.nodeType===3?b.data=d:this.__commitNode(document.createTextNode(d)),this.value=a}__commitTemplateResult(a){const b=this.options.templateFactory(a);if(this.value instanceof Aa&&this.value.template===b)this.value.update(a.values);else{const d=new Aa(b,a.processor,this.options),e=d._clone();d.update(a.values),this.__commitNode(e),this.value=d}}__commitIterable(a){Array.isArray(this.value)||(this.value=[],this.clear());const b=this.value;let d=0,e;for(const i of a)e=b[d],e===void 0&&(e=new aa(this.options),b.push(e),d===0?e.appendIntoPart(this):e.insertAfterPart(b[d-1])),e.setValue(i),e.commit(),d++;d<b.length&&(b.length=d,this.clear(e&&e.endNode))}clear(a=this.startNode){ia(this.startNode.parentNode,a.nextSibling,this.endNode)}}class Ga{constructor(a,b,d){this.value=void 0,this.__pendingValue=void 0;if(d.length!==2||d[0]!==""||d[1]!=="")throw new Error("Boolean attributes can only contain a single expression");this.element=a,this.name=b,this.strings=d}setValue(a){this.__pendingValue=a}commit(){for(;X(this.__pendingValue);){const b=this.__pendingValue;this.__pendingValue=F,b(this)}if(this.__pendingValue===F)return;const a=!!this.__pendingValue;this.value!==a&&(a?this.element.setAttribute(this.name,""):this.element.removeAttribute(this.name),this.value=a),this.__pendingValue=F}}class Ia extends za{constructor(a,b,d){super(a,b,d);this.single=d.length===2&&d[0]===""&&d[1]===""}_createPart(){return new Jb(this)}_getValue(){return this.single?this.parts[0].value:super._getValue()}commit(){this.dirty&&(this.dirty=!1,this.element[this.name]=this._getValue())}}class Jb extends Ma{}let Kb=!1;(()=>{try{const a={get capture(){return Kb=!0,!1}};window.addEventListener("test",a,a),window.removeEventListener("test",a,a)}catch(a){}})();class Ha{constructor(a,b,d){this.value=void 0,this.__pendingValue=void 0,this.element=a,this.eventName=b,this.eventContext=d,this.__boundHandleEvent=e=>this.handleEvent(e)}setValue(a){this.__pendingValue=a}commit(){for(;X(this.__pendingValue);){const i=this.__pendingValue;this.__pendingValue=F,i(this)}if(this.__pendingValue===F)return;const a=this.__pendingValue,b=this.value,d=a==null||b!=null&&(a.capture!==b.capture||a.once!==b.once||a.passive!==b.passive),e=a!=null&&(b==null||d);d&&this.element.removeEventListener(this.eventName,this.__boundHandleEvent,this.__options),e&&(this.__options=yc(a),this.element.addEventListener(this.eventName,this.__boundHandleEvent,this.__options)),this.value=a,this.__pendingValue=F}handleEvent(a){typeof this.value==="function"?this.value.call(this.eventContext||this.element,a):this.value.handleEvent(a)}}const yc=a=>a&&(Kb?{capture:a.capture,passive:a.passive,once:a.once}:a.capture);class Ib{handleAttributeExpressions(a,b,d,e){const i=b[0];if(i==="."){const k=new Ia(a,b.slice(1),d);return k.parts}if(i==="@")return[new Ha(a,b.slice(1),e.eventContext)];if(i==="?")return[new Ga(a,b.slice(1),d)];const m=new za(a,b,d);return m.parts}handleTextExpression(a){return new aa(a)}}const Ja=new Ib();function Na(a){let b=Qa.get(a.type);b===void 0&&(b={stringsArray:new WeakMap(),keyString:new Map()},Qa.set(a.type,b));let d=b.stringsArray.get(a.strings);if(d!==void 0)return d;const e=a.strings.join(N);return d=b.keyString.get(e),d===void 0&&(d=new Pa(a,a.getTemplateElement()),b.keyString.set(e,d)),b.stringsArray.set(a.strings,d),d}const Qa=new Map();const Oa=new WeakMap(),ka=(a,b,d)=>{let e=Oa.get(b);e===void 0&&(ia(b,b.firstChild),Oa.set(b,e=new aa(Object.assign({templateFactory:Na},d))),e.appendInto(b)),e.setValue(a),e.commit()};typeof window!=="undefined"&&(window.litHtmlVersions||(window.litHtmlVersions=[])).push("1.2.1");const A=(a,...b)=>new ja(a,b,"html",Ja);var wa=a=>{p("currentDocument",g.currentUser.documents[a]),g.showPreview&&G()};var lb=()=>{let a={id:"New Document",body:""},b=g.currentUser.documents;b.push(a),p("currentUser",g.currentUser),wa(b.length-1)};var mb=a=>{let b=g.currentUser.documents;b.splice(a,1),g.currentUser.documents=b,p("currentUser",g.currentUser),p("currentDocument",g.currentUser.documents[0]),g.showPreview&&G()};var nb=a=>{g.currentDocument.id=a,p("currentDocument",g.currentDocument)};var ob=()=>A`
<h2>Documents</h2>
${g.currentDocument?A`
    <div data-active=true>
      <h3>
        <input type=text .value=${g.currentDocument.id} @input=${a=>nb(a.target.value)} />
      </h3>
    </div>
    `:T}
<ul class=sets>
  ${g.currentUser.documents.map((a,b)=>A`
  <li>
    <button class=link @click=${()=>wa(b)}>
      <h4>${a.id}</h4>
    </button>
    <button class=icon @click=${()=>mb(b)}>🗑️</button>
  </li>
  `)}
  <button @click=${lb}>Add Document</button>
</ul>
`;var va=a=>{p("currentDataset",g.currentUser.datasets[a]),g.showPreview&&G()};var fb=()=>{let a={id:"New Dataset",fields:[]},b=g.currentUser.datasets;b.push(a),p("currentUser",g.currentUser),va(b.length-1)};var gb=()=>{g.currentDataset.fields.push(["",""]),p("currentDataset",g.currentDataset)};var hb=a=>{let b=g.currentUser.datasets;b.splice(a,1),g.currentUser.datasets=b,p("currentUser",g.currentUser),p("currentDataset",g.currentUser.datasets[0]),g.showPreview&&G()};var ib=a=>{g.currentDataset.id=a,p("currentDataset",g.currentDataset)};var pb=(a,b)=>{let d=_(b);d.fields.splice(a,1),p("currentDataset",d)};var qb=(a,b,d)=>{let e=_(d),[i,m]=e.fields[a];e.fields[a]=[b,m],p("currentDataset",e)};var rb=(a,b,d)=>{let e=_(d),[i,m]=e.fields[a];e.fields[a]=[i,b],p("currentDataset",e)};var jb=([a,b],d,e)=>{let i=`${d}_${e}_key`,m=`${d}_${e}_value`;return A`
  <li>
    <key>
      <label for=${i}>Name</label>
      <input @input=${k=>qb(d,k.target.value,e)} .value=${a} type=text id=${i} />
    </key>
    <value>
      <label for=${m}>Value</label>
      <input @input=${k=>rb(d,k.target.value,e)} .value=${b} type=text
      id=${m} />
    </value>
    <button class=icon title="Delete Field" @click=${pb.bind(void 0,d,e)}>🗑️</button>
  </li>
`};var kb=()=>A`
<h2>Data</h2>
${g.currentDataset?A`
    <div data-active=true>
      <h3>
        <input type=text .value=${g.currentDataset.id} @input=${a=>ib(a.target.value)} />
      </h3>
      <ul class=fields>
        ${g.currentDataset.fields.map((a,b)=>jb(a,b,g.currentDataset.id))}
        <button @click=${gb}>Add Field</button>
      </ul>
    </div>
    `:T}
<ul class=sets>
  ${g.currentUser.datasets.map((a,b)=>A`
  <li>
    <button class=link @click=${()=>va(b)}>
      <h4>${a.id}</h4>
    </button>
    <button class=icon @click=${()=>hb(b)}>🗑️</button>
  </li>
  `)}
  <button @click=${fb}>Add Data</button>
</ul>
`;var sb=()=>A`

  <toolbar>
    <button 
    ?data-active=${!g.showPreview} 
    title="Show editor" 
    class=icon
    @click=${()=>p("showPreview",!1)}>
      ✍️
    </button>
    <button 
    ?data-active=${g.showPreview} 
    title="Show preview" 
    class=icon
    @click=${G}>
      👀
    </button>
  </toolbar>

  ${g.showPreview?A`<div class=preview></div>`:A`<textarea class=editor @input=${a=>g.currentDocument.body=a.target.value}>${g.currentDocument.body}</textarea>`}
`;let $=(a,b=document)=>b.querySelector(a),Ta=(a,b)=>b==void 0?JSON.parse(localStorage.getItem(a)):localStorage.setItem(a,JSON.stringify(b));let Nb=setTimeout(()=>null,1e3),la=Ta("contractly_user")||{savedLocally:!1,showPreview:!1,currentDocument:null,currentDataset:null,currentUser:{documents:[],datasets:[{id:"",fields:[]}]}};function ua(){clearTimeout(Nb),Nb=setTimeout(()=>{la.savedLocally=!0,Ta("contractly_user",la)},1e3)}function ta(){ka(ob(),$(".left-pane")),ka(sb(),$(".center-pane")),ka(kb(),$(".right-pane"))}function p(a,b){la[a]=b,ta(),ua()}let _=a=>la.currentUser.datasets.find(b=>b.id==a);var g=la;function ec(a){if(Array.isArray(a)){for(var b=0,d=Array(a.length);b<a.length;b++)d[b]=a[b];return d}else return Array.from(a)}var fc=Object.hasOwnProperty,tb=Object.setPrototypeOf,gc=Object.isFrozen,E=Object.freeze,Q=Object.seal,hc=Object.create,ub=typeof Reflect!=="undefined"&&Reflect,xa=ub.apply,Ea=ub.construct;xa||(xa=function a(b,d,e){return b.apply(d,e)});E||(E=function a(b){return b});Q||(Q=function a(b){return b});Ea||(Ea=function a(b,d){return new(Function.prototype.bind.apply(b,[null].concat(ec(d))))()});var ic=R(Array.prototype.forEach),vb=R(Array.prototype.pop),fa=R(Array.prototype.push),ga=R(String.prototype.toLowerCase),wb=R(String.prototype.match),U=R(String.prototype.replace),jc=R(String.prototype.indexOf),kc=R(String.prototype.trim),V=R(RegExp.prototype.test),xb=lc(TypeError);function R(a){return function(b){for(var d=arguments.length,e=Array(d>1?d-1:0),i=1;i<d;i++)e[i-1]=arguments[i];return xa(a,b,e)}}function lc(a){return function(){for(var b=arguments.length,d=Array(b),e=0;e<b;e++)d[e]=arguments[e];return Ea(a,d)}}function q(a,b){tb&&tb(a,null);for(var d=b.length;d--;){var e=b[d];if(typeof e==="string"){var i=ga(e);i!==e&&(gc(b)||(b[d]=i),e=i)}a[e]=!0}return a}function Z(a){var b=hc(null),d=void 0;for(d in a)xa(fc,a,[d])&&(b[d]=a[d]);return b}var yb=E(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),zb=E(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","audio","canvas","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","video","view","vkern"]),Ab=E(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Bb=E(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),Cb=E(["#text"]),Db=E(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns"]),Fa=E(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Eb=E(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),ya=E(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),mc=Q(/\{\{[\s\S]*|[\s\S]*\}\}/gm),nc=Q(/<%[\s\S]*|[\s\S]*%>/gm),oc=Q(/^data-[\-\w.\u00B7-\uFFFF]/),pc=Q(/^aria-[\-\w]+$/),qc=Q(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),rc=Q(/^(?:\w+script|data):/i),sc=Q(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),ha=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol==="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};function L(a){if(Array.isArray(a)){for(var b=0,d=Array(a.length);b<a.length;b++)d[b]=a[b];return d}else return Array.from(a)}var tc=function a(){return typeof window==="undefined"?null:window},uc=function a(b,d){if((typeof b==="undefined"?"undefined":ha(b))!=="object"||typeof b.createPolicy!=="function")return null;var e=null,i="data-tt-policy-suffix";d.currentScript&&d.currentScript.hasAttribute(i)&&(e=d.currentScript.getAttribute(i));var m="dompurify"+(e?"#"+e:"");try{return b.createPolicy(m,{createHTML:function k(r){return r}})}catch(k){return console.warn("TrustedTypes policy "+m+" could not be created."),null}};function Fb(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:tc(),b=function l(c){return Fb(c)};b.version="2.2.2",b.removed=[];if(!a||!a.document||a.document.nodeType!==9)return b.isSupported=!1,b;var d=a.document,e=a.document,i=a.DocumentFragment,m=a.HTMLTemplateElement,k=a.Node,r=a.NodeFilter,t=a.NamedNodeMap,ma=t===void 0?a.NamedNodeMap||a.MozNamedAttrMap:t,o=a.Text,B=a.Comment,W=a.DOMParser,J=a.trustedTypes;if(typeof m==="function"){var w=e.createElement("template");w.content&&w.content.ownerDocument&&(e=w.content.ownerDocument)}var u=uc(J,d),H=u&&Da?u.createHTML(""):"",C=e,y=C.implementation,Ua=C.createNodeIterator,Va=C.getElementsByTagName,Wa=C.createDocumentFragment,Xa=d.importNode,h={};try{h=Z(e).documentMode?e.documentMode:{}}catch(l){}var n={};b.isSupported=y&&typeof y.createHTMLDocument!=="undefined"&&h!==9;var v=mc,O=nc,na=oc,Bc=pc,Cc=rc,Ob=sc,Ya=qc,x=null,Pb=q({},[].concat(L(yb),L(zb),L(Ab),L(Bb),L(Cb))),z=null,Qb=q({},[].concat(L(Db),L(Fa),L(Eb),L(ya))),Za=null,Rb=null,Sb=!0,_a=!0,Tb=!1,ca=!1,oa=!1,$a=!1,ab=!1,pa=!1,bb=!1,Ub=!0,Da=!1,Vb=!0,cb=!0,qa=!1,da={},Dc=q({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","plaintext","script","style","svg","template","thead","title","video","xmp"]),Wb=null,Xb=q({},["audio","video","img","source","image","track"]),db=null,Yb=q({},["alt","class","for","id","label","name","pattern","placeholder","summary","title","value","style","xmlns"]),ea=null,Ec=e.createElement("form"),eb=function l(c){if(ea&&ea===c)return;(!c||(typeof c==="undefined"?"undefined":ha(c))!=="object")&&(c={}),c=Z(c),x="ALLOWED_TAGS"in c?q({},c.ALLOWED_TAGS):Pb,z="ALLOWED_ATTR"in c?q({},c.ALLOWED_ATTR):Qb,db="ADD_URI_SAFE_ATTR"in c?q(Z(Yb),c.ADD_URI_SAFE_ATTR):Yb,Wb="ADD_DATA_URI_TAGS"in c?q(Z(Xb),c.ADD_DATA_URI_TAGS):Xb,Za="FORBID_TAGS"in c?q({},c.FORBID_TAGS):{},Rb="FORBID_ATTR"in c?q({},c.FORBID_ATTR):{},da="USE_PROFILES"in c?c.USE_PROFILES:!1,Sb=c.ALLOW_ARIA_ATTR!==!1,_a=c.ALLOW_DATA_ATTR!==!1,Tb=c.ALLOW_UNKNOWN_PROTOCOLS||!1,ca=c.SAFE_FOR_TEMPLATES||!1,oa=c.WHOLE_DOCUMENT||!1,pa=c.RETURN_DOM||!1,bb=c.RETURN_DOM_FRAGMENT||!1,Ub=c.RETURN_DOM_IMPORT!==!1,Da=c.RETURN_TRUSTED_TYPE||!1,ab=c.FORCE_BODY||!1,Vb=c.SANITIZE_DOM!==!1,cb=c.KEEP_CONTENT!==!1,qa=c.IN_PLACE||!1,Ya=c.ALLOWED_URI_REGEXP||Ya,ca&&(_a=!1),bb&&(pa=!0),da&&(x=q({},[].concat(L(Cb))),z=[],da.html===!0&&(q(x,yb),q(z,Db)),da.svg===!0&&(q(x,zb),q(z,Fa),q(z,ya)),da.svgFilters===!0&&(q(x,Ab),q(z,Fa),q(z,ya)),da.mathMl===!0&&(q(x,Bb),q(z,Eb),q(z,ya))),c.ADD_TAGS&&(x===Pb&&(x=Z(x)),q(x,c.ADD_TAGS)),c.ADD_ATTR&&(z===Qb&&(z=Z(z)),q(z,c.ADD_ATTR)),c.ADD_URI_SAFE_ATTR&&q(db,c.ADD_URI_SAFE_ATTR),cb&&(x["#text"]=!0),oa&&q(x,["html","head","body"]),x.table&&(q(x,["tbody"]),delete Za.tbody),E&&E(c),ea=c},Y=function l(c){fa(b.removed,{element:c});try{c.parentNode.removeChild(c)}catch(f){c.outerHTML=H}},Zb=function l(c,f){try{fa(b.removed,{attribute:f.getAttributeNode(c),from:f})}catch(j){fa(b.removed,{attribute:null,from:f})}f.removeAttribute(c)},_b=function l(c){var f=void 0,j=void 0;if(ab)c="<remove></remove>"+c;else{var s=wb(c,/^[\r\n\t ]+/);j=s&&s[0]}var K=u?u.createHTML(c):c;try{f=new W().parseFromString(K,"text/html")}catch(P){}if(!f||!f.documentElement){f=y.createHTMLDocument("");var I=f,D=I.body;D.parentNode.removeChild(D.parentNode.firstElementChild),D.outerHTML=K}return c&&j&&f.body.insertBefore(e.createTextNode(j),f.body.childNodes[0]||null),Va.call(f,oa?"html":"body")[0]},$b=function l(c){return Ua.call(c.ownerDocument||c,c,r.SHOW_ELEMENT|r.SHOW_COMMENT|r.SHOW_TEXT,function(){return r.FILTER_ACCEPT},!1)},Fc=function l(c){return c instanceof o||c instanceof B?!1:typeof c.nodeName!=="string"||typeof c.textContent!=="string"||typeof c.removeChild!=="function"||!(c.attributes instanceof ma)||typeof c.removeAttribute!=="function"||typeof c.setAttribute!=="function"||typeof c.namespaceURI!=="string"?!0:!1},ra=function l(c){return(typeof k==="undefined"?"undefined":ha(k))==="object"?c instanceof k:c&&(typeof c==="undefined"?"undefined":ha(c))==="object"&&typeof c.nodeType==="number"&&typeof c.nodeName==="string"},S=function l(c,f,j){if(!n[c])return;ic(n[c],function(s){s.call(b,f,j,ea)})},ac=function l(c){var f=void 0;S("beforeSanitizeElements",c,null);if(Fc(c))return Y(c),!0;if(wb(c.nodeName,/[\u0080-\uFFFF]/))return Y(c),!0;var j=ga(c.nodeName);S("uponSanitizeElement",c,{tagName:j,allowedTags:x});if((j==="svg"||j==="math")&&c.querySelectorAll("p, br, form, table").length!==0)return Y(c),!0;if(!ra(c.firstElementChild)&&(!ra(c.content)||!ra(c.content.firstElementChild))&&V(/<[/\w]/g,c.innerHTML)&&V(/<[/\w]/g,c.textContent))return Y(c),!0;if(!x[j]||Za[j]){if(cb&&!Dc[j]&&typeof c.insertAdjacentHTML==="function")try{var s=c.innerHTML;c.insertAdjacentHTML("AfterEnd",u?u.createHTML(s):s)}catch(K){}return Y(c),!0}return(j==="noscript"||j==="noembed")&&V(/<\/no(script|embed)/i,c.innerHTML)?(Y(c),!0):(ca&&c.nodeType===3&&(f=c.textContent,f=U(f,v," "),f=U(f,O," "),c.textContent!==f&&(fa(b.removed,{element:c.cloneNode()}),c.textContent=f)),S("afterSanitizeElements",c,null),!1)},bc=function l(c,f,j){if(Vb&&(f==="id"||f==="name")&&(j in e||j in Ec))return!1;if(!(_a&&V(na,f))){if(!(Sb&&V(Bc,f))){if(!z[f]||Rb[f])return!1;if(!db[f]){if(!V(Ya,U(j,Ob,""))){if(!((f==="src"||f==="xlink:href"||f==="href")&&c!=="script"&&jc(j,"data:")===0&&Wb[c])){if(!(Tb&&!V(Cc,U(j,Ob,"")))){if(j)return!1}}}}}}return!0},cc=function l(c){var f=void 0,j=void 0,s=void 0,K=void 0;S("beforeSanitizeAttributes",c,null);var I=c.attributes;if(!I)return;var D={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:z};for(K=I.length;K--;){f=I[K];var P=f,sa=P.name,dc=P.namespaceURI;j=kc(f.value),s=ga(sa),D.attrName=s,D.attrValue=j,D.keepAttr=!0,D.forceKeepAttr=void 0,S("uponSanitizeAttribute",c,D),j=D.attrValue;if(D.forceKeepAttr)continue;Zb(sa,c);if(!D.keepAttr)continue;if(V(/\/>/i,j)){Zb(sa,c);continue}ca&&(j=U(j,v," "),j=U(j,O," "));var Hc=c.nodeName.toLowerCase();if(!bc(Hc,s,j))continue;try{dc?c.setAttributeNS(dc,sa,j):c.setAttribute(sa,j),vb(b.removed)}catch(Ne){}}S("afterSanitizeAttributes",c,null)},Gc=function l(c){var f=void 0,j=$b(c);for(S("beforeSanitizeShadowDOM",c,null);f=j.nextNode();){S("uponSanitizeShadowNode",f,null);if(ac(f))continue;f.content instanceof i&&l(f.content),cc(f)}S("afterSanitizeShadowDOM",c,null)};return b.sanitize=function(l,c){var f=void 0,j=void 0,s=void 0,K=void 0,I=void 0;l||(l="<!-->");if(typeof l!=="string"&&!ra(l)){if(typeof l.toString!=="function")throw xb("toString is not a function");{l=l.toString();if(typeof l!=="string")throw xb("dirty is not a string, aborting")}}if(!b.isSupported){if(ha(a.toStaticHTML)==="object"||typeof a.toStaticHTML==="function"){if(typeof l==="string")return a.toStaticHTML(l);if(ra(l))return a.toStaticHTML(l.outerHTML)}return l}$a||eb(c),b.removed=[],typeof l==="string"&&(qa=!1);if(!qa)if(l instanceof k)f=_b("<!---->"),j=f.ownerDocument.importNode(l,!0),j.nodeType===1&&j.nodeName==="BODY"?f=j:j.nodeName==="HTML"?f=j:f.appendChild(j);else{if(!pa&&!ca&&!oa&&l.indexOf("<")===-1)return u&&Da?u.createHTML(l):l;f=_b(l);if(!f)return pa?null:H}f&&ab&&Y(f.firstChild);for(var D=$b(qa?l:f);s=D.nextNode();){if(s.nodeType===3&&s===K)continue;if(ac(s))continue;s.content instanceof i&&Gc(s.content),cc(s),K=s}K=null;if(qa)return l;if(pa){if(bb)for(I=Wa.call(f.ownerDocument);f.firstChild;)I.appendChild(f.firstChild);else I=f;return Ub&&(I=Xa.call(d,I,!0)),I}var P=oa?f.outerHTML:f.innerHTML;return ca&&(P=U(P,v," "),P=U(P,O," ")),u&&Da?u.createHTML(P):P},b.setConfig=function(l){eb(l),$a=!0},b.clearConfig=function(){ea=null,$a=!1},b.isValidAttribute=function(l,c,f){ea||eb({});var j=ga(l),s=ga(c);return bc(j,s,f)},b.addHook=function(l,c){if(typeof c!=="function")return;n[l]=n[l]||[],fa(n[l],c)},b.removeHook=function(l){n[l]&&vb(n[l])},b.removeHooks=function(l){n[l]&&(n[l]=[])},b.removeAllHooks=function(){n={}},b}var vc=Fb(),Gb=vc;var Hb=a=>{let b={"!":"33","#":"35","&":"38;","(":"40",")":"41","*":"42","+":"43","-":"45",".":"46","<":"60;",">":"62;","[":"91","\\":"92","]":"93",_:"95","`":"96","{":"123","}":"125","~":"126"},d=/(^|\s)(> )+(.|\n)+?(?=$|\n(?!>))/g,e="[0-9]+\\. ",i="[-+*] ",m=h=>"&#"+(b[h]||h),k=h=>h.replace(/[&<>]/g,m),r=h=>h.trim().slice(1,-1),t=(h,n)=>`<${h}>${n}</${h}>`,ma=h=>{let n=new RegExp(`(^|\\n)${e}`).test(h),v=new RegExp(`(^|\\n)${n?e:i}`),O=h.split(v).filter(na=>na.trim().length);return t(n?"ol":"ul",O.map(na=>t("li",na)).join(""))},o=h=>{h=h.trim();let n=h.indexOf(" "),v=h.slice(n).replace(/#+$/,"").trim();return t(`h${n} id=${v.replace(/\W+/g,"-").toLowerCase()}`,v)},B=h=>{let n=h.trim().split(/\n/);return t(`h${n[1].indexOf("-")>-1?2:1}`,n[0])},W=h=>{let n=h.slice(1,-1).split("]("),v=n[1].split(/ ["`']/)[1];return`<a href="${n[1]}" ${v?`title="${v}"`:""}>${n[0]}</a>`},J=h=>{let n=h.split(/["`']/),v=n[0].trim().replace(/^<|>$/g,""),O=n[1];return` <a href="${v}" ${O?`title="${O}"`:""}>${v}</a>`},w=h=>{let n=h.slice(2,-1).split("]("),v=n[1].split(/ ["`']/)[1];return`<img src="${n[1]}" ${v?`title="${v}"`:""} alt="${n[0]}">`},u=h=>{let[n,...v]=h.trim().split(/\n+/),O=k(v.slice(0,-1).join("\r")).trim();return t("pre",`<code class="language-${n.slice(3)}">${O}</code>`)},H=h=>(h=t("blockquote",h.replace(/^ *?> /gm,"")),h.replace(d,H)),C=h=>` <a href="${h}">${h.trim()}</a>`,y=h=>t("p",h.trim()),Ua=h=>t("strong",h.slice(2,-2)),Va=h=>t("em",r(h)),Wa=h=>t("del",r(h)),Xa=h=>t("code",k(r(h)));return a.replace(/\r+/g,`
`).replace(/\\[-*_\\`#~+.!(){}[\]]/g,h=>m(h.slice(1))).replace(/(^|\n).+?\n[-=]+(?=$|\n)/g,B).replace(/(^|\n)#+? (.|\n)+?(?=$|\n)/g,o).replace(/(^|\n)([-*_] ?){3,}(?=$|\n)/g,"<hr>").replace(/(^|\n)([0-9]+\.|[-+*]) (.|\n)+?(?=$|[\s\n]{3,})/g,ma).replace(d,H).replace(/(^|\n)```(.|\n)+?```(?=$|\n)/g,u).replace(/  (\n|$)/g,"<br>").replace(/!\[.+?\]\(.+?\)/g,w).replace(/\[.+?\]\(.+?\)/g,W).replace(/<(https?:\/\/|www).+?>( (".+?")|('.+?'))?(?=$|\n| )/g,J).replace(/(^|\n| )(https?:\/\/|www)(.+?)+?(?=$|\n| )/g,C).replace(/\s[*_](?=\s)/g,h=>h.slice(0,1)+m(h.slice(1))).replace(/[*_]{2}.+?[*_]{2}/gm,Ua).replace(/[*_].+?[*_]/gm,Va).replace(/~.+?~/gm,Wa).replace(/`.+?`/gm,Xa).replace(/(^|\n\n+)(?!<[huol]).+?(?=$|\n\n+)/gi,y)};var G=()=>{p("showPreview",!0);let a=g.currentDataset.fields;function b(k){for(let[r,t]of a)if(r==k)return t}function d(k){return b(k.slice(1,-1),a)}let e=$(".preview"),i=g.currentDocument.body.replace(/\{.+?\}/g,d),m=Hb(i);e.innerHTML=Gb.sanitize(m)};g.savedLocally?(g.currentDataset=g.currentUser.datasets[0],g.currentDocument=g.currentUser.documents[0],g.showPreview?G():ta(),ua()):(document.documentElement.classList.add("loading"),fetch("/db.json").then(a=>a.json()).then(a=>a.find(b=>b.name=="Nathan")).then(a=>{g.currentUser=a,g.currentDocument=g.currentUser.documents[0],g.currentDataset=g.currentUser.datasets[0]}).then(ta).then(ua).then(()=>document.documentElement.classList.remove("loading")));})();
/*! @license DOMPurify | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.2.2/LICENSE */
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
/**
 * @license
 * Copyright (c) 2018 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */

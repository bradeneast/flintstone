(()=>{var Eb=(a,b,d)=>new Promise((e,i)=>{var p=q=>{try{n(d.next(q))}catch(Q){i(Q)}},j=q=>{try{n(d.throw(q))}catch(Q){i(Q)}},n=q=>q.done?e(q.value):Promise.resolve(q.value).then(p,j);n((d=d.apply(a,b)).next())});let _=(a,b=document)=>b.querySelector(a),Qa=(a,b)=>b==void 0?JSON.parse(localStorage.getItem(a)):localStorage.setItem(a,JSON.stringify(b));function Xb(a){if(Array.isArray(a)){for(var b=0,d=Array(a.length);b<a.length;b++)d[b]=a[b];return d}else return Array.from(a)}var Yb=Object.hasOwnProperty,hb=Object.setPrototypeOf,Zb=Object.isFrozen,C=Object.freeze,O=Object.seal,_b=Object.create,ib=typeof Reflect!=="undefined"&&Reflect,ra=ib.apply,Ba=ib.construct;ra||(ra=function a(b,d,e){return b.apply(d,e)});C||(C=function a(b){return b});O||(O=function a(b){return b});Ba||(Ba=function a(b,d){return new(Function.prototype.bind.apply(b,[null].concat(Xb(d))))()});var $b=P(Array.prototype.forEach),jb=P(Array.prototype.pop),fa=P(Array.prototype.push),ga=P(String.prototype.toLowerCase),kb=P(String.prototype.match),S=P(String.prototype.replace),ac=P(String.prototype.indexOf),bc=P(String.prototype.trim),T=P(RegExp.prototype.test),lb=cc(TypeError);function P(a){return function(b){for(var d=arguments.length,e=Array(d>1?d-1:0),i=1;i<d;i++)e[i-1]=arguments[i];return ra(a,b,e)}}function cc(a){return function(){for(var b=arguments.length,d=Array(b),e=0;e<b;e++)d[e]=arguments[e];return Ba(a,d)}}function o(a,b){hb&&hb(a,null);for(var d=b.length;d--;){var e=b[d];if(typeof e==="string"){var i=ga(e);i!==e&&(Zb(b)||(b[d]=i),e=i)}a[e]=!0}return a}function Z(a){var b=_b(null),d=void 0;for(d in a)ra(Yb,a,[d])&&(b[d]=a[d]);return b}var mb=C(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),nb=C(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","audio","canvas","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","video","view","vkern"]),ob=C(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),pb=C(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),qb=C(["#text"]),rb=C(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns"]),Ca=C(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),sb=C(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),sa=C(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),dc=O(/\{\{[\s\S]*|[\s\S]*\}\}/gm),ec=O(/<%[\s\S]*|[\s\S]*%>/gm),fc=O(/^data-[\-\w.\u00B7-\uFFFF]/),gc=O(/^aria-[\-\w]+$/),hc=O(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),ic=O(/^(?:\w+script|data):/i),jc=O(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),ha=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol==="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};function J(a){if(Array.isArray(a)){for(var b=0,d=Array(a.length);b<a.length;b++)d[b]=a[b];return d}else return Array.from(a)}var kc=function a(){return typeof window==="undefined"?null:window},lc=function a(b,d){if((typeof b==="undefined"?"undefined":ha(b))!=="object"||typeof b.createPolicy!=="function")return null;var e=null,i="data-tt-policy-suffix";d.currentScript&&d.currentScript.hasAttribute(i)&&(e=d.currentScript.getAttribute(i));var p="dompurify"+(e?"#"+e:"");try{return b.createPolicy(p,{createHTML:function j(n){return n}})}catch(j){return console.warn("TrustedTypes policy "+p+" could not be created."),null}};function tb(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:kc(),b=function k(c){return tb(c)};b.version="2.2.2",b.removed=[];if(!a||!a.document||a.document.nodeType!==9)return b.isSupported=!1,b;var d=a.document,e=a.document,i=a.DocumentFragment,p=a.HTMLTemplateElement,j=a.Node,n=a.NodeFilter,q=a.NamedNodeMap,Q=q===void 0?a.NamedNodeMap||a.MozNamedAttrMap:q,m=a.Text,z=a.Comment,U=a.DOMParser,H=a.trustedTypes;if(typeof p==="function"){var v=e.createElement("template");v.content&&v.content.ownerDocument&&(e=v.content.ownerDocument)}var t=lc(H,d),E=t&&ya?t.createHTML(""):"",A=e,x=A.implementation,Ra=A.createNodeIterator,Sa=A.getElementsByTagName,Ta=A.createDocumentFragment,Ua=d.importNode,g={};try{g=Z(e).documentMode?e.documentMode:{}}catch(k){}var l={};b.isSupported=x&&typeof x.createHTMLDocument!=="undefined"&&g!==9;var u=dc,M=ec,la=fc,sc=gc,tc=ic,Fb=jc,Va=hc,w=null,Gb=o({},[].concat(J(mb),J(nb),J(ob),J(pb),J(qb))),y=null,Hb=o({},[].concat(J(rb),J(Ca),J(sb),J(sa))),Wa=null,Ib=null,Jb=!0,Xa=!0,Kb=!1,ca=!1,ma=!1,Ya=!1,Za=!1,na=!1,_a=!1,Lb=!0,ya=!1,Mb=!0,$a=!0,oa=!1,da={},uc=o({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","plaintext","script","style","svg","template","thead","title","video","xmp"]),Nb=null,Ob=o({},["audio","video","img","source","image","track"]),ab=null,Pb=o({},["alt","class","for","id","label","name","pattern","placeholder","summary","title","value","style","xmlns"]),ea=null,vc=e.createElement("form"),bb=function k(c){if(ea&&ea===c)return;(!c||(typeof c==="undefined"?"undefined":ha(c))!=="object")&&(c={}),c=Z(c),w="ALLOWED_TAGS"in c?o({},c.ALLOWED_TAGS):Gb,y="ALLOWED_ATTR"in c?o({},c.ALLOWED_ATTR):Hb,ab="ADD_URI_SAFE_ATTR"in c?o(Z(Pb),c.ADD_URI_SAFE_ATTR):Pb,Nb="ADD_DATA_URI_TAGS"in c?o(Z(Ob),c.ADD_DATA_URI_TAGS):Ob,Wa="FORBID_TAGS"in c?o({},c.FORBID_TAGS):{},Ib="FORBID_ATTR"in c?o({},c.FORBID_ATTR):{},da="USE_PROFILES"in c?c.USE_PROFILES:!1,Jb=c.ALLOW_ARIA_ATTR!==!1,Xa=c.ALLOW_DATA_ATTR!==!1,Kb=c.ALLOW_UNKNOWN_PROTOCOLS||!1,ca=c.SAFE_FOR_TEMPLATES||!1,ma=c.WHOLE_DOCUMENT||!1,na=c.RETURN_DOM||!1,_a=c.RETURN_DOM_FRAGMENT||!1,Lb=c.RETURN_DOM_IMPORT!==!1,ya=c.RETURN_TRUSTED_TYPE||!1,Za=c.FORCE_BODY||!1,Mb=c.SANITIZE_DOM!==!1,$a=c.KEEP_CONTENT!==!1,oa=c.IN_PLACE||!1,Va=c.ALLOWED_URI_REGEXP||Va,ca&&(Xa=!1),_a&&(na=!0),da&&(w=o({},[].concat(J(qb))),y=[],da.html===!0&&(o(w,mb),o(y,rb)),da.svg===!0&&(o(w,nb),o(y,Ca),o(y,sa)),da.svgFilters===!0&&(o(w,ob),o(y,Ca),o(y,sa)),da.mathMl===!0&&(o(w,pb),o(y,sb),o(y,sa))),c.ADD_TAGS&&(w===Gb&&(w=Z(w)),o(w,c.ADD_TAGS)),c.ADD_ATTR&&(y===Hb&&(y=Z(y)),o(y,c.ADD_ATTR)),c.ADD_URI_SAFE_ATTR&&o(ab,c.ADD_URI_SAFE_ATTR),$a&&(w["#text"]=!0),ma&&o(w,["html","head","body"]),w.table&&(o(w,["tbody"]),delete Wa.tbody),C&&C(c),ea=c},W=function k(c){fa(b.removed,{element:c});try{c.parentNode.removeChild(c)}catch(f){c.outerHTML=E}},Qb=function k(c,f){try{fa(b.removed,{attribute:f.getAttributeNode(c),from:f})}catch(h){fa(b.removed,{attribute:null,from:f})}f.removeAttribute(c)},Rb=function k(c){var f=void 0,h=void 0;if(Za)c="<remove></remove>"+c;else{var s=kb(c,/^[\r\n\t ]+/);h=s&&s[0]}var I=t?t.createHTML(c):c;try{f=new U().parseFromString(I,"text/html")}catch(N){}if(!f||!f.documentElement){f=x.createHTMLDocument("");var F=f,B=F.body;B.parentNode.removeChild(B.parentNode.firstElementChild),B.outerHTML=I}return c&&h&&f.body.insertBefore(e.createTextNode(h),f.body.childNodes[0]||null),Sa.call(f,ma?"html":"body")[0]},Sb=function k(c){return Ra.call(c.ownerDocument||c,c,n.SHOW_ELEMENT|n.SHOW_COMMENT|n.SHOW_TEXT,function(){return n.FILTER_ACCEPT},!1)},wc=function k(c){return c instanceof m||c instanceof z?!1:typeof c.nodeName!=="string"||typeof c.textContent!=="string"||typeof c.removeChild!=="function"||!(c.attributes instanceof Q)||typeof c.removeAttribute!=="function"||typeof c.setAttribute!=="function"||typeof c.namespaceURI!=="string"?!0:!1},pa=function k(c){return(typeof j==="undefined"?"undefined":ha(j))==="object"?c instanceof j:c&&(typeof c==="undefined"?"undefined":ha(c))==="object"&&typeof c.nodeType==="number"&&typeof c.nodeName==="string"},R=function k(c,f,h){if(!l[c])return;$b(l[c],function(s){s.call(b,f,h,ea)})},Tb=function k(c){var f=void 0;R("beforeSanitizeElements",c,null);if(wc(c))return W(c),!0;if(kb(c.nodeName,/[\u0080-\uFFFF]/))return W(c),!0;var h=ga(c.nodeName);R("uponSanitizeElement",c,{tagName:h,allowedTags:w});if((h==="svg"||h==="math")&&c.querySelectorAll("p, br, form, table").length!==0)return W(c),!0;if(!pa(c.firstElementChild)&&(!pa(c.content)||!pa(c.content.firstElementChild))&&T(/<[/\w]/g,c.innerHTML)&&T(/<[/\w]/g,c.textContent))return W(c),!0;if(!w[h]||Wa[h]){if($a&&!uc[h]&&typeof c.insertAdjacentHTML==="function")try{var s=c.innerHTML;c.insertAdjacentHTML("AfterEnd",t?t.createHTML(s):s)}catch(I){}return W(c),!0}return(h==="noscript"||h==="noembed")&&T(/<\/no(script|embed)/i,c.innerHTML)?(W(c),!0):(ca&&c.nodeType===3&&(f=c.textContent,f=S(f,u," "),f=S(f,M," "),c.textContent!==f&&(fa(b.removed,{element:c.cloneNode()}),c.textContent=f)),R("afterSanitizeElements",c,null),!1)},Ub=function k(c,f,h){if(Mb&&(f==="id"||f==="name")&&(h in e||h in vc))return!1;if(!(Xa&&T(la,f))){if(!(Jb&&T(sc,f))){if(!y[f]||Ib[f])return!1;if(!ab[f]){if(!T(Va,S(h,Fb,""))){if(!((f==="src"||f==="xlink:href"||f==="href")&&c!=="script"&&ac(h,"data:")===0&&Nb[c])){if(!(Kb&&!T(tc,S(h,Fb,"")))){if(h)return!1}}}}}}return!0},Vb=function k(c){var f=void 0,h=void 0,s=void 0,I=void 0;R("beforeSanitizeAttributes",c,null);var F=c.attributes;if(!F)return;var B={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:y};for(I=F.length;I--;){f=F[I];var N=f,qa=N.name,Wb=N.namespaceURI;h=bc(f.value),s=ga(qa),B.attrName=s,B.attrValue=h,B.keepAttr=!0,B.forceKeepAttr=void 0,R("uponSanitizeAttribute",c,B),h=B.attrValue;if(B.forceKeepAttr)continue;Qb(qa,c);if(!B.keepAttr)continue;if(T(/\/>/i,h)){Qb(qa,c);continue}ca&&(h=S(h,u," "),h=S(h,M," "));var yc=c.nodeName.toLowerCase();if(!Ub(yc,s,h))continue;try{Wb?c.setAttributeNS(Wb,qa,h):c.setAttribute(qa,h),jb(b.removed)}catch(Sd){}}R("afterSanitizeAttributes",c,null)},xc=function k(c){var f=void 0,h=Sb(c);for(R("beforeSanitizeShadowDOM",c,null);f=h.nextNode();){R("uponSanitizeShadowNode",f,null);if(Tb(f))continue;f.content instanceof i&&k(f.content),Vb(f)}R("afterSanitizeShadowDOM",c,null)};return b.sanitize=function(k,c){var f=void 0,h=void 0,s=void 0,I=void 0,F=void 0;k||(k="<!-->");if(typeof k!=="string"&&!pa(k)){if(typeof k.toString!=="function")throw lb("toString is not a function");{k=k.toString();if(typeof k!=="string")throw lb("dirty is not a string, aborting")}}if(!b.isSupported){if(ha(a.toStaticHTML)==="object"||typeof a.toStaticHTML==="function"){if(typeof k==="string")return a.toStaticHTML(k);if(pa(k))return a.toStaticHTML(k.outerHTML)}return k}Ya||bb(c),b.removed=[],typeof k==="string"&&(oa=!1);if(!oa)if(k instanceof j)f=Rb("<!---->"),h=f.ownerDocument.importNode(k,!0),h.nodeType===1&&h.nodeName==="BODY"?f=h:h.nodeName==="HTML"?f=h:f.appendChild(h);else{if(!na&&!ca&&!ma&&k.indexOf("<")===-1)return t&&ya?t.createHTML(k):k;f=Rb(k);if(!f)return na?null:E}f&&Za&&W(f.firstChild);for(var B=Sb(oa?k:f);s=B.nextNode();){if(s.nodeType===3&&s===I)continue;if(Tb(s))continue;s.content instanceof i&&xc(s.content),Vb(s),I=s}I=null;if(oa)return k;if(na){if(_a)for(F=Ta.call(f.ownerDocument);f.firstChild;)F.appendChild(f.firstChild);else F=f;return Lb&&(F=Ua.call(d,F,!0)),F}var N=ma?f.outerHTML:f.innerHTML;return ca&&(N=S(N,u," "),N=S(N,M," ")),t&&ya?t.createHTML(N):N},b.setConfig=function(k){bb(k),Ya=!0},b.clearConfig=function(){ea=null,Ya=!1},b.isValidAttribute=function(k,c,f){ea||bb({});var h=ga(k),s=ga(c);return Ub(h,s,f)},b.addHook=function(k,c){if(typeof c!=="function")return;l[k]=l[k]||[],fa(l[k],c)},b.removeHook=function(k){l[k]&&jb(l[k])},b.removeHooks=function(k){l[k]&&(l[k]=[])},b.removeAllHooks=function(){l={}},b}var mc=tb(),ub=mc;var vb=a=>{let b={"!":"33","#":"35","&":"38;","(":"40",")":"41","*":"42","+":"43","-":"45",".":"46","<":"60;",">":"62;","[":"91","\\":"92","]":"93",_:"95","`":"96","{":"123","}":"125","~":"126"},d=/(^|\s)(> )+(.|\n)+?(?=$|\n(?!>))/g,e="[0-9]+\\. ",i="[-+*] ",p=g=>"&#"+(b[g]||g),j=g=>g.replace(/[&<>]/g,p),n=g=>g.trim().slice(1,-1),q=(g,l)=>`<${g}>${l}</${g}>`,Q=g=>{let l=new RegExp(`(^|\\n)${e}`).test(g),u=new RegExp(`(^|\\n)${l?e:i}`),M=g.split(u).filter(la=>la.trim().length);return q(l?"ol":"ul",M.map(la=>q("li",la)).join(""))},m=g=>{g=g.trim();let l=g.indexOf(" "),u=g.slice(l).replace(/#+$/,"").trim();return q(`h${l} id=${u.replace(/\W+/g,"-").toLowerCase()}`,u)},z=g=>{let l=g.trim().split(/\n/);return q(`h${l[1].indexOf("-")>-1?2:1}`,l[0])},U=g=>{let l=g.slice(1,-1).split("]("),u=l[1].split(/ ["`']/)[1];return`<a href="${l[1]}" ${u?`title="${u}"`:""}>${l[0]}</a>`},H=g=>{let l=g.split(/["`']/),u=l[0].trim().replace(/^<|>$/g,""),M=l[1];return` <a href="${u}" ${M?`title="${M}"`:""}>${u}</a>`},v=g=>{let l=g.slice(2,-1).split("]("),u=l[1].split(/ ["`']/)[1];return`<img src="${l[1]}" ${u?`title="${u}"`:""} alt="${l[0]}">`},t=g=>{let[l,...u]=g.trim().split(/\n+/),M=j(u.slice(0,-1).join("\r")).trim();return q("pre",`<code class="language-${l.slice(3)}">${M}</code>`)},E=g=>(g=q("blockquote",g.replace(/^ *?> /gm,"")),g.replace(d,E)),A=g=>` <a href="${g}">${g.trim()}</a>`,x=g=>q("p",g.trim()),Ra=g=>q("strong",g.slice(2,-2)),Sa=g=>q("em",n(g)),Ta=g=>q("del",n(g)),Ua=g=>q("code",j(n(g)));return a.replace(/\r+/g,`
`).replace(/\\[-*_\\`#~+.!(){}[\]]/g,g=>p(g.slice(1))).replace(/(^|\n).+?\n[-=]+(?=$|\n)/g,z).replace(/(^|\n)#+? (.|\n)+?(?=$|\n)/g,m).replace(/(^|\n)([-*_] ?){3,}(?=$|\n)/g,"<hr>").replace(/(^|\n)([0-9]+\.|[-+*]) (.|\n)+?(?=$|[\s\n]{3,})/g,Q).replace(d,E).replace(/(^|\n)```(.|\n)+?```(?=$|\n)/g,t).replace(/  (\n|$)/g,"<br>").replace(/!\[.+?\]\(.+?\)/g,v).replace(/\[.+?\]\(.+?\)/g,U).replace(/<(https?:\/\/|www).+?>( (".+?")|('.+?'))?(?=$|\n| )/g,H).replace(/(^|\n| )(https?:\/\/|www)(.+?)+?(?=$|\n| )/g,A).replace(/\s[*_](?=\s)/g,g=>g.slice(0,1)+p(g.slice(1))).replace(/[*_]{2}.+?[*_]{2}/gm,Ra).replace(/[*_].+?[*_]/gm,Sa).replace(/~.+?~/gm,Ta).replace(/`.+?`/gm,Ua).replace(/(^|\n\n+)(?!<[huol]).+?(?=$|\n\n+)/gi,x)};var X=()=>{Y("showPreview",!0);let a=_(".preview"),b=vb(r.currentContract.body);a.innerHTML=ub.sanitize(b)};var cb=a=>{let b="data-contract-id",d=a.target.closest(`[${b}]`).getAttribute(b);Y("currentContract",wb(d)),r.showPreview&&X()};const nc=new WeakMap(),V=a=>typeof a==="function"&&nc.has(a);const Ha=typeof window!=="undefined"&&window.customElements!=null&&window.customElements.polyfillWrapFlushCallback!==void 0,ia=(a,b,d=null)=>{for(;b!==d;){const e=b.nextSibling;a.removeChild(b),b=e}};const D={},ua={};const L=`{{lit-${String(Math.random()).slice(2)}}}`,Pa=`<!--${L}-->`,Bb=new RegExp(`${L}|${Pa}`),aa="$lit$";class Ma{constructor(a,b){this.parts=[],this.element=b;const d=[],e=[],i=document.createTreeWalker(b.content,133,null,!1);let p=0,j=-1,n=0;const{strings:q,values:{length:Q}}=a;for(;n<Q;){const m=i.nextNode();if(m===null){i.currentNode=e.pop();continue}j++;if(m.nodeType===1){if(m.hasAttributes()){const z=m.attributes,{length:U}=z;let H=0;for(let v=0;v<U;v++)Cb(z[v].name,aa)&&H++;for(;H-- >0;){const v=q[n],t=xa.exec(v)[2],E=t.toLowerCase()+aa,A=m.getAttribute(E);m.removeAttribute(E);const x=A.split(Bb);this.parts.push({type:"attribute",index:j,name:t,strings:x}),n+=x.length-1}}m.tagName==="TEMPLATE"&&(e.push(m),i.currentNode=m.content)}else if(m.nodeType===3){const z=m.data;if(z.indexOf(L)>=0){const U=m.parentNode,H=z.split(Bb),v=H.length-1;for(let t=0;t<v;t++){let E,A=H[t];if(A==="")E=K();else{const x=xa.exec(A);x!==null&&Cb(x[2],aa)&&(A=A.slice(0,x.index)+x[1]+x[2].slice(0,-aa.length)+x[3]),E=document.createTextNode(A)}U.insertBefore(E,m),this.parts.push({type:"node",index:++j})}H[v]===""?(U.insertBefore(K(),m),d.push(m)):m.data=H[v],n+=v}}else if(m.nodeType===8)if(m.data===L){const z=m.parentNode;(m.previousSibling===null||j===p)&&(j++,z.insertBefore(K(),m)),p=j,this.parts.push({type:"node",index:j}),m.nextSibling===null?m.data="":(d.push(m),j--),n++}else{let z=-1;for(;(z=m.data.indexOf(L,z+1))!==-1;)this.parts.push({type:"node",index:-1}),n++}}for(const m of d)m.parentNode.removeChild(m)}}const Cb=(a,b)=>{const d=a.length-b.length;return d>=0&&a.slice(d)===b},Oa=a=>a.index!==-1,K=()=>document.createComment(""),xa=/([ \x09\x0a\x0c\x0d])([^\0-\x1F\x7F-\x9F "'>=/]+)([ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*))$/;class va{constructor(a,b,d){this.__parts=[],this.template=a,this.processor=b,this.options=d}update(a){let b=0;for(const d of this.__parts)d!==void 0&&d.setValue(a[b]),b++;for(const d of this.__parts)d!==void 0&&d.commit()}_clone(){const a=Ha?this.template.element.content.cloneNode(!0):document.importNode(this.template.element.content,!0),b=[],d=this.template.parts,e=document.createTreeWalker(a,133,null,!1);let i=0,p=0,j,n=e.nextNode();for(;i<d.length;){j=d[i];if(!Oa(j)){this.__parts.push(void 0),i++;continue}for(;p<j.index;)p++,n.nodeName==="TEMPLATE"&&(b.push(n),e.currentNode=n.content),(n=e.nextNode())===null&&(e.currentNode=b.pop(),n=e.nextNode());if(j.type==="node"){const q=this.processor.handleTextExpression(this.options);q.insertAfterNode(n.previousSibling),this.__parts.push(q)}else this.__parts.push(...this.processor.handleAttributeExpressions(n,j.name,j.strings,this.options));i++}return Ha&&(document.adoptNode(a),customElements.upgrade(a)),a}}const qc=` ${L} `;class ja{constructor(a,b,d,e){this.strings=a,this.values=b,this.type=d,this.processor=e}getHTML(){const a=this.strings.length-1;let b="",d=!1;for(let e=0;e<a;e++){const i=this.strings[e],p=i.lastIndexOf("<!--");d=(p>-1||d)&&i.indexOf("-->",p+1)===-1;const j=xa.exec(i);j===null?b+=i+(d?qc:Pa):b+=i.substr(0,j.index)+j[1]+j[2]+aa+j[3]+L}return b+=this.strings[a],b}getTemplateElement(){const a=document.createElement("template");return a.innerHTML=this.getHTML(),a}}const wa=a=>a===null||!(typeof a==="object"||typeof a==="function"),Ia=a=>Array.isArray(a)||!!(a&&a[Symbol.iterator]);class ta{constructor(a,b,d){this.dirty=!0,this.element=a,this.name=b,this.strings=d,this.parts=[];for(let e=0;e<d.length-1;e++)this.parts[e]=this._createPart()}_createPart(){return new Ja(this)}_getValue(){const a=this.strings,b=a.length-1;let d="";for(let e=0;e<b;e++){d+=a[e];const i=this.parts[e];if(i!==void 0){const p=i.value;if(wa(p)||!Ia(p))d+=typeof p==="string"?p:String(p);else for(const j of p)d+=typeof j==="string"?j:String(j)}}return d+=a[b],d}commit(){this.dirty&&(this.dirty=!1,this.element.setAttribute(this.name,this._getValue()))}}class Ja{constructor(a){this.value=void 0,this.committer=a}setValue(a){a!==D&&(!wa(a)||a!==this.value)&&(this.value=a,V(a)||(this.committer.dirty=!0))}commit(){for(;V(this.value);){const a=this.value;this.value=D,a(this)}if(this.value===D)return;this.committer.commit()}}class ${constructor(a){this.value=void 0,this.__pendingValue=void 0,this.options=a}appendInto(a){this.startNode=a.appendChild(K()),this.endNode=a.appendChild(K())}insertAfterNode(a){this.startNode=a,this.endNode=a.nextSibling}appendIntoPart(a){a.__insert(this.startNode=K()),a.__insert(this.endNode=K())}insertAfterPart(a){a.__insert(this.startNode=K()),this.endNode=a.endNode,a.endNode=this.startNode}setValue(a){this.__pendingValue=a}commit(){if(this.startNode.parentNode===null)return;for(;V(this.__pendingValue);){const b=this.__pendingValue;this.__pendingValue=D,b(this)}const a=this.__pendingValue;if(a===D)return;wa(a)?a!==this.value&&this.__commitText(a):a instanceof ja?this.__commitTemplateResult(a):a instanceof Node?this.__commitNode(a):Ia(a)?this.__commitIterable(a):a===ua?(this.value=ua,this.clear()):this.__commitText(a)}__insert(a){this.endNode.parentNode.insertBefore(a,this.endNode)}__commitNode(a){if(this.value===a)return;this.clear(),this.__insert(a),this.value=a}__commitText(a){const b=this.startNode.nextSibling;a=a==null?"":a;const d=typeof a==="string"?a:String(a);b===this.endNode.previousSibling&&b.nodeType===3?b.data=d:this.__commitNode(document.createTextNode(d)),this.value=a}__commitTemplateResult(a){const b=this.options.templateFactory(a);if(this.value instanceof va&&this.value.template===b)this.value.update(a.values);else{const d=new va(b,a.processor,this.options),e=d._clone();d.update(a.values),this.__commitNode(e),this.value=d}}__commitIterable(a){Array.isArray(this.value)||(this.value=[],this.clear());const b=this.value;let d=0,e;for(const i of a)e=b[d],e===void 0&&(e=new $(this.options),b.push(e),d===0?e.appendIntoPart(this):e.insertAfterPart(b[d-1])),e.setValue(i),e.commit(),d++;d<b.length&&(b.length=d,this.clear(e&&e.endNode))}clear(a=this.startNode){ia(this.startNode.parentNode,a.nextSibling,this.endNode)}}class Da{constructor(a,b,d){this.value=void 0,this.__pendingValue=void 0;if(d.length!==2||d[0]!==""||d[1]!=="")throw new Error("Boolean attributes can only contain a single expression");this.element=a,this.name=b,this.strings=d}setValue(a){this.__pendingValue=a}commit(){for(;V(this.__pendingValue);){const b=this.__pendingValue;this.__pendingValue=D,b(this)}if(this.__pendingValue===D)return;const a=!!this.__pendingValue;this.value!==a&&(a?this.element.setAttribute(this.name,""):this.element.removeAttribute(this.name),this.value=a),this.__pendingValue=D}}class Fa extends ta{constructor(a,b,d){super(a,b,d);this.single=d.length===2&&d[0]===""&&d[1]===""}_createPart(){return new zb(this)}_getValue(){return this.single?this.parts[0].value:super._getValue()}commit(){this.dirty&&(this.dirty=!1,this.element[this.name]=this._getValue())}}class zb extends Ja{}let Ab=!1;(()=>{try{const a={get capture(){return Ab=!0,!1}};window.addEventListener("test",a,a),window.removeEventListener("test",a,a)}catch(a){}})();class Ea{constructor(a,b,d){this.value=void 0,this.__pendingValue=void 0,this.element=a,this.eventName=b,this.eventContext=d,this.__boundHandleEvent=e=>this.handleEvent(e)}setValue(a){this.__pendingValue=a}commit(){for(;V(this.__pendingValue);){const i=this.__pendingValue;this.__pendingValue=D,i(this)}if(this.__pendingValue===D)return;const a=this.__pendingValue,b=this.value,d=a==null||b!=null&&(a.capture!==b.capture||a.once!==b.once||a.passive!==b.passive),e=a!=null&&(b==null||d);d&&this.element.removeEventListener(this.eventName,this.__boundHandleEvent,this.__options),e&&(this.__options=pc(a),this.element.addEventListener(this.eventName,this.__boundHandleEvent,this.__options)),this.value=a,this.__pendingValue=D}handleEvent(a){typeof this.value==="function"?this.value.call(this.eventContext||this.element,a):this.value.handleEvent(a)}}const pc=a=>a&&(Ab?{capture:a.capture,passive:a.passive,once:a.once}:a.capture);class yb{handleAttributeExpressions(a,b,d,e){const i=b[0];if(i==="."){const j=new Fa(a,b.slice(1),d);return j.parts}if(i==="@")return[new Ea(a,b.slice(1),e.eventContext)];if(i==="?")return[new Da(a,b.slice(1),d)];const p=new ta(a,b,d);return p.parts}handleTextExpression(a){return new $(a)}}const Ga=new yb();function Ka(a){let b=Na.get(a.type);b===void 0&&(b={stringsArray:new WeakMap(),keyString:new Map()},Na.set(a.type,b));let d=b.stringsArray.get(a.strings);if(d!==void 0)return d;const e=a.strings.join(L);return d=b.keyString.get(e),d===void 0&&(d=new Ma(a,a.getTemplateElement()),b.keyString.set(e,d)),b.stringsArray.set(a.strings,d),d}const Na=new Map();const La=new WeakMap(),ka=(a,b,d)=>{let e=La.get(b);e===void 0&&(ia(b,b.firstChild),La.set(b,e=new $(Object.assign({templateFactory:Ka},d))),e.appendInto(b)),e.setValue(a),e.commit()};typeof window!=="undefined"&&(window.litHtmlVersions||(window.litHtmlVersions=[])).push("1.2.1");const G=(a,...b)=>new ja(a,b,"html",Ga);var db=()=>G`
<h2>Documents</h2>
<ul>
  ${r.currentUser.contracts.map(a=>G`
  <li ?data-active=${a.id==r.currentContract.id} data-contract-id=${a.id}>
    <button class=link @click=${cb}>
      ${a.id}
    </button>
  </li>`)}
</ul>
`;var eb=a=>{let b="data-dataset-id",d=a.target.closest(`[${b}]`).getAttribute(b);setState("currentDataset",xb(d)),r.showPreview&&X()};var fb=()=>G`
<h2>Data</h2>
<ul class=sets>
  ${r.currentUser.datasets.map(a=>{var b;return G`
  <li ?data-active=${((b=r.currentDataset)==null?void 0:b.id)==a.id} data-dataset-id=${a.id}>
  <button class=link @click=${eb}>
    ${a.id}
  </button>
  <ul class=fields>
    ${Object.entries(a.fields).map((d,e)=>G`
          <li>
            <key>
              <label for='${d}_key'>Name</label>
              <input .value=${d} @input=${a.fields} type=text id='${d}_key' />
            </key>
            <value>
              <label for='${d}_value'>Value</label>
              <input .value=${e} type=text id='${d}_value' />
            </value>
          </li>
        `)}
  </ul>
  </li>
  `})}
</ul>
`;var gb=()=>G`

  <toolbar>
    <button class="tab" ?data-active=${!r.showPreview} @click=${()=>Y("showPreview",!1)}>
      Editor
    </button>
    <button class="tab" ?data-active=${r.showPreview} @click=${X}>
      Preview
    </button>
  </toolbar>

  ${r.showPreview?G`<div class=preview></div>`:G`<textarea class=editor @input=${a=>r.currentContract.body=a.target.value}>${r.currentContract.body}</textarea>`}
`;let Db=setTimeout(()=>null,1e3),ba=Qa("contractly_user")||{savedLocally:!1,showPreview:!1,currentContract:{},currentUser:{contracts:[],datasets:[]}};function Aa(){clearTimeout(Db),Db=setTimeout(()=>{ba.savedLocally=!0,Qa("contractly_user",ba)},1e3)}function za(){ka(db(),_("#left-pane")),ka(gb(),_("#center-pane")),ka(fb(),_("#right-pane"))}function Y(a,b){ba[a]=b,za(),Aa()}let wb=a=>ba.currentUser.contracts.find(b=>b.id==a),xb=a=>ba.currentUser.datasets.find(b=>b.id==a);var r=ba;(function(){return Eb(this,[],function*(){document.documentElement.classList.add("loading");if(!r.savedLocally){let a=yield fetch("/db.json").then(b=>b.json());r.currentUser=a.find(b=>b.name=="Nathan"),r.currentContract=r.currentUser.contracts[0],r.currentDataset=r.currentUser.datasets[0],za(),Aa()}document.documentElement.classList.remove("loading")})})();})();
/*! @license DOMPurify | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.2.2/LICENSE */
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
/**
 * @license
 * Copyright (c) 2018 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
